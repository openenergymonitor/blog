<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://blog.openenergymonitor.org/posts/37/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Blog | OpenEnergyMonitor">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="https://blog.openenergymonitor.org/posts/37/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Blog | OpenEnergyMonitor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />



    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:light,bold&amp;subset=Latin" rel="stylesheet"> <!-- Ubuntu font -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  </head>

<style>

@font-face {
  font-family: "oemFont";
  src: url(/font/Ubuntu-OEM-Light.ttf)
}

html, body {
  margin: 0; height: 100vh;
}

html {
  min-height: 100vh;
}

html, body {
  word-wrap: break-word;
  font-family: "oemFont", sans-serif;
}

a:visited, .a:hover, a:focus, a {
  color: #44b3e2;
}

.meta.clearfix {
  overflow-x: hidden;
}

.communityWrapper {
  position: relative;
  box-sizing: border-box;
  margin: 0 auto;
  width: 100%;
  height: 42px;
}

@media (min-width: 1080px) {
  .communityWrapper {
  width: 1080px;
  }
}

@media screen and (max-width: 400px) {
  .oemWrap {
  display: none;
  }
}

.fa-navicon {
  display: none;
  cursor: pointer;
  font-size: 30px;
  line-height: 42px;
  position: absolute;
  left: 0;
  color: #ffffff;
  padding-left: 12px;
  z-index: 9997;
}

@media screen and (max-width: 1079px) {
  .fa-navicon {
  display: inline-block;
  }
}

.titleHolder {
  position: relative;
  top: 0;
  width: 100%;
  height: 42px;
  background-color: #44b3e2;
  overflow: hidden;
  -webkit-box-shadow: 0 -2px 4px 2px #000;
  -moz-box-shadow: 0 -2px 4px 2px #000;
  box-shadow: 0 -2px 4px 2px #000;
}

.titleIcon {
  position: absolute;
  height: 42px;
  padding: 0 0 0 7px;
  text-align: center;
  line-height: 42px;
  color: #ffffff;
  vertical-align: top;
}

  .titleIcon i {
    vertical-align: middle;
    font-size: 32px;
    line-height: 42px;
  }

.thisTitle {
  position: absolute;
  box-sizing: border-box;
  left: 42px;
  right: 0;
  height: 42px;
  padding: 5px 0 5px 0;
  text-align: left;
  color: #ffffff;
  line-height: normal;
  vertical-align: top;
}

  .thisTitle a {
    position: absolute;
    top: 0;
    color: #ffffff;
  }

@media screen and (max-width: 1079px) {
  .titleIcon {
    left: auto;
    right: 0;
    padding: 0 7px 0 0;
  }

  .thisTitle {
    right: 42px;
    left: 0;
    text-align: right;
  }

    .thisTitle a {
      padding-right: 0;
    }
}

.thisTitle-top {
  top: 0;
  height: 60%;
  font-size: 18px;
}

.thisTitle-bottom {
  bottom: 0;
  height: 40%;
  font-size: 12px;
}

.navigation {
  position: absolute;
  display: inline-block;
  top: 0;
  right: 0;
  margin-right: 6px;
  height: 42px;
  min-width: 774px;
  overflow: visible;
  padding-right: 7px;
  z-index: 20;
  box-sizing: content-box;
}

@media screen and (min-width: 1080px) {
  .navigation {
  position: relative;
  float: right;
  display: inline-block;
  margin: 0;
  }
}

.navigation ul {
  list-style-type: none;
  float: right;
  top: 0;
  margin: 0;
  padding: 0;
  height: 100%;
  display: block;
}

.navigation ul li {
  float: left;
  background-color: #44b3e2;
}

.navigation ul li a {
  display: block;
  line-height: 42px;
  font-family: "oemFont", sans-serif;
  font-size: 16px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
  color: #ffffff;
}

.menuFreeze {
  height: 100%;
  overflow: hidden;
}

/* Navigation on smaller screens... */

@media screen and (max-width: 1079px) {
.navigation {
  position: fixed;
  display: none;
  top: 0;
  left: 0;
  height: 100vh;
  margin: 0;
  width: 0;
  font-size: 20px;
  background-color: #44b3e2;
  color: #ffffff;
  box-sizing: border-box;
  overflow: auto;
  min-width: 0;
  padding-right: 0;
  z-index: 99999999;
}

  .navigation ul {
    list-style-type: none;
    margin: 0;
    padding-top: 0;
  }

  .navigation ul li a {
    box-sizing: border-box;
    font-family: "oemFont", sans-serif;
    font-size: 20px;
    display: block;
    color: #ffffff;
    padding: 0 20px 0 20px;
    height: 12.5vh;
    line-height: 12.5vh;
    min-width: 180px;
    text-align: left;
  }

  .navigation ul li .fa {
    min-width: 25px;
  }
}

@media (max-width: 1079px) and (min-height: 550px) {
  .navigation ul li a {
    height: 68.75px;
    line-height: 68.75px;
  }
}

@media (max-width: 1079px) and (max-height: 200px) {
  .navigation ul li a {
    height: 25px;
    line-height: 25px;
  }
}

@media screen and (min-width: 1080px) {
  .navigation ul li:nth-child(1) {
    width: 88px;
  }
  .navigation ul li:nth-child(2) {
    width: 86px;
  }
  .navigation ul li:nth-child(3) {
    width: 92px;
  }
  .navigation ul li:nth-child(4) {
    width: 123px;
  }
  .navigation ul li:nth-child(5) {
    width: 133px;
  }
  .navigation ul li:nth-child(6) {
    width: 76px;
  }
  .navigation ul li:nth-child(7) {
    width: 80px;
  }
  .navigation ul li:nth-child(8) {
    width: 96px;
  }
}

.blackOut {
  position: fixed;
  display: none;
  top: 0;
  right: 0;
  height: 100vh;
  width: 100%;
  background-color: rgba(0,0,0,0.5);
  overflow: hidden;
  cursor: pointer;
  z-index:9998;
}

.actoemLink {
  background-color: #368fb4 !important;
}

.actoemLink a {
  color: #ffffff !important;
}

.searchBox {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgba(0,0,0,0.8);
  color: #fff;
  display: none;
  cursor: pointer;
  z-index: 9999999999999;
}

.searchBox form {
  margin: auto;
}

.searchBox input[type=submit] {
  cursor: pointer;
  padding: 10px;
  font-size: 20px;
  font-weight: bold;
  background-color: #44b3e2;
  color: #fff;
  border: none;
  -webkit-transition: background-color 500ms linear;
  -ms-transition: background-color 500ms linear;
  transition: background-color 500ms linear;
}

.searchBox input[type=submit]:hover {
  background-color: #77c8ea;
}

.searchBox input[type=text] {
  padding: 10px;
  font-size: 20px;
  border: none;
}

.searchText {
  width: 0;
}

.searchIcon {
  cursor: pointer;
}

.fa {
  text-shadow: 2px 2px 2px rgba(150, 150, 150, 0.5);
}

</style>

<body >




<div class="titleHolder">
  <div class="communityWrapper">
    <i class="fa fa-navicon"></i>
    <a href="/">
      <div class="titleIcon">
				<i aria-hidden="true" class="fa fa-bullhorn"></i>
			</div>
			<div class="thisTitle">
			  <div class="thisTitle-top">
        		<b>Blog</b>
				</div>
				<div class="thisTitle-bottom">
          Open<b>EnergyMonitor</b>
				</div>
			</div>
		</a>
    <div id="siteLinks" class="navigation">
      <ul>
        <li title="the homepage of OpenEnergyMonitor">
          <a href="https://openenergymonitor.org">
            <i class="fa fa-home" aria-hidden="true"></i><span class="navname">&nbsp;Home</span>
          </a>
        </li>
        <li title="a user guide for the OpenEnergyMonitor system">
          <a href="https://guide.openenergymonitor.org">
            <i class="fa fa-book" aria-hidden="true"></i><span class="navname">&nbsp;Guide</span>
          </a>
        </li>
        <li title="general information about energy monitoring, diversion and sustainability">
          <a href="https://learn.openenergymonitor.org">
            <i class="fa fa-mortar-board" aria-hidden="true"></i><span class="navname">&nbsp;Learn</span>
          </a>
        </li>
        <li title="a definitive list of resources for OpenEnergyMonitor hardware">
          <a href="https://guide.openenergymonitor.org/technical/resources/">
            <i class="fa fa-list-alt" aria-hidden="true"></i><span class="navname">&nbsp;Resources</span>
          </a>
        </li>
        <li title="the openenergymonitor forum">
          <a href="https://community.openenergymonitor.org">
            <i class="fa fa-comments" aria-hidden="true"></i><span class="navname">&nbsp;Community</span>
          </a>
        </li>
        <li title="you are here: keep up with new developments at OpenEnergyMonitor" class="actoemLink">
          <a href="https://blog.openenergymonitor.org">
            <i class="fa fa-bullhorn" aria-hidden="true"></i><span class="navname">&nbsp;Blog</span>
          </a>
        </li>
        <li title="the official OpenEnergyMonitor online store">
          <a href="https://shop.openenergymonitor.com">
            <i class="fa fa-shopping-cart" aria-hidden="true"></i><span class="navname">&nbsp;Shop</span>
          </a>
        </li>
				<li title="search for something on OpenEnergyMonitor">
					<a class="searchIcon">
					    <i aria-hidden="true" class="fa fa-search"></i><span class="navname">&nbsp;Search</span>
				  </a>
				</li>
      </ul>
    </div>
  </div>
</div>
<div class="searchBox">
  <form target="_blank" id="searchform" action="https://www.google.com/cse">
    <div>
      <input type="hidden" name="cx" value="006198118389747886812:_nmxikw563w" />
      <input type="hidden" name="ie" value="UTF-8" />
      <input type="text" class="searchText" value="" name="q" id="q" autocomplete="off" />
      <input type="submit" id="searchsubmit" name="sa" value="Search" />
    </div>
  </form>
</div>
<div class="blackOut"></div>
<div style="position:relative;width:100%;top:0;height:20px"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script defer src="/javascripts/octopress.js"></script>

<script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

<script>

var closeStatus = false;

function openButton() {
  $("html, body").addClass("menuFreeze");
  $(".blackOut").show();
  $(".navigation").show();
  $(".navigation").animate({ width:'180' },"0.5s");
}

$(".fa-navicon").click(function() {
  openButton();
  closeStatus = true;
});

function closeButton() {
  $("html, body").removeClass("menuFreeze");
  $(".blackOut").hide();
  $(".navigation").animate({ width:'0' },"0.5s");
}

$(".blackOut").click(function() {
  closeButton();
  closeStatus = false;
});

$(document).ready(function(){
  $("table").wrap("<div style='max-width:100%;overflow-x:auto'></div>");
});

$(window).resize(function(){
  if ($(window).width() > 1079 && closeStatus == true) {
    if (!$("html").hasClass("mobile-device")) {
      closeButton();
      closeStatus = false;
    }
  }
});

$(".searchIcon").click(function() {
   $(".searchBox").css("display","flex");
   $(".searchText").animate({width: "200px"});
   $(".searchText").focus();
   $("html, body").addClass("menuFreeze");
});
$(".searchBox").click(function() {
   $(".searchBox").css("display","none");
   $(".searchText").blur();
   $(".searchText").css("width","0");
   closeButton();
});
$(".searchBox form").click( function(event) {
   event.stopPropagation();
});

$(document).ready(function(){ //alphabetically order list
  var ls, x, switchState, z, switchMe;
  ls = document.getElementById("ub202");
  switchState = true;
  while (switchState) {
    switchState = false;
    z = ls.getElementsByTagName("LI");
    for (x = 0; x < (z.length - 1); x++) {
      switchMe = false;
      if (z[x].innerHTML.toLowerCase() > z[x + 1].innerHTML.toLowerCase()) {
        switchMe= true;
        break;
      }
    }
    if (switchMe) {
      z[x].parentNode.insertBefore(z[x + 1], z[x]);
      switchState = true;
    }
  }
});

</script>

<div class="grid-wrapper">
  <div class="grid grid-center">
    
    <div class="grid__item two-thirds lap-one-whole palm-one-whole">
    

        
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/09/experiments-with-hall-effect-current/">Experiments with a hall effect current sensor</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-09-02T21:58:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-09-02 21:58:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/dc/'>DC</a></li>
      
        <li><a class='category' href='/categories/energy-monitor/'>energy monitor</a></li>
      
        <li><a class='category' href='/categories/hall-effect/'>hall effect</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2009/09/experiments-with-hall-effect-current/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Thought Id have a go at using a hall effect sensor to measure current. A hall effect sensor can measure DC and AC current, Ive had a go at the DC and it seems to work quite nicely, its also quite a bit cheaper than the other DC current measuring method I detail <a href="http://openenergymonitor.org/emon/node/31">here</a>, which is always good!<br /><br />Here's a pic of the setup:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_Yqa3j9ZhET8/Sp7rzwtaMVI/AAAAAAAAAZY/4j-iT2YeQ8Q/s1600-h/hall.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 300px;" src="http://2.bp.blogspot.com/_Yqa3j9ZhET8/Sp7rzwtaMVI/AAAAAAAAAZY/4j-iT2YeQ8Q/s400/hall.JPG" alt="" id="BLOGGER_PHOTO_ID_5376994279608168786" border="0" /></a><br />I bought the hall sensor from farnell <a href="http://uk.farnell.com/jsp/search/productdetail.jsp?CMP=i-ddd7-00001003&amp;sku=1082269">here</a>.<br /><br />It requires a supply voltage of between 6 and 12. Its output is centred around Vcc/2. The output voltage increases about 50mV per Amp when the supply voltage is 12V. When measuring DC current the output looks like this:<br />0.0A - 6.0V<br />1.0A - 6.05V<br />2.0A - 6.10V<br />...<br /><br />I've used an inverting amplifier to invert the signal about a set voltage so that the voltage going to the Arduino's analog in is between 0 and 5V. I will upload the circuit diagram and further details soon when I get a chance.<br /><br />So far it looks like a promising method.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/08/openco2monitor-collaboration/">OpenCO2Monitor collaboration</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-08-25T08:51:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-08-25 08:51:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
     <br>
    
      <a class='comments'
         href="/2009/08/openco2monitor-collaboration/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    A couple of days ago I was contacted by <span class="blsp-spelling-error" id="SPELLING_ERROR_0">Ronic</span> Concepcion and  <span class="blsp-spelling-error" id="SPELLING_ERROR_1">Ymreb</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_2">Momville</span> from the University Southeastern Philippines who are undertaking a technical research project called <span class="blsp-spelling-error" id="SPELLING_ERROR_3">OpenCO</span>2Monitor as a part of their BS Information Technology degrees.<br /><br />Their project will be a collaboration with this project using the <a href="http://openenergymonitor.org/emon/node/28">Mains AC:Non-invasive method</a> of energy monitoring to supply energy consumption information to their software.<br /><br />From their blog: <a href="http://openco2monitor.exofire.net/">http://openco2monitor.exofire.net</a><blockquote>"<span class="blsp-spelling-error" id="SPELLING_ERROR_4">OpenCO</span>2Monitor is an open source software which is capable of monitoring CO2 emissions on a house/building. When the emitted CO2 reaches danger levels, the software will automatically sound an alarm and show a message dialog on the computer screen tell the user what to do.<br /><br /><span class="blsp-spelling-error" id="SPELLING_ERROR_5">OpenCO</span>2Monitor is not only capable of monitoring CO2 levels but also monitoring the electric energy consumption of a house/building. It is also capable of showing your current monthly bill based on the Davao Light and Power Company generation charge per kilowatt hour.<br /><br /><span class="blsp-spelling-error" id="SPELLING_ERROR_6">OpenCO</span>2Monitor also shows how many number of full grown trees a house/building should have in its surroundings to offset its CO2 Emissions. It also displays the house/building’s current contribution to temperature rise.<br /><br /><span class="blsp-spelling-error" id="SPELLING_ERROR_7">OpenCO</span>2Monitor uses the Mains AC:Non-invasive method from <span class="blsp-spelling-error" id="SPELLING_ERROR_8">OpenEnergyMonitor</span>.org to read the <span class="blsp-spelling-error" id="SPELLING_ERROR_9">Kwh</span> Usage of a house/building."<br /></blockquote>All really useful information that aims to help the user to  "save money and energy while lessening their contribution to greenhouse gasses."
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/08/36-hours-of-house-electrical-energy-use/">36 hours of house electrical energy use monitoring</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-08-19T18:23:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-08-19 18:23:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
     <br>
    
      <a class='comments'
         href="/2009/08/36-hours-of-house-electrical-energy-use/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Here are some KST graphical outputs of whole house electrical energy use over about 36 hours using the <a href="http://openenergymonitor.org/emon/node/28">non-invasive method</a>.<br /><br />The large peaks is water heating. The small ones may be the fridge switching on and off.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SoxD4SMAbuI/AAAAAAAAAZI/YP0ko5_hY-U/s1600-h/Output.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 220px;" src="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SoxD4SMAbuI/AAAAAAAAAZI/YP0ko5_hY-U/s400/Output.png" alt="" id="BLOGGER_PHOTO_ID_5371743089780092642" border="0" /></a><br />zoomed in a bit.. a few hours:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_Yqa3j9ZhET8/SoxEBN9PatI/AAAAAAAAAZQ/KCyX4UtYhKk/s1600-h/output2.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 220px;" src="http://2.bp.blogspot.com/_Yqa3j9ZhET8/SoxEBN9PatI/AAAAAAAAAZQ/KCyX4UtYhKk/s400/output2.png" alt="" id="BLOGGER_PHOTO_ID_5371743243263240914" border="0" /></a><br />Im quite happy with this method now, its nice, simple and safe.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/08/measuring-dc-electrical-energy/">Measuring DC electrical energy production from micro-renewables</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-08-14T22:45:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-08-14 22:45:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
     <br>
    
      <a class='comments'
         href="/2009/08/measuring-dc-electrical-energy/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Just finished writing up a page about <a href="http://openenergymonitor.org/emon/node/31">measuring DC electrical energy production from micro-renewables.</a> I built is for measuring the output of the wind turbine. Seems to work quite well although I need to do a bit more work on calibration.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SoXpMmE6IvI/AAAAAAAAAZA/0MCHBzJjcjY/s1600-h/12V01.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 165px;" src="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SoXpMmE6IvI/AAAAAAAAAZA/0MCHBzJjcjY/s400/12V01.JPG" alt="" id="BLOGGER_PHOTO_ID_5369954533298021106" border="0" /></a><br />Here's a video of it all working, sorry about the rushed and blurry video taking...<br /><p><object height="300" width="400"><br /><param value="always" name="allowscriptaccess"><br /><param value="http://vimeo.com/moogaloop.swf?clip_id=6105016&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" name="movie"><embed allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" src="http://vimeo.com/moogaloop.swf?clip_id=6105016&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" height="300" width="400"></embed></object></p><br /><p><a href="http://vimeo.com/6105016">Monitoring the output of the wind turbine.</a> from <a href="http://vimeo.com/user853442">Trystan Lea</a> on <a href="http://vimeo.com/">Vimeo</a>.</p>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/08/measuring-ac-mains-energy-use-non/">Measuring AC mains energy use the non-invasive current transformer method - part 2</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-08-05T13:18:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-08-05 13:18:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/arduino/'>arduino</a></li>
      
        <li><a class='category' href='/categories/current-transformer/'>current transformer</a></li>
      
        <li><a class='category' href='/categories/efergy/'>efergy</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2009/08/measuring-ac-mains-energy-use-non/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Over the last few weeks I have been working on measuring AC mains energy use using the non-invasive current transformer method. I've updated the website with a page about what I've done and how it works <a href="http://openenergymonitor.org/emon/node/28">here</a> (there's still some work to be done on the page, but most of the info is there now).<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_Yqa3j9ZhET8/SnmHOcRSRAI/AAAAAAAAAY4/c_G8bq4cDtg/s1600-h/noninv01s2.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 194px;" src="http://3.bp.blogspot.com/_Yqa3j9ZhET8/SnmHOcRSRAI/AAAAAAAAAY4/c_G8bq4cDtg/s400/noninv01s2.JPG" alt="" id="BLOGGER_PHOTO_ID_5366469113165267970" border="0" /></a><span style="font-style: italic;">Measuring energy use in a power strip above- but is just as easy to measure whole house electrical energy use by cliping the sensor to the mains input to the house. </span>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/08/printable-one-page-project-description/">Printable one page project description</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-08-04T15:50:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-08-04 15:50:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/energy-monitor/'>energy monitor</a></li>
      
        <li><a class='category' href='/categories/open-source/'>open source</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2009/08/printable-one-page-project-description/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    I've put together a printable one page project description. Useful for when I need to describe to people what <span class="blsp-spelling-error" id="SPELLING_ERROR_0"><span class="blsp-spelling-error" id="SPELLING_ERROR_0">Im</span></span> working on. It can be downloaded in <span class="blsp-spelling-error" id="SPELLING_ERROR_1"><span class="blsp-spelling-error" id="SPELLING_ERROR_1">pdf</span></span> form below.<br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SnhhVWf8EGI/AAAAAAAAAYo/q80FcBk1X-8/s1600-h/oemproject.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 283px;" src="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SnhhVWf8EGI/AAAAAAAAAYo/q80FcBk1X-8/s400/oemproject.png" alt="" id="BLOGGER_PHOTO_ID_5366145975456632930" border="0" /></a><a href="http://openenergymonitor.org/emon/sites/default/files/OpenEnergyMonitorProject.pdf"><br /><span class="blsp-spelling-error" id="SPELLING_ERROR_2"><span class="blsp-spelling-error" id="SPELLING_ERROR_2">OpenEnergyMonitorProject</span></span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_3"><span class="blsp-spelling-error" id="SPELLING_ERROR_3">pdf</span></span></a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/07/update-on-progress-and-revised-aim/">Update on progress and a revised aim</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-07-26T17:22:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-07-26 17:22:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> four minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/energy-monitoring/'>energy monitoring</a></li>
      
        <li><a class='category' href='/categories/open-source/'>open source</a></li>
      
        <li><a class='category' href='/categories/renewable/'>renewable</a></li>
      
        <li><a class='category' href='/categories/wind/'>wind</a></li>
      
        <li><a class='category' href='/categories/wind-turbine/'>wind turbine</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2009/07/update-on-progress-and-revised-aim/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    First an update on what I've been working on and where I hope to go next.<br /><br />Over the last few weeks I have been working on monitoring mains AC electricity energy use with the non invasive current transformer method rather than the invasive current sensing resistor method. In my previous post on the current transformer (CT) method I made two errors first the circuit I used was over complicated and secondly the efergy energy monitor seems to be able to estimate real power. Even though the CT method only measures current, I tried to see if it was possible to infer the voltage waveform from the current waveform producing a close estimate of the real power, It seems to have worked quite well. I will upload the details of what I have done soon.<br /><br />I have also been working on DC energy monitoring for the wind turbine. I built the circuit that I talked about in the previous post. I however managed to blow one of the amps on the LT1495 chip and there seems to be an offset on the other amp which may be due to having blown one side. Id like to find a cheaper amp to replace the LT1495, maybe sacrificing a little on accuracy.<br /><br />For the next two weeks the wind turbine is going up at two local festivals here in North Wales (Celtic camp and the National Eisteddfod). If your in the area feel free to drop by.<br /><br />After the festivals I hope to have a look at monitoring the energy captured by the hot water solar panel we have here on our house, at the moment were not sure if it is working properly, it doesn't seem to be heating much water. However its hard to tell; the controller gives the current temperatures of the tank and panel, it would be useful to have graphs of the temperatures over several days and if a flow meter is installed it is possible to measure kWh of heat captured. Hopefully with better information it would be easier to see how well the system is working. It would be great to have a bit of software that analysed the data from the system, compared it to ideal site data and then be able to tell you something like “your system is working at 80% of potential”<br /><br />All the above applications can all share the same software and similar electronics based on the Arduino. Once one is built, your have a lot of what you need for the others.<br /><br />Further along the line it could be interesting to investigate possibilities for predicting how much energy it is possible to capture from a wind turbine or a hydro turbine before it is installed at a site using an arduino connected to an anemometer for wind or a river flow meter for hydro. I have also been doing some work with Suneil on trying to characterise how well the generator we built for the wind turbine works. With some detailed data and analysis it might be possible to identify possible improvements. Both the energy prediction and generator development could again share much of the same electronics, software and knowledge required for the energy use and energy capture parts of the project. And finally I would like to look at Internet connectivity, it would be really great to be able to check up on how say the wind turbine is doing from anyware in the world.<br /><br />And so for the project to encompass all of the above:<br /><br /><span style="font-style: italic;">"This is a project to develop and build open source energy monitoring and analysis tools for energy efficiency and distributed renewable micro generation."</span><br /><br />The project is then divided into 6 areas:<br /><br /><span style="font-weight: bold;">Energy Use</span><br />Mains AC electricity and DC.<br /><br /><span style="font-weight: bold;">Energy Capture</span><br />Wind turbine, hot water solar, hydro etc.<br /><br /><span style="font-weight: bold;">Energy Prediction</span><br />Wind speeds, stream flow...<br /><br /><span style="font-weight: bold;">Energy Technology Development</span><br />Tools for the development and building stage rather than the use stage.<br /><br /><span style="font-weight: bold;">Data graphing and analysis and storage.</span><br />Using free and open source software<br /><br /><span style="font-weight: bold;">Sharing data with the world</span><br />Internet connectivity.<br /><br />Hopefully this better reflects the direction of the work and will hopefully be a more useful collection of tools for anyone interested.<br /><br />I will be updating the website soon with the recent work and to reflect the revised aim.<br /><br />Any comments on the above would be great. Thanks for reading!
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/06/software-improvement-and-examples/">Software improvement and examples</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-06-25T22:02:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-06-25 22:02:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/arduino/'>arduino</a></li>
      
        <li><a class='category' href='/categories/java/'>java</a></li>
      
        <li><a class='category' href='/categories/serial/'>serial</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2009/06/software-improvement-and-examples/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    I have made a start on rewriting parts of the software to make the code a bit more object orientated and easier to use. I was finding that every time I needed to adapt the software for a different use it was a bit messy.<br /><br />In the process of doing a the re-write I will be adding examples of each significant part of the whole program working independently.<br /><br />Have a look on the <a href="http://openenergymonitor.org/emon/node/3">software page</a> for part 01 - Reading data from the Arduino and conversion of the data to a useful form.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/06/start-on-dc-current-sensing/">A start on DC current sensing</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-06-22T15:08:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-06-22 15:08:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/dc/'>DC</a></li>
      
        <li><a class='category' href='/categories/dc-current-sensing/'>DC current sensing</a></li>
      
        <li><a class='category' href='/categories/energy-monitor/'>energy monitor</a></li>
      
        <li><a class='category' href='/categories/wind-turbine/'>wind turbine</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2009/06/start-on-dc-current-sensing/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Now that both the <a href="http://www.wyfsd.org/cms/index.php?page=wind_turbine_workshop_2008&amp;lan=en">North Wales</a> and <a href="http://cardiffwind.blogspot.com/">Cardiff <span class="blsp-spelling-error" id="SPELLING_ERROR_0">EWB</span> wind turbines</a> have been built, it would be good to have some sort of laptop based graphical output of the power produced from the wind turbine when its taken up to a site for testing and so I have been looking at how to modify the <span class="blsp-spelling-error" id="SPELLING_ERROR_1">OpenEnergyMonitor</span> design to do that.<br /><br />The wind turbine creates 12V DC electricity. It can produce up to around 500W of power, about 40Amps.<br /><br />I have decided to go along the invasive current sensing route with a sense resistor (also known as a shunt). When dealing with such high currents the sense resistor needs to be quite beefy! Here's a picture of my test setup using a computer power supply to simulate the wind turbine and a 50W halogen as a load. The large block in the middle is the <a href="http://uk.farnell.com/jsp/search/productdetail.jsp?sku=1339340&amp;_requestid=124438">sense resistor</a>.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_Yqa3j9ZhET8/Sj-hhYQQF_I/AAAAAAAAAUw/4V1fki-YNMw/s1600-h/shunt.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 240px;" src="http://3.bp.blogspot.com/_Yqa3j9ZhET8/Sj-hhYQQF_I/AAAAAAAAAUw/4V1fki-YNMw/s320/shunt.JPG" alt="" id="BLOGGER_PHOTO_ID_5350172477157808114" border="0" /></a>I'm now on the stage of getting parts for a circuit that will allow the <span class="blsp-spelling-error" id="SPELLING_ERROR_2">Arduino</span> to read the voltage across the sense resistor.<br /><br />I came across quite a lot of good circuit examples and advice on the linear technologies website <a href="http://www.linear.com/ad/current_sense.jsp">here</a>. <span class="blsp-spelling-error" id="SPELLING_ERROR_3">Im</span> thinking of following the battery current monitor circuit which can be found in their <a href="http://www.linear.com/ad/08-dc.pdf">DC <span class="blsp-spelling-error" id="SPELLING_ERROR_4">pdf</span></a>. Here's the schematic<span style="text-decoration: underline;">:</span><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_Yqa3j9ZhET8/Sj-kUKRgE3I/AAAAAAAAAU4/xvJ4LYcy_LI/s1600-h/circuit.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 214px;" src="http://2.bp.blogspot.com/_Yqa3j9ZhET8/Sj-kUKRgE3I/AAAAAAAAAU4/xvJ4LYcy_LI/s320/circuit.png" alt="" id="BLOGGER_PHOTO_ID_5350175548601537394" border="0" /></a>It can measure both current flowing in to the battery when the wind turbine is generating and current flowing out of the battery when there are loads connected.<br /><br />I will post up the results once its built, I also need to make a load that can vary between 0 and 500W so it can be tested properly, the current plan is to make that load from a mini 12V kettle and a mixture of 50W 20W and 10W halogen bulbs all of which can be turned on and off from the <span class="blsp-spelling-error" id="SPELLING_ERROR_5">Arduino</span>. Should be fun!<br /><br />If anyone has any experience with <span class="blsp-spelling-error" id="SPELLING_ERROR_6">renewables</span> and DC current measuring circuits I would be glad of any suggestions on any of the above.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2009/06/non-invasive-current-sensing-method/">Non invasive current sensing method</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2009-06-06T13:26:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2009-06-06 13:26:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> four minutes reading time</span> <br>
     <br>
    
      <a class='comments'
         href="/2009/06/non-invasive-current-sensing-method/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Last year I went out and bought an<a href="http://www.efergy.com/home.html"> efergy energy monitor</a> that measures whole house electricity use. It and many other such devices use a sensor called a current transformer to measure the current flowing through the live wire. You just clip it on to the live wire as it enters your house. No meddling with mains wiring required. The picture below shows the efergy sensor that I have clipped in to in this case the neutral wire (live or neutral makes no difference) entering the power strip.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_Yqa3j9ZhET8/SipxOYkLCoI/AAAAAAAAATI/yWPxxbWvGG8/s1600-h/clip.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 240px;" src="http://1.bp.blogspot.com/_Yqa3j9ZhET8/SipxOYkLCoI/AAAAAAAAATI/yWPxxbWvGG8/s320/clip.JPG" alt="" id="BLOGGER_PHOTO_ID_5344208399754791554" border="0" /></a><br />A current transformer works in a similar way to a normal transformer. The primary coil in this case is the mains wire. Opening the sensor up you can see the secondary coil wrapped around the other side of the transformer core.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SipxkOr7R5I/AAAAAAAAATQ/-QHtIUQhLgs/s1600-h/inner.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 240px;" src="http://4.bp.blogspot.com/_Yqa3j9ZhET8/SipxkOr7R5I/AAAAAAAAATQ/-QHtIUQhLgs/s320/inner.JPG" alt="" id="BLOGGER_PHOTO_ID_5344208775060080530" border="0" /></a><br />I found<a href="http://www.google.co.uk/url?sa=t&amp;source=web&amp;ct=res&amp;cd=1&amp;url=http%3A%2F%2Fwww.allegromicro.com%2Fen%2FProducts%2FDesign%2Fcurrent_sensing%2Fbsp_v1_52.pdf&amp;ei=u9EoSoPYOIfSjAeQ9IX0Cg&amp;usg=AFQjCNHmMNxg7xTviGPMqC_gITqrKytozw&amp;sig2=6WimvsLOzjxMBKurBF70lQ"> this paper</a> which is about hall sensors but there is an overview of current transformers there too. Their description of how a current transformer works:<br /><br /><span style="font-style: italic;">“The primary current (AC) will generate a magnetic field that is coupled into a secondary coil by Faraday’s Law. The magnitude of the secondary current is proportional to the number of turns in the coil, which is typically as high as >1000. The secondary current is then sensed through a sense resistor to convert the output into a voltage. ”</span><br /><br />The next step is to convert this voltage in to a form usable by the Arduino. The analog inputs on the arduino require a voltage in the range of 0 to 5V and so the voltage needs to be biased by 2.5V and should not have an amplitude of greater than +-2.5V.<br /><br />There's probably an easier and cheaper way to do this but the HCPL -7520 chip used in the <a href="http://openenergymonitor.org/emon/node/2">invasive   current sensor</a> does the job simply and is what I had on hand. The isolation provided by the chip isn't required in this case and so Vcc1 and Vcc2 can be supplied by the same source. Here's a picture of the circuit and the schematic.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_Yqa3j9ZhET8/Sipye5fYY6I/AAAAAAAAATY/31woQInKQas/s1600-h/circuit.JPG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 240px;" src="http://4.bp.blogspot.com/_Yqa3j9ZhET8/Sipye5fYY6I/AAAAAAAAATY/31woQInKQas/s320/circuit.JPG" alt="" id="BLOGGER_PHOTO_ID_5344209782982599586" border="0" /></a><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_Yqa3j9ZhET8/SipyezON7SI/AAAAAAAAATg/BO0cqwPPW8Q/s1600-h/Non-Invasive-s.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 191px;" src="http://1.bp.blogspot.com/_Yqa3j9ZhET8/SipyezON7SI/AAAAAAAAATg/BO0cqwPPW8Q/s320/Non-Invasive-s.png" alt="" id="BLOGGER_PHOTO_ID_5344209781299997986" border="0" /></a>To find a suitable value for the sense resistor I connected up the above circuit to Arduino analog input 0 and the invasive current sensor to input 1 allowing comparison of both waveforms using a slightly modified <a href="http://openenergymonitor.org/emon/node/3">power sampler program</a>. I know that the current waveform from the invasive current sensing method is correct and so it is possible to calibrate the non invasive method by matching the both waveforms. The voltage across the sense resistor is proportional its resistance multiplied by the current flowing through it and so by trying different values for the sense resistor it is possible to match both waveforms. The closest fixed value resistor I could find that gave matching waveforms was 22Ohms. The current waveforms from both methods match quite nicely:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_Yqa3j9ZhET8/Sipy5R9OjFI/AAAAAAAAATo/2nbnGdiHxwQ/s1600-h/match1s.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 179px;" src="http://4.bp.blogspot.com/_Yqa3j9ZhET8/Sipy5R9OjFI/AAAAAAAAATo/2nbnGdiHxwQ/s320/match1s.png" alt="" id="BLOGGER_PHOTO_ID_5344210236226833490" border="0" /></a><br />The graph show the current waveform with a laptop connected. The invasive current measurement is 0.5A rms and the non-invasive method gives 0.445A rms which is quite close, with a potentiometer with a range of about 50 Ohms the sense resistor value could be tuned and the result improved.<br /><br />So that's current done but to get a value for power we also need a voltage measurement. Unless its possible to infer the voltage waveform from the current waveform, devices like the efergy energy monitor can only be measuring current. So how do we get a power measurement? Apparent power is calculated as the rms voltage x rms current, to read more about power measurment have a look <a href="http://openenergymonitor.org/emon/theory">here</a>. The rms voltage is nearly always in the uk 230V however the rms current varies as the load is changed. The current transformer method can measure rms current and so we can calculate a value for apparent power with this method.<br /><br />My efergy energy monitor however has stopped working (maybe after I tried to work out how it worked by taking it apart) and so I cant compare the results. If I get it to work again, I will post up the results. However the results do agree with the invasive current sensing method and so should be good :)
    
  </div>
  </article>
  <hr>
  

  <div class="pagination">
    
      <a class="btn pull-left" href="/posts/38">&larr; Older</a>
    

    
    <a class="btn pull-right" href="/posts/36">Newer &rarr;</a>
    
  </div>


    </div>

    
    <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
      <div class="grid">

 
 <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      
        <li class="post">
          <a href="/2019/10/cydynni-display/">Cydynni emonCMS dashboard on display</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2019/05/emondc/">Introducing emonDC</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/11/2018-dev-update/">2018 Development Review</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/11/demand-side-response/">Demand Side Response Development</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/01/emoncms-theme/">Emoncms Blue Theme</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/01/emonpi-remote-access/">emonPi Remote Access with Dataplicity</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/10/iotawatt/">Introducing IoTaWatt</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/08/cydynni-energylocal/">CydYnni – Energy Local, community hydro smart grid</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/08/advances-article/">Advances Wales Magazine Article</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/06/emoncms-android-app-v2/">Emoncms Android App V2</a>
        </li>
      
    
  </ul>
</section>
  
  
     <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided" id="ub202">
    
    
      <li>
        <a href="/categories/air-quality-egg/">air quality egg
        </a>
      </li>
    
      <li>
        <a href="/categories/antenna/">antenna
        </a>
      </li>
    
      <li>
        <a href="/categories/building-energy-modelling/">building energy modelling
        </a>
      </li>
    
      <li>
        <a href="/categories/china/">china
        </a>
      </li>
    
      <li>
        <a href="/categories/christmas/">christmas
        </a>
      </li>
    
      <li>
        <a href="/categories/dc/">dc
        </a>
      </li>
    
      <li>
        <a href="/categories/dc-current-sensing/">dc current sensing
        </a>
      </li>
    
      <li>
        <a href="/categories/esp8266/">esp8266
        </a>
      </li>
    
      <li>
        <a href="/categories/htu21d/">htu21d
        </a>
      </li>
    
      <li>
        <a href="/categories/heat-pump/">heat pump
        </a>
      </li>
    
      <li>
        <a href="/categories/kaizen/">kaizen
        </a>
      </li>
    
      <li>
        <a href="/categories/kicad/">kicad
        </a>
      </li>
    
      <li>
        <a href="/categories/mqtt/">mqtt
        </a>
      </li>
    
      <li>
        <a href="/categories/nanoderf/">nanoderf
        </a>
      </li>
    
      <li>
        <a href="/categories/nodered/">nodered
        </a>
      </li>
    
      <li>
        <a href="/categories/oem-labs/">oem labs
        </a>
      </li>
    
      <li>
        <a href="/categories/okg/">okg
        </a>
      </li>
    
      <li>
        <a href="/categories/oscilloscope/">oscilloscope
        </a>
      </li>
    
      <li>
        <a href="/categories/rfm12/">rfm12
        </a>
      </li>
    
      <li>
        <a href="/categories/rfm69/">rfm69
        </a>
      </li>
    
      <li>
        <a href="/categories/rs485/">rs485
        </a>
      </li>
    
      <li>
        <a href="/categories/sap-2012/">sap 2012
        </a>
      </li>
    
      <li>
        <a href="/categories/shw/">shw
        </a>
      </li>
    
      <li>
        <a href="/categories/srf/">srf
        </a>
      </li>
    
      <li>
        <a href="/categories/tasker/">tasker
        </a>
      </li>
    
      <li>
        <a href="/categories/android/">android
        </a>
      </li>
    
      <li>
        <a href="/categories/app/">app
        </a>
      </li>
    
      <li>
        <a href="/categories/application/">application
        </a>
      </li>
    
      <li>
        <a href="/categories/arduino/">arduino
        </a>
      </li>
    
      <li>
        <a href="/categories/award/">award
        </a>
      </li>
    
      <li>
        <a href="/categories/backup/">backup
        </a>
      </li>
    
      <li>
        <a href="/categories/batteries/">batteries
        </a>
      </li>
    
      <li>
        <a href="/categories/benchmarking/">benchmarking
        </a>
      </li>
    
      <li>
        <a href="/categories/build-sesh/">build sesh
        </a>
      </li>
    
      <li>
        <a href="/categories/business/">business
        </a>
      </li>
    
      <li>
        <a href="/categories/ciseco/">ciseco
        </a>
      </li>
    
      <li>
        <a href="/categories/community-energy/">community energy
        </a>
      </li>
    
      <li>
        <a href="/categories/community-smart-grid/">community smart grid
        </a>
      </li>
    
      <li>
        <a href="/categories/continuous-testing/">continuous testing
        </a>
      </li>
    
      <li>
        <a href="/categories/control/">control
        </a>
      </li>
    
      <li>
        <a href="/categories/current-sensor/">current sensor
        </a>
      </li>
    
      <li>
        <a href="/categories/current-transformer/">current transformer
        </a>
      </li>
    
      <li>
        <a href="/categories/dashboard/">dashboard
        </a>
      </li>
    
      <li>
        <a href="/categories/development/">development
        </a>
      </li>
    
      <li>
        <a href="/categories/display/">display
        </a>
      </li>
    
      <li>
        <a href="/categories/diy-drones/">diy drones
        </a>
      </li>
    
      <li>
        <a href="/categories/docker/">docker
        </a>
      </li>
    
      <li>
        <a href="/categories/documentation/">documentation
        </a>
      </li>
    
      <li>
        <a href="/categories/ecohomelab/">ecohomelab
        </a>
      </li>
    
      <li>
        <a href="/categories/efergy/">efergy
        </a>
      </li>
    
      <li>
        <a href="/categories/electronics/">electronics
        </a>
      </li>
    
      <li>
        <a href="/categories/elektrocamp/">elektrocamp
        </a>
      </li>
    
      <li>
        <a href="/categories/email-notifications/">email notifications
        </a>
      </li>
    
      <li>
        <a href="/categories/embodied-energy/">embodied energy
        </a>
      </li>
    
      <li>
        <a href="/categories/emonbase/">emonbase
        </a>
      </li>
    
      <li>
        <a href="/categories/emoncms/">emoncms
        </a>
      </li>
    
      <li>
        <a href="/categories/emonctrl/">emonctrl
        </a>
      </li>
    
      <li>
        <a href="/categories/emondc/">emondc
        </a>
      </li>
    
      <li>
        <a href="/categories/emonglcd/">emonglcd
        </a>
      </li>
    
      <li>
        <a href="/categories/emonsd/">emonsd
        </a>
      </li>
    
      <li>
        <a href="/categories/emonth/">emonth
        </a>
      </li>
    
      <li>
        <a href="/categories/emontx/">emontx
        </a>
      </li>
    
      <li>
        <a href="/categories/emontx-v2/">emontx v2
        </a>
      </li>
    
      <li>
        <a href="/categories/emontxsmt/">emontxsmt
        </a>
      </li>
    
      <li>
        <a href="/categories/emontxshield/">emontxshield
        </a>
      </li>
    
      <li>
        <a href="/categories/emoncms/">emoncms
        </a>
      </li>
    
      <li>
        <a href="/categories/emonesp/">emonesp
        </a>
      </li>
    
      <li>
        <a href="/categories/emonpi/">emonpi
        </a>
      </li>
    
      <li>
        <a href="/categories/emontx/">emontx
        </a>
      </li>
    
      <li>
        <a href="/categories/end-to-end/">end to end
        </a>
      </li>
    
      <li>
        <a href="/categories/energy-monitor/">energy monitor
        </a>
      </li>
    
      <li>
        <a href="/categories/energy-monitoring/">energy monitoring
        </a>
      </li>
    
      <li>
        <a href="/categories/esp8266/">esp8266
        </a>
      </li>
    
      <li>
        <a href="/categories/ev/">ev
        </a>
      </li>
    
      <li>
        <a href="/categories/feed-storage/">feed storage
        </a>
      </li>
    
      <li>
        <a href="/categories/firmware/">firmware
        </a>
      </li>
    
      <li>
        <a href="/categories/forum/">forum
        </a>
      </li>
    
      <li>
        <a href="/categories/github/">github
        </a>
      </li>
    
      <li>
        <a href="/categories/graphing/">graphing
        </a>
      </li>
    
      <li>
        <a href="/categories/hackathon/">hackathon
        </a>
      </li>
    
      <li>
        <a href="/categories/hall-effect/">hall effect
        </a>
      </li>
    
      <li>
        <a href="/categories/hardware/">hardware
        </a>
      </li>
    
      <li>
        <a href="/categories/heating/">heating
        </a>
      </li>
    
      <li>
        <a href="/categories/heatpumpmonitor/">heatpumpmonitor
        </a>
      </li>
    
      <li>
        <a href="/categories/home-assistant/">home assistant
        </a>
      </li>
    
      <li>
        <a href="/categories/home-camp/">home camp
        </a>
      </li>
    
      <li>
        <a href="/categories/humidity/">humidity
        </a>
      </li>
    
      <li>
        <a href="/categories/integrations/">integrations
        </a>
      </li>
    
      <li>
        <a href="/categories/interface/">interface
        </a>
      </li>
    
      <li>
        <a href="/categories/interview/">interview
        </a>
      </li>
    
      <li>
        <a href="/categories/iotawatt/">iotawatt
        </a>
      </li>
    
      <li>
        <a href="/categories/java/">java
        </a>
      </li>
    
      <li>
        <a href="/categories/job/">job
        </a>
      </li>
    
      <li>
        <a href="/categories/kickstarter/">kickstarter
        </a>
      </li>
    
      <li>
        <a href="/categories/lightwaverf/">lightwaverf
        </a>
      </li>
    
      <li>
        <a href="/categories/linux/">linux
        </a>
      </li>
    
      <li>
        <a href="/categories/logo/">logo
        </a>
      </li>
    
      <li>
        <a href="/categories/manufacturing/">manufacturing
        </a>
      </li>
    
      <li>
        <a href="/categories/measurement/">measurement
        </a>
      </li>
    
      <li>
        <a href="/categories/media/">media
        </a>
      </li>
    
      <li>
        <a href="/categories/mobile/">mobile
        </a>
      </li>
    
      <li>
        <a href="/categories/mobile-app/">mobile app
        </a>
      </li>
    
      <li>
        <a href="/categories/modbus/">modbus
        </a>
      </li>
    
      <li>
        <a href="/categories/nanode/">nanode
        </a>
      </li>
    
      <li>
        <a href="/categories/ook/">ook
        </a>
      </li>
    
      <li>
        <a href="/categories/open-source/">open source
        </a>
      </li>
    
      <li>
        <a href="/categories/openhab/">openhab
        </a>
      </li>
    
      <li>
        <a href="/categories/openenergymonitor/">openenergymonitor
        </a>
      </li>
    
      <li>
        <a href="/categories/openevse/">openevse
        </a>
      </li>
    
      <li>
        <a href="/categories/optical-pulse/">optical pulse
        </a>
      </li>
    
      <li>
        <a href="/categories/pcb/">pcb
        </a>
      </li>
    
      <li>
        <a href="/categories/pebble/">pebble
        </a>
      </li>
    
      <li>
        <a href="/categories/placement/">placement
        </a>
      </li>
    
      <li>
        <a href="/categories/platformio/">platformio
        </a>
      </li>
    
      <li>
        <a href="/categories/pluse/">pluse
        </a>
      </li>
    
      <li>
        <a href="/categories/presentation/">presentation
        </a>
      </li>
    
      <li>
        <a href="/categories/raspberry-pi/">raspberry pi
        </a>
      </li>
    
      <li>
        <a href="/categories/raspberry-pi/">raspberry pi
        </a>
      </li>
    
      <li>
        <a href="/categories/renewable/">renewable
        </a>
      </li>
    
      <li>
        <a href="/categories/serial/">serial
        </a>
      </li>
    
      <li>
        <a href="/categories/shop/">shop
        </a>
      </li>
    
      <li>
        <a href="/categories/showcase/">showcase
        </a>
      </li>
    
      <li>
        <a href="/categories/smartwatch/">smartwatch
        </a>
      </li>
    
      <li>
        <a href="/categories/social-energy-monitoring/">social energy monitoring
        </a>
      </li>
    
      <li>
        <a href="/categories/solarpv/">solarpv
        </a>
      </li>
    
      <li>
        <a href="/categories/sparkfun/">sparkfun
        </a>
      </li>
    
      <li>
        <a href="/categories/sustainability/">sustainability
        </a>
      </li>
    
      <li>
        <a href="/categories/temperature/">temperature
        </a>
      </li>
    
      <li>
        <a href="/categories/three-phase/">three phase
        </a>
      </li>
    
      <li>
        <a href="/categories/travisci/">travisci
        </a>
      </li>
    
      <li>
        <a href="/categories/tutorials/">tutorials
        </a>
      </li>
    
      <li>
        <a href="/categories/upgrade/">upgrade
        </a>
      </li>
    
      <li>
        <a href="/categories/user-guide/">user guide
        </a>
      </li>
    
      <li>
        <a href="/categories/utility-meters/">utility meters
        </a>
      </li>
    
      <li>
        <a href="/categories/voltage-sensing/">voltage sensing
        </a>
      </li>
    
      <li>
        <a href="/categories/vrms/">vrms
        </a>
      </li>
    
      <li>
        <a href="/categories/website/">website
        </a>
      </li>
    
      <li>
        <a href="/categories/wifipixel/">wifipixel
        </a>
      </li>
    
      <li>
        <a href="/categories/wind/">wind
        </a>
      </li>
    
      <li>
        <a href="/categories/wind-turbine/">wind turbine
        </a>
      </li>
    
      <li>
        <a href="/categories/wireless/">wireless
        </a>
      </li>
    
      <li>
        <a href="/categories/workshop/">workshop
        </a>
      </li>
    
      <li>
        <a href="/categories/zerocarbonbritain/">zerocarbonbritain
        </a>
      </li>
    
  </ul>
</section>
  
</div>
    </aside>
    
  </div>
</div>

<footer>
  <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">

  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor/guide'><i class="icon-github"></i></a>
  <a rel="me" href='https://blog.openenergymonitor.org/feed.xml'><i class="icon-rss"></i></a>

  <div class="credit" style="text-align:center;">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and <a href='https://github.com/coogie/oscailte'>Oscalite</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
<!--
<div class="searchtool">


<form action="https://encrypted.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.openenergymonitor.org" />
    <input class="search" id="search" type="text" name="q" results="0" placeholder="Search..." />
  </fieldset>
</form>


</div> -->
</div>
    </div>
  </div>
</div>
</footer>

<!--[if lt IE 7]>
  <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

</body>
</html>
