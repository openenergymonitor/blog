<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="/posts/17/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Blog | OpenEnergyMonitor">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="/posts/17/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Blog | OpenEnergyMonitor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />



    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:light,bold&amp;subset=Latin" rel="stylesheet"> <!-- Ubuntu font -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  </head>

<style>

@font-face {
  font-family: "oemFont";
  src: url(/font/Ubuntu-OEM-Light.ttf)
}

html, body {
  margin: 0; height: 100vh;
}

html {
  min-height: 100vh;
}

html, body {
  word-wrap: break-word;
  font-family: "oemFont", sans-serif;
}

a:visited, .a:hover, a:focus, a {
  color: #44b3e2;
}

.meta.clearfix {
  overflow-x: hidden;
}

.communityWrapper {
  position: relative;
  box-sizing: border-box;
  margin: 0 auto;
  width: 100%;
  height: 42px;
}

@media (min-width: 1080px) {
  .communityWrapper {
  width: 1080px;
  }
}

@media screen and (max-width: 400px) {
  .oemWrap {
  display: none;
  }
}

.fa-navicon {
  display: none;
  cursor: pointer;
  font-size: 30px;
  line-height: 42px;
  position: absolute;
  left: 0;
  color: #ffffff;
  padding-left: 12px;
  z-index: 9997;
}

@media screen and (max-width: 1079px) {
  .fa-navicon {
  display: inline-block;
  }
}

.titleHolder {
  position: relative;
  top: 0;
  width: 100%;
  height: 42px;
  background-color: #44b3e2;
  overflow: hidden;
  -webkit-box-shadow: 0 -2px 4px 2px #000;
  -moz-box-shadow: 0 -2px 4px 2px #000;
  box-shadow: 0 -2px 4px 2px #000;
}

.titleIcon {
  position: absolute;
  height: 42px;
  padding: 0 0 0 7px;
  text-align: center;
  line-height: 42px;
  color: #ffffff;
  vertical-align: top;
}

  .titleIcon i {
    vertical-align: middle;
    font-size: 32px;
    line-height: 42px;
  }

.thisTitle {
  position: absolute;
  box-sizing: border-box;
  left: 42px;
  right: 0;
  height: 42px;
  padding: 5px 0 5px 0;
  text-align: left;
  color: #ffffff;
  line-height: normal;
  vertical-align: top;
}

  .thisTitle a {
    position: absolute;
    top: 0;
    color: #ffffff;
  }

@media screen and (max-width: 1079px) {
  .titleIcon {
    left: auto;
    right: 0;
    padding: 0 7px 0 0;
  }

  .thisTitle {
    right: 42px;
    left: 0;
    text-align: right;
  }

    .thisTitle a {
      padding-right: 0;
    }
}

.thisTitle-top {
  top: 0;
  height: 60%;
  font-size: 18px;
}

.thisTitle-bottom {
  bottom: 0;
  height: 40%;
  font-size: 12px;
}

.navigation {
  position: absolute;
  display: inline-block;
  top: 0;
  right: 0;
  margin-right: 6px;
  height: 42px;
  min-width: 774px;
  overflow: visible;
  padding-right: 7px;
  z-index: 20;
  box-sizing: content-box;
}

@media screen and (min-width: 1080px) {
  .navigation {
  position: relative;
  float: right;
  display: inline-block;
  margin: 0;
  }
}

.navigation ul {
  list-style-type: none;
  float: right;
  top: 0;
  margin: 0;
  padding: 0;
  height: 100%;
  display: block;
}

.navigation ul li {
  float: left;
  background-color: #44b3e2;
}

.navigation ul li a {
  display: block;
  line-height: 42px;
  font-family: "oemFont", sans-serif;
  font-size: 16px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
  color: #ffffff;
}

.menuFreeze {
  height: 100%;
  overflow: hidden;
}

/* Navigation on smaller screens... */

@media screen and (max-width: 1079px) {
.navigation {
  position: fixed;
  display: none;
  top: 0;
  left: 0;
  height: 100vh;
  margin: 0;
  width: 0;
  font-size: 20px;
  background-color: #44b3e2;
  color: #ffffff;
  box-sizing: border-box;
  overflow: auto;
  min-width: 0;
  padding-right: 0;
  z-index: 99999999;
}

  .navigation ul {
    list-style-type: none;
    margin: 0;
    padding-top: 0;
  }

  .navigation ul li a {
    box-sizing: border-box;
    font-family: "oemFont", sans-serif;
    font-size: 20px;
    display: block;
    color: #ffffff;
    padding: 0 20px 0 20px;
    height: 12.5vh;
    line-height: 12.5vh;
    min-width: 180px;
    text-align: left;
  }

  .navigation ul li .fa {
    min-width: 25px;
  }
}

@media (max-width: 1079px) and (min-height: 550px) {
  .navigation ul li a {
    height: 68.75px;
    line-height: 68.75px;
  }
}

@media (max-width: 1079px) and (max-height: 200px) {
  .navigation ul li a {
    height: 25px;
    line-height: 25px;
  }
}

@media screen and (min-width: 1080px) {
  .navigation ul li:nth-child(1) {
    width: 88px;
  }
  .navigation ul li:nth-child(2) {
    width: 86px;
  }
  .navigation ul li:nth-child(3) {
    width: 92px;
  }
  .navigation ul li:nth-child(4) {
    width: 123px;
  }
  .navigation ul li:nth-child(5) {
    width: 133px;
  }
  .navigation ul li:nth-child(6) {
    width: 76px;
  }
  .navigation ul li:nth-child(7) {
    width: 80px;
  }
  .navigation ul li:nth-child(8) {
    width: 96px;
  }
}

.blackOut {
  position: fixed;
  display: none;
  top: 0;
  right: 0;
  height: 100vh;
  width: 100%;
  background-color: rgba(0,0,0,0.5);
  overflow: hidden;
  cursor: pointer;
  z-index:9998;
}

.actoemLink {
  background-color: #368fb4 !important;
}

.actoemLink a {
  color: #ffffff !important;
}

.searchBox {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgba(0,0,0,0.8);
  color: #fff;
  display: none;
  cursor: pointer;
  z-index: 9999999999999;
}

.searchBox form {
  margin: auto;
}

.searchBox input[type=submit] {
  cursor: pointer;
  padding: 10px;
  font-size: 20px;
  font-weight: bold;
  background-color: #44b3e2;
  color: #fff;
  border: none;
  -webkit-transition: background-color 500ms linear;
  -ms-transition: background-color 500ms linear;
  transition: background-color 500ms linear;
}

.searchBox input[type=submit]:hover {
  background-color: #77c8ea;
}

.searchBox input[type=text] {
  padding: 10px;
  font-size: 20px;
  border: none;
}

.searchText {
  width: 0;
}

.searchIcon {
  cursor: pointer;
}

.fa {
  text-shadow: 2px 2px 2px rgba(150, 150, 150, 0.5);
}

</style>

<body >




<div class="titleHolder">
  <div class="communityWrapper">
    <i class="fa fa-navicon"></i>
    <a href="/">
      <div class="titleIcon">
				<i aria-hidden="true" class="fa fa-bullhorn"></i>
			</div>
			<div class="thisTitle">
			  <div class="thisTitle-top">
        		<b>Blog</b>
				</div>
				<div class="thisTitle-bottom">
          Open<b>EnergyMonitor</b>
				</div>
			</div>
		</a>
    <div id="siteLinks" class="navigation">
      <ul>
        <li title="the homepage of OpenEnergyMonitor">
          <a href="https://openenergymonitor.org">
            <i class="fa fa-home" aria-hidden="true"></i><span class="navname">&nbsp;Home</span>
          </a>
        </li>
        <li title="a user guide for the OpenEnergyMonitor system">
          <a href="https://guide.openenergymonitor.org">
            <i class="fa fa-book" aria-hidden="true"></i><span class="navname">&nbsp;Guide</span>
          </a>
        </li>
        <li title="general information about energy monitoring, diversion and sustainability">
          <a href="https://learn.openenergymonitor.org">
            <i class="fa fa-mortar-board" aria-hidden="true"></i><span class="navname">&nbsp;Learn</span>
          </a>
        </li>
        <li title="a definitive list of resources for OpenEnergyMonitor hardware">
          <a href="https://guide.openenergymonitor.org/technical/resources/">
            <i class="fa fa-list-alt" aria-hidden="true"></i><span class="navname">&nbsp;Resources</span>
          </a>
        </li>
        <li title="the openenergymonitor forum">
          <a href="https://community.openenergymonitor.org">
            <i class="fa fa-comments" aria-hidden="true"></i><span class="navname">&nbsp;Community</span>
          </a>
        </li>
        <li title="you are here: keep up with new developments at OpenEnergyMonitor" class="actoemLink">
          <a href="https://blog.openenergymonitor.org">
            <i class="fa fa-bullhorn" aria-hidden="true"></i><span class="navname">&nbsp;Blog</span>
          </a>
        </li>
        <li title="the official OpenEnergyMonitor online store">
          <a href="https://shop.openenergymonitor.com">
            <i class="fa fa-shopping-cart" aria-hidden="true"></i><span class="navname">&nbsp;Shop</span>
          </a>
        </li>
				<li title="search for something on OpenEnergyMonitor">
					<a class="searchIcon">
					    <i aria-hidden="true" class="fa fa-search"></i><span class="navname">&nbsp;Search</span>
				  </a>
				</li>
      </ul>
    </div>
  </div>
</div>
<div class="searchBox">
  <form target="_blank" id="searchform" action="https://www.google.com/cse">
    <div>
      <input type="hidden" name="cx" value="006198118389747886812:_nmxikw563w" />
      <input type="hidden" name="ie" value="UTF-8" />
      <input type="text" class="searchText" value="" name="q" id="q" autocomplete="off" />
      <input type="submit" id="searchsubmit" name="sa" value="Search" />
    </div>
  </form>
</div>
<div class="blackOut"></div>
<div style="position:relative;width:100%;top:0;height:20px"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script defer src="/javascripts/octopress.js"></script>

<script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

<script>

var closeStatus = false;

function openButton() {
  $("html, body").addClass("menuFreeze");
  $(".blackOut").show();
  $(".navigation").show();
  $(".navigation").animate({ width:'180' },"0.5s");
}

$(".fa-navicon").click(function() {
  openButton();
  closeStatus = true;
});

function closeButton() {
  $("html, body").removeClass("menuFreeze");
  $(".blackOut").hide();
  $(".navigation").animate({ width:'0' },"0.5s");
}

$(".blackOut").click(function() {
  closeButton();
  closeStatus = false;
});

$(document).ready(function(){
  $("table").wrap("<div style='max-width:100%;overflow-x:auto'></div>");
});

$(window).resize(function(){
  if ($(window).width() > 1079 && closeStatus == true) {
    if (!$("html").hasClass("mobile-device")) {
      closeButton();
      closeStatus = false;
    }
  }
});

$(".searchIcon").click(function() {
   $(".searchBox").css("display","flex");
   $(".searchText").animate({width: "200px"});
   $(".searchText").focus();
   $("html, body").addClass("menuFreeze");
});
$(".searchBox").click(function() {
   $(".searchBox").css("display","none");
   $(".searchText").blur();
   $(".searchText").css("width","0");
   closeButton();
});
$(".searchBox form").click( function(event) {
   event.stopPropagation();
});

$(document).ready(function(){ //alphabetically order list
  var ls, x, switchState, z, switchMe;
  ls = document.getElementById("ub202");
  switchState = true;
  while (switchState) {
    switchState = false;
    z = ls.getElementsByTagName("LI");
    for (x = 0; x < (z.length - 1); x++) {
      switchMe = false;
      if (z[x].innerHTML.toLowerCase() > z[x + 1].innerHTML.toLowerCase()) {
        switchMe= true;
        break;
      }
    }
    if (switchMe) {
      z[x].parentNode.insertBefore(z[x + 1], z[x]);
      switchState = true;
    }
  }
});

</script>

<div class="grid-wrapper">
  <div class="grid grid-center">
    
    <div class="grid__item two-thirds lap-one-whole palm-one-whole">
    

        
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/07/emoncms-powered-by-timestore/">Emoncms powered by timestore</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-07-22T15:29:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-07-22 15:29:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>emoncms</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/07/emoncms-powered-by-timestore/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <span style="font-size: small;">I've been making some good progress with a timestore powered version of emoncms, its available on github here:&nbsp;</span><a href="https://github.com/emoncms/emoncms/tree/timestore">https://github.com/emoncms/emoncms/tree/timestore</a>. The basics now work, its not ready for stable switchover, but if your interested in experimenting, its good to go for trying out. There are instructions for installation in the github repo readme.<br /><br />To recap: timestore is time-series database designed specifically for time-series data developed by Mike Stirling.<br /><div><br /></div><div><a href="https://github.com/emoncms/emoncms/blob/timestore/mikestirling.co.uk/redmine/projects/timestore">mikestirling.co.uk/redmine/projects/timestore</a><br /><br />Benefits include:</div><div><br /><b>Faster Query speeds</b></div><div>With timestore feed data query requests are about 10x faster (2700ms using mysql vs 210ms using timestore). The initial benchmarks I mentioned in previous blog posts show timestore request time to be around 45ms so I still need to investigate the slightly slower performance which may be on the emoncms end rather than timestore.<br /><br /><b>Reduced Disk use</b></div><div>Disk use is much smaller, A test feed stored in an indexed mysql table used 170mb, stored using timestore which does not need an index and is based on a fixed time interval the same feed used 42mb of disk space.<br /><br /><b>In-built averaging</b></div><div>Timestore also has an additional benefit of using averaged layers which ensures that requested data is representative of the window of time each datapoint covers.<br /><br /><br /><div style="margin-bottom: 0cm;"><span style="font-size: small;">Due to the integration of averaging in timestore there are significant implications for input processing and visualisations. Rather than compute kwh/d data from power data in an emoncms input process this can now be moved to timestore by querying timestore for average power in a day and converting this value to kwh/d by multiplying the average power by 0.024.</span></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><span style="font-size: small;">This means we no longer have two feeds one for kwh/d data and another for power data which changes the way many of the visualisations need to work. Visualisations such as simple zoomer need to query the same feed at different average levels.</span></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><span style="font-size: small;">To fully integrate timestore in emoncms and reach a similar level of input process and visualisation options is a big task. To simplify things, the current release has cut down functionality with only a few input processes and visualisations.</span></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">To create feeds with a fixed datapoint interval I added an interval selector to the input processing configure input page:</div><div style="margin-bottom: 0cm;"><span style="font-size: small;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-8VArGMQWjog/Ue1HEs96egI/AAAAAAAACuc/32XQ8amhR9E/s1600/timestore_inputproc.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="203" src="http://2.bp.blogspot.com/-8VArGMQWjog/Ue1HEs96egI/AAAAAAAACuc/32XQ8amhR9E/s640/timestore_inputproc.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: left;">The data point interval is displayed as a field in feeds page:</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-phDBIAYLJ2Y/Ue1HH18aSBI/AAAAAAAACuk/1Qjjuh8R5Og/s1600/timestore.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="444" src="http://3.bp.blogspot.com/-phDBIAYLJ2Y/Ue1HH18aSBI/AAAAAAAACuk/1Qjjuh8R5Og/s640/timestore.png" width="640" /></a></div><br /><div class="separator" style="clear: both; text-align: left;">Example of timestore working displaying solar production here over the last few hours:</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-AK5in_foEVw/Ue1HLN4OH6I/AAAAAAAACus/s5SwzOhkVC0/s1600/rawdata_timestore.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="342" src="http://2.bp.blogspot.com/-AK5in_foEVw/Ue1HLN4OH6I/AAAAAAAACus/s5SwzOhkVC0/s640/rawdata_timestore.png" width="640" /></a></div><div style="margin-bottom: 0cm;">Try it out following the instructions here for installation on a raspberrypi:</div><div style="margin-bottom: 0cm;"><a href="https://github.com/emoncms/emoncms/tree/timestore">https://github.com/emoncms/emoncms/tree/timestore</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">Next I intend to test the histogram datatype, ensure that works ok. The input processors for plus, minus, divide and multiply by another input also need looking at and then the more complex kwhd to power feed type zoomer visualisations. If a timestore version of emoncms is useful for you and your interested in helping to get it working well, I would be glad to have your help.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">Blog posts on emoncms data storage for further context:<br /><a href="http://openenergymonitor.blogspot.co.uk/2013/06/timestore-timeseries-database.html">http://openenergymonitor.blogspot.co.uk/2013/06/timestore-timeseries-database.html</a><br /><a href="http://openenergymonitor.blogspot.co.uk/2013/06/rethinking-data-input-and-storage-core.html">http://openenergymonitor.blogspot.co.uk/2013/06/rethinking-data-input-and-storage-core.html</a><br /><a href="http://openenergymonitor.blogspot.co.uk/2013/07/more-direct-file-storage-research.html">http://openenergymonitor.blogspot.co.uk/2013/07/more-direct-file-storage-research.html</a></div></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/07/great-emoncms-dashboards-by-paul-reed/">Great emoncms dashboards by Paul Reed, Jürgen and Tom + update on backup</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-07-11T12:37:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-07-11 12:37:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>showcase</li>
      
        <li>emoncms</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/07/great-emoncms-dashboards-by-paul-reed/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">There's a new forum on the forums for showcasing emoncms dashboard creations (thanks to Paul Reed for the idea), here are a few screenshots of dashboards created by Paul Reed and Jürgen:</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-VIuksQPiqw4/Ud6jqIReJ6I/AAAAAAAACt4/YUk1vej4ZY0/s1600/Emoncms2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="612" src="http://3.bp.blogspot.com/-VIuksQPiqw4/Ud6jqIReJ6I/AAAAAAAACt4/YUk1vej4ZY0/s640/Emoncms2.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: left;">I really like the additions of the icons, you can do this by inserting html in the text widget.</div><div style="text-align: left;">Forum post by Paul Reed:&nbsp;<a href="http://openenergymonitor.org/emon/node/2527">http://openenergymonitor.org/emon/node/2527</a></div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-q73QoWwXxcM/Ud6j_eIPhzI/AAAAAAAACuA/_1Qqaue1VsQ/s1600/jurgen_dashboard.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="427" src="http://4.bp.blogspot.com/-q73QoWwXxcM/Ud6j_eIPhzI/AAAAAAAACuA/_1Qqaue1VsQ/s640/jurgen_dashboard.png" width="640" /></a></div><div style="text-align: center;"><br /></div><div style="text-align: left;">Some really nice looking multigraph data, forum post by Jürgen:&nbsp;<a href="http://openenergymonitor.org/emon/node/2557">http://openenergymonitor.org/emon/node/2557</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;">Feel free to share your dashboard screenshots or links on the emoncms showcase forum:</div><div style="text-align: left;"><a href="http://openenergymonitor.org/emon/forum/7">http://openenergymonitor.org/emon/forum/7</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><b>Emoncms backup</b></div><div style="text-align: left;">A couple of additions to the script linked to in the last blog post:&nbsp;<a href="http://openenergymonitor.blogspot.com/2013/07/a-new-backup-system-for-emoncmsorg.html">http://openenergymonitor.blogspot.com/2013/07/a-new-backup-system-for-emoncmsorg.html</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;">Completes file backup correctly and better verbose output:</div><div style="text-align: left;"><a href="https://github.com/emoncms/usefulscripts/blob/master/backup_method2.php">https://github.com/emoncms/usefulscripts/blob/master/backup_method2.php</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;">To run the backup script from a service, there's a service script available here:</div><div style="text-align: left;"><a href="https://github.com/emoncms/usefulscripts/blob/master/emonbackup">https://github.com/emoncms/usefulscripts/blob/master/emonbackup</a></div><div><br /></div><b>To install the service script:</b><br /><span style="font-family: Courier New, Courier, monospace;">sudo cp /home/username/backup/emonbackup /etc/init.d/&nbsp;</span><br /><div><span style="font-family: Courier New, Courier, monospace;">sudo chmod 755 /etc/init.d/emonbackup&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">sudo update-rc.d emonbackup defaults</span></div><div><br /></div><div><b>Start the service:</b><br /><span style="font-family: Courier New, Courier, monospace;">sudo /etc/init.d/emonbackup start log</span></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/07/a-new-backup-system-for-emoncmsorg/">A new backup system for emoncms.org</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-07-09T22:42:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-07-09 22:42:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>backup</li>
      
        <li>emoncms</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/07/a-new-backup-system-for-emoncmsorg/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    The current emoncms.org backup system works by using two&nbsp;separate&nbsp;servers with data being synced from the main one to the second backup server using the same implementation used in the emoncms sync module&nbsp;<a href="http://openenergymonitor.blogspot.co.uk/2013/05/emoncmsorg-backup.html">http://openenergymonitor.blogspot.co.uk/2013/05/emoncmsorg-backup.html</a><br /><div><br /></div><div>A couple of weeks after getting all that setup BigV announced a new feature: archive storage which they say is ideal for backups. Archive storage works in much the same way as connecting a second external drive to a computer. Archive storage on bigv is guaranteed to be on a separate storage pool from the main vm disc which is good news as it&nbsp;wasn't&nbsp;guaranteed that the two&nbsp;separate&nbsp;server method used seperate storage pools (If I understand correctly)</div><div><a href="http://blog.bytemark.co.uk/2013/06/13/archive-storage-and-web-based-vm-manager-launched">http://blog.bytemark.co.uk/2013/06/13/archive-storage-and-web-based-vm-manager-launched</a></div><div><br /></div><div>Another advantage to the new archive storage is that its much cheaper to run, costing £2/month for 50GB rather than £16/month for another vm and 30GB extra space.</div><div><br /></div><div>A simple php script is used to perform the backup, it makes use of the direct file access stuff I recently learnt about (<a href="http://openenergymonitor.blogspot.co.uk/2013/07/more-direct-file-storage-research.html">http://openenergymonitor.blogspot.co.uk/2013/07/more-direct-file-storage-research.html</a>)&nbsp;to do incremental backup file copy using php file access commands making it potentially very fast, it can backup files at full file copy speeds:</div><div><a href="https://github.com/emoncms/usefulscripts/blob/master/backup_method2.php">https://github.com/emoncms/usefulscripts/blob/master/backup_method2.php</a></div><div><br /></div><div>It accesses the mysql data directly, copying the content of the mysql feed data file i.e: &nbsp;/var/lib/mysql/emoncms/feed_1.MYD to the backup drive.</div><div><br /></div><div>On another slightly related note the data in&nbsp;feed_1.MYD is stored simply as:</div><div><br /></div><div>1 byte for null flag</div><div>4 bytes for the timestamp</div><div>4 bytes for the float data value<br />repeated...</div><div><br /></div><div>and because the readings are inserted one after the other in ascending time we can actually use the mysql feed data files directly with the direct file get_feed_data method to get 10-20x query speed improvement for generating visualisations: <a href="https://github.com/emoncms/experimental/blob/master/storage/directfiles/get_feed_data.php">https://github.com/emoncms/experimental/blob/master/storage/directfiles/get_feed_data.php</a></div><div><br /></div><div>We could even get rid of the mysql feed table index's to save disk space although that will probably slow down mysql updates (I need to look into it). This could be a short term measure before a full timestore emoncms implementation is complete which provides many other benefits.</div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/07/probably-best-student-placement/">Probably the best student placement opportunity ever!? developing an open energy management system at the Center for Alternative Technology </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-07-07T09:20:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-07-07 09:20:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> six minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>job</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/07/probably-best-student-placement/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    If your a student, looking for a student placement and interested in open source hardware and software, energy monitoring and sustainability this might be of real interest to you. The&nbsp;Center for Alternative Technology are offering an exciting student placement&nbsp;developing an open source energy control and management system for the CAT site,&nbsp;intended&nbsp;to&nbsp;ultimately&nbsp;replace two large proprietary&nbsp;Building Management/SCADA systems that will help them use the site more&nbsp;effectively&nbsp;as a&nbsp;living laboratory for sustainable energy systems.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_Yqa3j9ZhET8/TLGNK2g3KHI/AAAAAAAAB8Q/jy7qDe5Bcvk/s400/cat.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="112" src="http://2.bp.blogspot.com/_Yqa3j9ZhET8/TLGNK2g3KHI/AAAAAAAAB8Q/jy7qDe5Bcvk/s400/cat.jpg" width="400" /></a></div><br /><br />Here's the full project description from Adam Taylor at CAT:<br /><br />This placement will assist with the initial development and demonstration of a wireless open source energy management and monitoring system <br /><br /><b>Project description and person specification </b><br /><br /><b>Why? </b><br />At the centre we have two proprietary Building Management/SCADA systems that are used for monitoring and heating control; for historical reasons the two systems are not linked in anyway, leading to operational problems. Also as the site is effectively a living laboratory, constantly evolving in its use and layout, the proprietary nature of the systems lead to areas not being integrated or lead to expensive integrations. <br /><br />Because of the lack of complete site wide monitoring, our knowledge of energy usage is restricted to a site wide level, not the office level that would be useful. Also because of the various none linked systems, heating operation is down to a member of staff switching it on appropriately early to warm the room up, and remembering to switch it off after the room has been finished with. With a detailed understanding of how much energy is actually being used, in comparison with our site energy model, as well as being able to automate the operation of the heating, has the potential to save CAT significant amounts of carbon, time and money. <br /><br />Once the initial development and demonstration of the system Is complete, the project can then be opened up to the wider open source community, for further development. The demonstration system would also be expanded to cover the whole site, eventually replacing the two existing proprietary systems. <br /><br /><b>What? </b><br />Due to the proprietary and incomplete nature of the existing systems at CAT, a project was begun a few years ago with openenergymonitor.org developers to develop a system to gather data from our various electrical generators, and present it to the public visitors in a understandable way. This proposed project will build on the work of the open energy monitoring project, to develop an open energy management and monitoring system. <br /><br />The project would initially be looking into the feasibility, and best method of implementation of the proposed plan, to use known well developed technologies such as Arduino micro controllers and xBee wireless RF modules, as part of a meshed wireless energy management and monitoring system. <br /><br />The main part of the project would be to develop and install a relatively small demonstration of the system, but one that demonstrates all the fundamental requirements of the system. The fundamental requirements are to: <br /><ul><li>Monitor and record a variety of types of sensor readings; e.g. pulsed output anemometers, and variable resistance thermocouples&nbsp;</li><li>Operate external systems; e.g. boilers, pumps and radiators&nbsp;</li><li>Display recorded data in a useful manor to the general public; e.g. an electronic sign showing the performance of a solar thermal system&nbsp;</li><li>Be able to be&nbsp;programmed&nbsp;easily with new control strategies and room bookings&nbsp;</li><li>Be developed under open source principles&nbsp;</li><li>Be fully documented&nbsp;</li></ul><b>Who? </b><br /><br />The applicant should be someone with an interest in open source electronic development. The project requires someone with a rigorous and detailed approach to their work, who has an interest in working in the field of environmental monitoring. <br /><br />The applicant will be working within CAT’s Estates and Technical department, specifically alongside the Engineering team. The multi-discipline teams contain experienced qualified mechanical, electrical, control and heating Engineers, as well as a plumber, electrician and builder. Guidance and support will be provided throughout the project by the team, but a fair amount of previous experience with electronics and software development will be required. <br /><br />This is also an ideal opportunity for someone who wishes to learn, in a hands-on manner, about renewable energy generating technologies, eco building, mechanical or control engineering. As well as the energy management system project, the applicant will be helping out with the day to day duties of the teams, including fixing and maintaining the site buildings, heating, electrical supplies, control systems and displays. There will also be opportunities to be involved in any of the projects being undertaken by the teams during the placement. Projects either on-going, or due to start in the next twelve months include: <br /><ul><li>Specifying, installing and commissioning a new biomass boiler for the WISE building&nbsp;</li><li>Connecting the new WISE boiler, the new biomass training centre and site community cottages onto existing site heat main, including reconfiguration of SCADA control strategy to account for new loads and heat sources&nbsp;</li><li>Upgrading the two main hydro turbines on site&nbsp;</li><li>On-going maintenance and upgrade work to the site cliff railway&nbsp;</li></ul><b>S.M.A.R.T. Targets&nbsp;</b><br /><div><b><br />Specific </b>goal: <br />The goal of the project during the year placement is for the applicant to develop and demonstrate and document, a wireless open source energy management and monitoring system. This system can then be expanded in the future so that it can be used to monitor and reduce site energy usage. <br /><br /><b>Measurable</b> goals: <br />The system must be able to perform four basic requirements. All four basic requirements will be restricted to an individual node on the network for the demonstration, and therefore can be developed separately. The four basic requirements are to: <br /><ul><li>Monitor and record a variety of types of sensor readings; e.g. pulsed output anemometers, and variable resistance thermocouples&nbsp;</li><li>Operate external systems; e.g. boilers, pumps and radiators&nbsp;</li><li>Display recorded data in a useful manor to the general public; e.g. an electronic sign showing the performance of a solar thermal system&nbsp;</li><li>Be able to be&nbsp;programmed&nbsp;easily with new control strategies and room bookings&nbsp;</li></ul><b>Attainable</b> and <b>Realistic</b> goals: The project is a significant undertaking, but also one that is realistic and attainable. Within the Engineering team at CAT, exists all the skills and knowledge to undertake the project, all of which will be available to the applicant to help guide and steer when required. The project also has a real world end use as an objective, which will provide significant motivation to the applicant.<br /><br /><b>Timely</b> goals: <br />The placement is limited to a period of one year, which provides a fixed end point to the project.</div><div><br /><br /><b>How to apply &amp; Role description</b><br /><a href="http://content.cat.org.uk/index.php/vacancies?download=123%3Afunded-student-placement-building-energy-monitoring-system-developer-fixed-term">http://content.cat.org.uk/index.php/vacancies?download=123%3Afunded-student-placement-building-energy-monitoring-system-developer-fixed-term</a><br /><br />We've done a fair bit of work with the Center for Alternative Technology over the years, recently running a openenergymonitor course from there and in 2010-2011 working on a emoncms powered microgrid display and pulse counter/data logger for grid import/export.<br /><br />Microgrid display project at CAT <a href="http://openenergymonitor.blogspot.com/2010/10/energy-monitoring-at-center-for.html">[1] </a><a href="http://openenergymonitor.blogspot.com/2010/10/energy-monitoring-at-center-for_10.html">[2] </a><a href="http://openenergymonitor.blogspot.com/2010/10/energy-monitoring-at-cat-part-4.html">[3]</a><br /><a href="http://openenergymonitor.blogspot.co.uk/2013/04/pictures-from-openenergymonitor-cat.html">CAT OpenEnergyMonitor course</a><br /><br />We will be happy to support you, go through things that may be helpful both on hardware and software design, the openenergymonitor lab is based 30 miles north of CAT and we often go down to CAT and Machynlleth.<br /><br /><a href="http://www.cat.org.uk/">CAT</a> is one of Europe's leading sustainability center's, it is a <a href="http://gradschool.cat.org.uk/">university</a>, a <a href="http://www.cat.org.uk/visitus/vcindex2.tmpl?sku=VC_01">visitors center</a> a pulisher of <a href="http://publications.cat.org.uk/">books, reports</a>&nbsp;such as <a href="http://www.zerocarbonbritain.org/">zerocarbonbritain</a> and a place were practical solutions, sustainable technologies are tried out, tested and demonstrated.</div><div><br /></div><div><b>Application deadline is the 15th of July</b></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/07/more-direct-file-storage-research/">More direct file storage research</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-07-04T12:04:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-07-04 12:04:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>emoncms</li>
      
        <li>feed storage</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/07/more-direct-file-storage-research/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    I was surprised to find how easy it was to use flat file storage for feed data using PHP file access commands and how fast this approach could be.<br /><br />While reading up on indexes I realised that the timestamp column in a feed data table is its own index as it is naturally sorted in ascending order and each row (datapoint) should be unique. A data-point can then be searched for efficiently using binary search which I remember covering in A-level computing. The feed data in mysql had a binary tree index which If I understand correctly is similar but it is implemented using a separate index layer which uses quite a bit of extra disk space. <br /><br />I had a go at implementing the get_feed_data function used in emoncms to select a given number of datapoint's over a timewindow used for drawing graphs. An example of the standalone function can be found here: <br /><br /><a href="https://github.com/emoncms/experimental/blob/master/storage/directfiles/get_feed_data.php">https://github.com/emoncms/experimental/blob/master/storage/directfiles/get_feed_data.php</a> <br /><br />A development branch of emoncms that uses this flat file approach and includes this function can be found here (inserting data, input processing such as power to kwhd and visualisation all work, but its still quite conceptual) <br /><br /><a href="https://github.com/emoncms/emoncms/tree/flatfilestore">https://github.com/emoncms/emoncms/tree/flatfilestore</a> <br /><br />The get_feed_data function as implemented above takes roughly 120-230ms on a RaspberryPI to select 1000 datapoints over 1 to 300 days with a feed table with over 9 million rows. <br /><br />Thats much better than the 900-2700ms achieved at similar ranges with the <a href="http://openenergymonitor.blogspot.co.uk/2013/06/rethinking-data-input-and-storage-core.html">current mysql implementation</a>. <br /><br />The feed table in mysql used 178Mb of disk space. The same feed with no loss of data stored without an index and accessed as above takes up 67Mb so that's a considerable saving. Interestingly a 67Mb feed can be compressed to 18.5Mb with tar.gz compression. <br /><br />One of the issues with the above get_feed_data query is that it needs to know the data interval to do the get a datapoint every x number of datapoints approach. We could use binary search to find every datapoint but this would be slower although maybe worth trying to get a benchmark so that it can be compared. <br /><br />The other issue is that the datapoints selected may not be representative of the window they represent as they are just one random datapoint at a particular point in time. Which is the problem that the averaging approach used by <a href="http://mikestirling.co.uk/redmine/projects/timestore">Mike Stirling in Timestore </a>and by <a href="https://github.com/dovadi/emonWeb">Frank Oakner in EmonWeb</a> solves. <br /><br />Timestore is also a fair bit faster than the above get_feed_data function returning 1000 datapoints in 45ms. <br /><br />The advantage of the above approach is that it can fit into emoncms without having to change the current implementation too much, the feed data retains its timestamps, input processing is used in the same way. <br /><br />Not storing timestamps as timestore does could also be an advantage as it helps keep data quality high: fixed interval datapoints should be easier to use for comparison's,&nbsp;mathematical&nbsp;operations between feeds, it gives you higher certainty when querying the data, fetching data is faster and disk use is potentially half the size of the above approach if the values are stored as <a href="http://openenergymonitor.blogspot.com/2013/06/timestore-timeseries-database.html">4 byte floats as above rather than the default 8 byte double</a>. This coupled with averaged layers provides data that is representative at all time scales and datapoint number requests. <br /><br />My next step will therefore be to explore timestore further, first creating a script to export data from emoncms into timestore. The script needs to analyse the emoncms feed to work out the most common data interval. It needs to check for missing data, If a monitor went offline for an extended length of time it needs to give you the option to take this into account. It then needs to export and import into timestore as efficiently as possible.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/07/in-memory-storage-php-shared-memory-vs/">In memory storage: PHP shared memory vs Redis vs MYSQL</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-07-04T09:25:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-07-04 09:25:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>emoncms</li>
      
        <li>feed storage</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/07/in-memory-storage-php-shared-memory-vs/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Continuing on the theme of rethinking the data core of emoncms, as <a href="http://openenergymonitor.blogspot.co.uk/2013/06/rethinking-data-input-and-storage-core.html">previously mentioned</a> for short term storage, storage to disk may not be necessary, instead we can store data in memory using an in-memory database. Here are some tests and benchmarks for in memory storage:<br /><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">To start with I created baseline test using MYSQL updating a feed's last time and value in the feeds table row for that feed. This took around: 4800 – 5100 ms to update a row 10000 times.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><a href="https://github.com/emoncms/experimental/blob/master/storage/inmemory/baselinemysql.php">https://github.com/emoncms/experimental/blob/master/storage/inmemory/baselinemysql.php</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">We would imagine Redis doing a lot better as its in-memory, it&nbsp;isn't&nbsp;writing to disk each time which is much slower than memory access. Redis did indeed perform faster completing the same number of updates to a key-value pair in 1900 – 2350ms.&nbsp;I'm&nbsp;a little surprised thought that it was only 2.3x as fast and not much faster, but then there is a lot going on Redis has its own server which needs to be accessed from the PHP client this is going to slow things down a bit, I tested both the phpredis client and Predis. Phpredis was between 500-1000 ms faster than the Predis client and is written in c.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><a href="https://github.com/emoncms/experimental/blob/master/storage/inmemory/redis.php">https://github.com/emoncms/experimental/blob/master/storage/inmemory/redis.php</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">How fast can in-memory storage be? A general program variable is also a form of in-memory storage, a quick test suggests that it takes 21ms to write to a program variable 10000 times, much better than 2.3x faster&nbsp;that's&nbsp;230x faster! The problem with in program variables is that if they are written to in one script say an instance of input/post they cannot be accessed by another instance serving feed/list, we need some form of storage that can be accessed across different instances of scripts.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><a href="https://github.com/emoncms/experimental/blob/master/storage/inmemory/programvariable.php">https://github.com/emoncms/experimental/blob/master/storage/inmemory/programvariable.php</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">The difference between 21ms and 1900-2350ms for redis is intriguingly large and so I thought I would search for other ways of storing data in-memory that would allow access between different application scripts and instances.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">I came across the PHP shared memory functions which are similar to the flat file access but for memory, the results of a simple test are encouraging showing a write time of 48ms for 10000 updates. So from a performance perspective using php shared memory looks like a better way of doing things.  </div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><a href="https://github.com/emoncms/experimental/blob/master/storage/inmemory/sharedmemory.php">https://github.com/emoncms/experimental/blob/master/storage/inmemory/sharedmemory.php</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">The issue though is implementation, mysql made it really easy to search for the feed rows that you wanted (either by selecting by feed id or by feeds that belong to a user or feeds that are public), I'm a little unsure about how best to implement the similar functionality in redis but it looks like it may be possible by just storing each feed meta data roughly like this: feed_1: {"time":1300,"value":20}.  </div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">Shared memory though looks like it could be quite a bit more complicated to implement, but then it does appear to be much faster. Maybe the 2.3x speed improvement over mysql offered by redis is fast enough? and its probably much faster in high-concurrency&nbsp;situations. I think more testing and attempts at writing full implementations using each approach is needed before a definitive answer can be reached.</div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/06/load-stats-for-myisam-vs-innodb-for/">Load stat's for MYISAM vs INNODB for feed storage on the RaspberryPI</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-06-28T08:26:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-06-28 08:26:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>emoncms</li>
      
        <li>feed storage</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/06/load-stats-for-myisam-vs-innodb-for/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Here are some historic load stats for a raspberrypi running here, with 36 feeds being written to.<br /><div><br /></div><div>First using the INNODB storage engine:<br /><div class="separator" style="clear: both; text-align: center;"><span style="text-align: left;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-TDFZZ7cyfbE/Uc1E7dSLCeI/AAAAAAAACtI/vbG7etiFS2g/s925/innodb_raspi_load.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="280" src="http://3.bp.blogspot.com/-TDFZZ7cyfbE/Uc1E7dSLCeI/AAAAAAAACtI/vbG7etiFS2g/s640/innodb_raspi_load.png" width="640" /></a></div>A load of 3.5 causes an issue where the time that is recorded for data packets coming in gets messed up creating bunched up datapoints:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Jhg1mpnwIMQ/Uc1HL91zhjI/AAAAAAAACtg/h-vzID3xHro/s948/timingissue.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="270" src="http://4.bp.blogspot.com/-Jhg1mpnwIMQ/Uc1HL91zhjI/AAAAAAAACtg/h-vzID3xHro/s640/timingissue.png" width="640" /></a></div><br />Switching the storage engine over the MYISAM, reduced the load to around 0.2 and the timing issue is no longer present:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-vPe12-x2Gtc/Uc1FAYirGeI/AAAAAAAACtQ/Q5bp_VsvwmQ/s944/piloadmyisam.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="274" src="http://4.bp.blogspot.com/-vPe12-x2Gtc/Uc1FAYirGeI/AAAAAAAACtQ/Q5bp_VsvwmQ/s640/piloadmyisam.png" width="640" /></a></div><br />To convert your raspberry pi emoncms Innodb tables to MYISAM you can run the following script on your raspberrypi which will go through each table converting them in turn:<br /><br /><br /><br />&nbsp; $mysqli = new mysqli("localhost","root","raspberry","emoncms");<br /><br />&nbsp; $result = $mysqli-&gt;query("SHOW tables");<br />&nbsp; while ($row = $result-&gt;fetch_array())<br />&nbsp; {<br />&nbsp; &nbsp; echo "ALTER TABLE `".$row[0]."` ENGINE=MYISAM\n";<br />&nbsp; &nbsp; $mysqli-&gt;query("ALTER TABLE `".$row[0]."` ENGINE=MYISAM");<br />&nbsp; }<br /><br /></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/06/rethinking-data-input-and-storage-core/">Rethinking the data input and storage core of emoncms: benchmarks</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-06-27T21:55:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-06-27 21:55:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> six minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>emoncms</li>
      
        <li>benchmarking</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/06/rethinking-data-input-and-storage-core/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Over the last few days I've been looking again at the core data input, storage and access part of emoncms. There is&nbsp;definitely&nbsp;a lot of&nbsp;opportunity&nbsp;to improve performance and there are a lot of options so I thought I would start to do some more systematic benchmarking.<br /><br />So here are some initial benchmarks of feed data storage in&nbsp;different storage engines: mysql (myisam vs innodb), timestore and direct file access. I also thought Id have a go at&nbsp;writing&nbsp;the current implementation of input processing in both python and nodejs in addition to php to learn a bit more about these languages as they are being used and favoured by others in the community such as Jerome (python), Houseahedron (python) and&nbsp;Jean Claude Wippler of&nbsp;Jeelabs (nodejs). Id like to see if there is any measurable difference in performance between these different languages for the kind of application that we are developing and if there are any other benefits: easier to do certain things etc.<br /><br /><a href="http://jeelabs.org/tag/housemon/">Housemon</a> by Jean Claude Wippler is a good example of how a timeseries data storage and visualisation application can be implemented in a different way by using a mixture of direct file storage and a redis in-memory database with the server side part of the application written in nodejs.<br /><br />Intrigued by the idea of using direct file storage as&nbsp;Jean Claude Wippler does in Housemon&nbsp;and following the approach used by Mike Stirling in timestore of using a fixed time interval to simplify and speed up searching I had a go at&nbsp;writing&nbsp;a basic implementation using php file access and the results are good.<br /><br /><div><span style="font-size: x-large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#storage-engine-test"></a>Storage engine test</span><br /><br />All tested on a raspberrypi, running off the standard SanDisk SDHC 4Gb SD Card.&nbsp;</div><div><br /><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#mysql"></a>MYSQL</span><br /><br /><a href="https://github.com/emoncms/experimental/blob/master/storage/MYSQL/mysql.php">https://github.com/emoncms/experimental/blob/master/storage/MYSQL/mysql.php</a><br /><ul><li>InnoDB INSERT 1000 points 21s,25s,20s (Normalised to 100,000 ~ 2200s)</li><li>InnoDB INSERT 10000 points 167s,183s (Normalised to 100,000 ~ 1750s)</li><li>MYISAM INSERT 10000 points 15-17s (Normalised to 100,000 ~ 160s)</li><li>MYISAM INSERT 100000 points 165s</li></ul><b>MYISAM | INNODB READ</b><br /><br />Benchmark of current emoncms mysql read function that selects given number of datapoints over a time window.<br /><br />MYISAM results on the left | INNODB results on the right<br /><br /><a href="https://github.com/emoncms/experimental/blob/master/storage/MYSQL/mysql_read.php">https://github.com/emoncms/experimental/blob/master/storage/MYSQL/mysql_read.php</a><br /><br />10000 datapoint table:<br /><ul><li>1000dp over 5 hours (average method) 232ms | 391ms</li><li>1000dp over 24 hours (average method) 424ms | 675ms</li></ul>1000000 datapoint table: (115 days @ 10s)<br /><ul><li>all 0.2 hours (all method) 40ms | 38ms</li><li>all 0.5 hours (all method) 58ms | 55ms</li><li>all over 1 hours (all method) 90ms | 82ms</li><li>all over 1.3 hours (all method) 108ms | 100ms</li><li>1000dp over 3 hours (average method) 237ms | 272ms</li><li>1000dp over 5 hours (average method) 280ms | 327ms</li><li>1000dp over 24 hours (average method) 726 ms | 949ms</li><li>1000dp over 48 hours (average method) 1303 ms | 1767ms</li><li>1000dp over 52 hours (php loop method) 2875 ms | 2650ms</li><li>1000dp over 100 hours (php loop method) 3124 ms | 2882ms</li><li>1000dp over 200 hours (php loop method) 2934 ms | 2689ms</li><li>1000dp over 400 hours (php loop method) 2973 ms | 2749ms</li><li>1000dp over 2000 hours (php loop method) 2956 ms | 2762ms</li><li>1000dp over 2600 hours (php loop method) 2969 ms | 2767ms</li></ul>PHP loop method timing may be quite a bit longer if the server is under heavy load as it involves making many&nbsp;separate&nbsp;mysql queries, each query needs to wait for other queries in the mysql process list to complete.<br /><ul><li>Initial benchmarking results on netbook: <a href="http://emoncms.org/site/docs/developdatastorage">http://emoncms.org/site/docs/developdatastorage</a></li><li>Recent blog post on current emoncms implementation: <a href="http://openenergymonitor.blogspot.co.uk/2013/05/the-current-emoncms-feed-storage.html">The current feed storage implementation</a></li></ul><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#timestore"></a>Timestore</span><br /><br />Timestore is a promising solution, developed specifically for timeseries data, written by Mike Stirling.<br />Blog post on timestore: <a href="http://openenergymonitor.blogspot.com/2013/06/timestore-timeseries-database.html">Timestore timeseries database</a><br /><br /><a href="https://github.com/emoncms/experimental/blob/master/storage/timestore/timestore.php">https://github.com/emoncms/experimental/blob/master/storage/timestore/timestore.php</a><br /><ul><li>10000 inserts 52s</li><li>100,000 inserts 524s</li></ul><a href="https://github.com/emoncms/experimental/blob/master/storage/timestore/timestore_read.php">https://github.com/emoncms/experimental/blob/master/storage/timestore/timestore_read.php</a><br /><ul><li>Read 1000 datapoints over 5 hours: 45ms</li><li>Read 10 datapoints over 5 hours 20ms</li></ul>Includes layer averaging and&nbsp;multiple&nbsp;layers so there is quite a bit more going on (that would still need to be added to other implementations like direct file and mysql above), so benchmarks are not directly comparable.<br /><br /><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#direct-file"></a>Direct file</span><br />For some reason I did not think this method would work as well as the benchmarks show but its great that it does because from an implementation point of view its really simple and very flexible as its easy to modify the code to do what you want, see the examples linked:<br /><ul><li><a href="https://github.com/emoncms/experimental/blob/master/storage/directfiles/write.php">Direct file write 100,000</a>: 6-7s</li><li><a href="https://github.com/emoncms/experimental/blob/master/storage/directfiles/write_openclose.php">Direct file write 100,000</a> open and close each time: 27,24,26s</li><li><a href="https://github.com/emoncms/experimental/blob/master/storage/directfiles/read.php">Direct file read 1000</a> datapoints over 5 hours of 10 second data in 85-88ms</li><li>Reads 1000 datapoints over 200 hours of 10 second data in 93ms</li><li>Reads 1000 datapoints over 2000 hours of 10 second data in 130ms</li><li>Reads 1000 datapoints over 2600 hours of 10 second data in 124ms</li></ul><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#redis"></a>Redis</span><br />For a short term storage, storage to disk may not be necessary, instead we can store data in memory using an in-memory database like redis. Benchmarks to add.<br /><br />Blog post: <a href="http://openenergymonitor.blogspot.com/2013/06/idea-for-using-redis-in-memory-database.html">Redis idea</a><br /><br /><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#other-ideas-for-storage-format"></a>Other ideas for storage format</span><br /><ul><li><a href="http://openenergymonitor.blogspot.com/2013/06/removing-redundant-datapoints-part-1.html">Removing redundant datapoints - part 1</a></li><li><a href="http://openenergymonitor.blogspot.com/2013/06/removing-redundant-datapoints-algorithm.html">Removing redundant datapoints – algorithm 1</a></li></ul><span style="font-size: large;">Languages</span><br />What about the programming language? No benchmarks yet but interesting to look at the difference in how the code looks. I found each language pretty straightforward to use and online resources to get me passed the bits I&nbsp;didn't&nbsp;know where readily available. The language links below show the core parts of the input processing stage of emoncms written in php, nodejs and python. I've also linked to emonweb a port of emoncms (or more a build in its own right be now) by Frank Oxener in ruby on rails.<br /><ul><li><a href="https://github.com/emoncms/experimental/tree/master/php">PHP</a></li><li><a href="https://github.com/emoncms/experimental/tree/master/nodejs">nodejs</a></li><li><a href="https://github.com/emoncms/experimental/tree/master/python">python</a></li><li>ruby&nbsp;<a href="https://github.com/dovadi/emonWeb">https://github.com/dovadi/emonWeb</a>&nbsp;(Frank Oxener)</li><li>go&nbsp;</li></ul><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#servers"></a>Servers</span><br /><ul><li>Apache</li><li>nginx&nbsp;<a href="http://www.ismsolar.com/sistema-de-monitorizacion-de-alto-rendimiento">http://www.ismsolar.com/sistema-de-monitorizacion-de-alto-rendimiento</a></li></ul><span style="font-size: large;"><a href="https://github.com/emoncms/experimental/blob/master/readme.md#emoncmsorg-stats"></a>Emoncms.org stats</span><br /><ul><li><a href="http://openenergymonitor.blogspot.com/2013/05/emoncmsorg-load-stats.html">Emoncms.org load stats</a></li></ul><span style="font-size: x-large;">HouseMon</span><br /><br />HouseMon by Jean Claude Wippler stores data in 3 forms:&nbsp;</div><div><ul><li>Raw log of the serial data received to file (compressed daily)&nbsp;</li><li>Redis in-memory storage for last 48 hours which makes for quick access of most recent data.&nbsp;</li><li>Archival storage via direct file access for data older than 48 hours, the archive is hourly aggregated data (hourly - unless a use case demands finer resolution at which point the archive can be rebuilt from the raw logs).&nbsp;</li></ul><a href="http://jeelabs.org/2013/02/17/data-data-data/">http://jeelabs.org/2013/02/17/data-data-data/ </a><br /><a href="http://jeelabs.org/2013/02/18/who-needs-a-database/">http://jeelabs.org/2013/02/18/who-needs-a-database/ </a><br /><br />Its quite clear from some of the above tests that the housemon implementation is going to be fast in terms of data access speeds (with redis storing everything in memory for the last 48 hours) and efficient in terms of data storage (binary files – hourly data), the big difference is that full resolution data is not available after 48 hours but Jean Claude Wippler argues that it would be better to wait for a use case rather than implement higher resolution for higher resolution sake and that logs can be used to rebuild&nbsp;archives&nbsp;at higher resolution if needed anyway.</div><div><br /></div><span style="font-size: large;">Next steps</span><br /><br />If you have a standard emoncms raspberrypi install, changing the mysql storage engine to myisam should bring immediate performance improvements, especially if you have a lot of feeds being recorded, I will try and put together a script to make this easier and also update the ready to go image.<br /><br />The next development step I think is to integrate redis into emoncms by rebuilding the input processing implementation to use redis rather than go to disk to get the last feed and input values. Then&nbsp;it would be good to test both timestore and the integrated direct file storage in action on several parallel raspberrypi's, keep benchmarking the differences and then see where that gets us.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/06/idea-for-using-redis-in-memory-database/">Idea for using redis in-memory database to improve emoncms performance</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-06-25T07:35:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-06-25 07:35:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>emoncms</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/06/idea-for-using-redis-in-memory-database/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Most of the time taken to handle posting data to emoncms, (input processing and feed updating) is taken up by requests to the mysql database. The php part of the code is usually pretty fast especially with Opcode cashing enabled such as APC.<br /><br />Reducing the number of MYSQL queries required is usually a sure way to improve the performance of the application. Back in March of this year I&nbsp;re-factored&nbsp;the input processing implementation removing a lot of un-needed repeated queries as described at the bottom of this page:&nbsp;<a href="http://emoncms.org/site/docs/developinputproc">http://emoncms.org/site/docs/developinputproc</a><br />The results where really good, see the pic of <a href="https://twitter.com/Openenergymon/status/313238459965915136/photo/1">time spent serving queries here</a><br /><div><br /></div><div>I've been thinking about how to improve this further, mysql queries are used a lot for getting the last value of a feed or input, its used for all the +,-,x,/ input processes, the Power to kWh/d, histogram processes, in-fact most of the processes. When a new datapoint is added to a feed data table emoncms also updates the last time and value into the feeds table every time. This is then used by the input processors and also to provide the &nbsp;live view on the feeds page.</div><div><br /></div><div>None of these input or feed last updated time/value reads and write queries need to be&nbsp;persistent&nbsp;beyond the very short term that an in-memory database would be fine for. Using an in-memory database like redis should be much faster than going to the hard disk or SD card and so hopefully implementing this will lead to a good performance improvement. It also has benefits for&nbsp;longevity&nbsp;of the raspberrypi SD card as it reduces SD card writes.&nbsp;That's the idea anyway, here's a bit of basic testing of using redis, the next step is to try to implement this in emoncms.</div><div><br /><b>Install redis and&nbsp;redis php client&nbsp;ubuntu</b><br /><b><br /></b><span style="font-family: Courier New, Courier, monospace;">sudo apt-get install redis-server</span><br /><br />Install PHP redis client https://github.com/nrk/predis. To install using PEAR which we've already been using for installation of the serial dio library used by the raspberrypi module, call the following:&nbsp;</div><div><br /></div><div><span style="font-family: Courier New, Courier, monospace;">sudo apt-get install php-pear php5-dev (if you dont already have pear installed)&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">pear channel-discover pear.nrk.io</span></div><div><span style="font-family: Courier New, Courier, monospace;">pear install nrk/Predis  </span><br /><br /><b>Trying redis out:</b>&nbsp;</div><div><br />&lt; ?php<br /><br /></div><div><div><span style="font-family: Courier New, Courier, monospace;">require 'Predis/Autoloader.php';</span></div><div><span style="font-family: Courier New, Courier, monospace;">Predis\Autoloader::register();</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">$redis = new Predis\Client();</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">// 1) Set redis in-memory key-value pair to hold feed meta and last value data</span></div><div><span style="font-family: Courier New, Courier, monospace;">// ONCE SET COMMENT OUT THIS LINE TO SEE THAT feed_1 DATA IS PERSISTENT&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">// BETWEEN CALLS TO THIS SCRIPT - AS LONG AS MEMORY IS NOT RESET.</span></div><div><span style="font-family: Courier New, Courier, monospace;">$redis-&gt;set('feed_1',json_encode(array('name'=&gt;"Solar Power",'time'=&gt;time(),'value'=&gt;1800)));</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">// 2) Fetch the feed_1 entry from in-memory db</span></div><div><span style="font-family: Courier New, Courier, monospace;">echo $redis-&gt;get('feed_1');</span></div></div><div><br /></div><div>Redis is also used by Jean Claude Wippler in HouseMon which is cool:<br /><a href="https://github.com/jcw/housemon">https://github.com/jcw/housemon</a><br /><a href="http://jeelabs.org/tag/housemon/">http://jeelabs.org/tag/housemon/</a><br />I'd like to learn more about how HouseMon works, take a little time to get a HouseMon install up and running and familiarise myself with the code and architecture as it looks really nice!</div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2013/06/building-energy-modelling-simple/">Building Energy Modelling: A simple javascript model</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2013-06-24T10:25:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2013-06-24 10:25:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 11 minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li>Building Energy Modelling</li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2013/06/building-energy-modelling-simple/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Putting what we covered in the last two posts together we can create a basic building energy model that covers building <a href="http://openenergymonitor.blogspot.com/2013/06/how-much-energy-does-it-take-to-heat.html">fabric heat loss</a>&nbsp;and <a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-ventilation.html">infiltration heat loss</a>.<br /><br />To start with the model extends the very basic example given in the first blog of the cube house by allowing for different building elements with different U-values: Walls, Roof, Floor, Windows. This is implemented in the same way as can be found in the full SAP model.<br /><div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-RHJBecKT4f0/UcgVPShFXqI/AAAAAAAACs0/7pKcyO-VwI0/s1600/house02graphic.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="303" src="http://4.bp.blogspot.com/-RHJBecKT4f0/UcgVPShFXqI/AAAAAAAACs0/7pKcyO-VwI0/s400/house02graphic.png" width="400" /></a></div><br />When calculating the heat loss from a building with multiple elements its useful to break the equation for building fabric element heat loss (Building fabric element heat loss = Area x U-Value x temperature difference)&nbsp;&nbsp;down into three parts.</div><div><ol><li>Calculate the Area x U-Value for each element giving the heat loss in Watts per Kelvin (W/K) for that building element.</li><li>Calculate the sum of the heat loss in W/K for all elements.</li><li>Calculate the the total heat loss in Watts for a given temperature difference.</li></ol>Here's an example house with a fairly simple range of elements, also added is an average infiltration rate for a modern house as covered in the&nbsp;<a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-ventilation.html">last blog post</a>.<br /><div style="margin-bottom: 0cm;"><br /></div><table cellpadding="4" cellspacing="0" style="width: 100%px;"> <colgroup><col width="124*"></col> <col width="32*"></col> <col width="12*"></col> <col width="32*"></col> <col width="13*"></col> <col width="44*"></col> </colgroup><tbody><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="48%"><br /><br /></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="12%"><div align="CENTER"><b>Area</b></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="5%"><div align="CENTER"><br /></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="12%"><div align="CENTER"><b>U-Value</b></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="5%"><div align="CENTER"><br /></div></td>  <td style="border: 1px solid #000000; padding: 0.1cm;" width="17%"><div align="CENTER"><b>W/K</b></div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%">Solid floor uninsulated</td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">49 m2</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">x</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">0.7</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">=</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER">34.3 W/K</div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%">Timber frame walls with 50mm of insulation</td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">156 m2</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">x</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">0.45</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">=</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER">70.2 W/K</div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%">Roof with 100mm of loft insulation</td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">49 m2</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">x</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">0.25</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">=</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER">12.3 W/K</div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%">Double glazed windows</td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">12 m2</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">x</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="12%"><div align="CENTER">2.0</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="5%"><div align="CENTER">=</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER">24.0 W/K</div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%">Infiltration: average modern house 1.5 air changes per hour.</td>  <td colspan="4" style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="35%"><div align="RIGHT">1.5 x 0.33 x 294m<sup>3    </sup>=</div><div align="RIGHT"><br /></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER">145.5 W/K</div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%"><br /><br /></td>  <td colspan="4" style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="35%"><div align="RIGHT"><b>TOTAL &nbsp;&nbsp;</b></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER"><b>286.3 W/K</b></div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%"><br /><br /></td>  <td colspan="4" style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="35%"><div align="RIGHT"><b>Temperature difference</b></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER"><b>9.0 C</b></div></td> </tr><tr valign="TOP">  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="48%"><br /><br /></td>  <td colspan="4" style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="35%"><div align="RIGHT"><b>Heat loss (286W/K x 9C =)</b></div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER"><b>2577 W</b></div></td> </tr><tr valign="TOP">  <td colspan="5" style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="83%"><div align="RIGHT"><b>Annual total heating demand </b>(including    internal and solar gains)</div></td>  <td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="17%"><div align="CENTER"><b>22570 kWh</b></div></td> </tr></tbody></table><div style="margin-bottom: 0cm;"><br /></div><b>Note: </b>We still need to take into account: solar and internal gains and seasonal temperature variation as a minimum before we get the actual demand on the heating system. <br /><br />So that's all quite straightforward, the open source SAP implementation is written primarily in javascript with all the calculations happening on the 'client' (in the internet browser). The model combined with an interface updated in real-time makes for a dynamic experience with everything being calculated and visualised on the fly. <br /><br />Here's a javascript implementation of the above with just a simple console output for now: <br /><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><b>Javascript code example</b><br /><pre>var elements = [ <br />  {itemname: "Floor", grossarea: 49.0, openings: 0, uvalue: 0.7}, <br />  {itemname: "Walls", grossarea: 168.0, openings: 12.0, uvalue: 0.45}, <br />  {itemname: "Loft", grossarea: 49.0, openings: 0, uvalue: 0.25}, <br />  {itemname: "Windows", grossarea: 12.0, openings: 0, uvalue: 2.0} <br />]; <br /><br />var  fabric_heat_loss_WK = 0; <br /><br />for (z in elements) { <br />  elements[z].netarea = elements[z].grossarea - elements[z].openings; <br />  elements[z].axu = elements[z].netarea * elements[z].uvalue; <br />  fabric_heat_loss_WK += elements[z].axu; <br />} <br /><br />var volume = 294;<br />var infiltration = 1.5; // Air change per hour<br />var infiltration_WK = 0.33 * infiltration * volume;<br /><br />var internal_temperature = 21; <br />var external_temperature = 12; <br /><br />var total_heat_loss_WK = fabric_heat_loss_WK + infiltration_WK;<br /><br />var  heatloss =  total_heat_loss_WK * ( internal_temperature -  external_temperature );<br /><br />console.log("Total heating requirement: "+heatloss.toFixed(0)+" W"); <br />console.log("Annual heating demand: "+(heatloss*0.024*365).toFixed(0)+" kWh"); <br /><br /></pre>You can run this code directly on your computer via linux terminal without using an internet browser using nodejs http://nodejs.org/. To install nodejs on Ubuntu type:<br /><pre>sudo apt-get install nodejs</pre><br />create a file called  bem01.js and copy the javascript above into it and save.<br />Locate the file with terminal and then run using: <br /><pre>nodejs bem01.js</pre><br />it should output:<br /><pre>Total heating requirement: 2577 W <br />Annual heating demand: 22570 kWh</pre><b><br /></b><b>Seasonal temperature variation</b><br />So far to keep things simple we have assumed constant external temperature and internal temperature. There are different ways to take into account temperature variation, one common method is degree days <a href="http://www.degreedays.net/introduction">http://www.degreedays.net/introduction</a>. <br /><br />If I understand it correctly the SAP model uses average indoor temperature minus average external temperature on a monthly basis to calculate total heat demand and then it has a factor that reduces the % of a month the heating is on for if gains from solar and internal sources are significant.<br /><br /><b>Different sources of heat gain</b><br />What we have covered so far covers the heat loss side of the equation but the heating energy requirement is not yet what our heating system needs to provide instead it is the total heat energy going into the system that is our house including heat from other sources in addition to the main heating system, the other heat gains typically taken into account are: Solar gains and Internal Gains which usually consist of Cooking,&nbsp;Lighting&nbsp; Appliances and metabolic gains (These are the sources covered in the SAP model)<br /><br />The full energy balance equation for a steady state building energy model looks like this:<br /><br /><pre>solar_gains + cooking + lighting + hotwater + appliances + metabolic + heating_system =<br />( fabric_heat_loss_WK + infiltration_WK) x (internal_temperature – external_temperature)</pre><br />This is really the fundamental equation that&nbsp;describes&nbsp;a simple steady state building energy model, a large part of the SAP model is concerned with calculating estimates for all the variables that go into this equation.<br /><br /><b>Integrating Monitoring into a building energy model.</b><br />The above equation shows several variables that could be provided or&nbsp;inferred&nbsp;to some degree by monitoring.<br /><br />Internal temperature could be provided by an array of temperature sensors throughout a building. External temperature could be provided by an external temperature sensor or pulled in from a local weather station.<br /><br />Depending on energy source: cooking, lighting, hot water, appliances and heating system input could be provided from either electricity monitoring or electric and gas, the degree of utilisation would need to be taken into account.<br /><br />Solar gains could be calculated from a irradiance sensor or how about normalised solar PV data?<br /><br /><b>Summary of building energy modelling blog posts and code</b><br /> For the open source implementation of the SAP 2012 model see github here:<br /><a href="http://github.com/emoncms/sap">github.com/emoncms/sap</a><br /><br /><a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-part-1-whole.html">Building Energy Modelling part 1 - The Whole House Book</a></div><div style="margin-bottom: 0cm;"><a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-part-2-first.html">Building Energy Modelling part 2 - First attempts and research</a><br /><a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-carbon-coop.html">Building Energy Modelling part 3 - Carbon Coop and Open Source SAP 2012</a><br /><br /><a href="http://openenergymonitor.blogspot.com/2013/06/how-much-energy-does-it-take-to-heat.html">How much energy does it take to heat a simple cube house?</a><br /><a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-ventilation.html">Building Energy Modelling: Ventilation and infiltration</a></div><div style="margin-bottom: 0cm;"><a href="http://openenergymonitor.blogspot.com/2013/06/building-energy-modelling-simple.html">Building Energy Modelling: A simple javascript model</a></div><div style="margin-bottom: 0cm;"><br /><a href="http://openenergymonitor.blogspot.com/2013/05/carbon-coop.html">Carbon Coop</a><br /><a href="http://openenergymonitor.blogspot.com/2013/06/carbon-coop-and-houseahedron-meetup.html">Carbon Coop and Houseahedron meetup</a></div></div>
    
  </div>
  </article>
  <hr>
  

  <div class="pagination">
    
      <a class="btn pull-left" href="/posts/18">&larr; Older</a>
    

    
    <a class="btn pull-right" href="/posts/16">Newer &rarr;</a>
    
  </div>


    </div>

    
    <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
      <div class="grid">

 
 <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      
        <li class="post">
          <a href="/2022/04/hardware-development/">Chip Shortage & Hardware Development Update</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2019/10/cydynni-display/">Cydynni emonCMS dashboard on display</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2019/05/emondc/">Introducing emonDC</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/11/2018-dev-update/">2018 Development Review</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/11/demand-side-response/">Demand Side Response Development</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/01/emoncms-theme/">Emoncms Blue Theme</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/01/emonpi-remote-access/">emonPi Remote Access with Dataplicity</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/10/iotawatt/">Introducing IoTaWatt</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/08/cydynni-energylocal/">CydYnni – Energy Local, community hydro smart grid</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/08/advances-article/">Advances Wales Magazine Article</a>
        </li>
      
    
  </ul>
</section>
  
  
     <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided" id="ub202">
    
    
      <li>
        <a href="/categories/air-quality-egg/">air quality egg
        </a>
      </li>
    
      <li>
        <a href="/categories/antenna/">antenna
        </a>
      </li>
    
      <li>
        <a href="/categories/building-energy-modelling/">building energy modelling
        </a>
      </li>
    
      <li>
        <a href="/categories/china/">china
        </a>
      </li>
    
      <li>
        <a href="/categories/christmas/">christmas
        </a>
      </li>
    
      <li>
        <a href="/categories/dc/">dc
        </a>
      </li>
    
      <li>
        <a href="/categories/dc-current-sensing/">dc current sensing
        </a>
      </li>
    
      <li>
        <a href="/categories/esp8266/">esp8266
        </a>
      </li>
    
      <li>
        <a href="/categories/htu21d/">htu21d
        </a>
      </li>
    
      <li>
        <a href="/categories/heat-pump/">heat pump
        </a>
      </li>
    
      <li>
        <a href="/categories/kaizen/">kaizen
        </a>
      </li>
    
      <li>
        <a href="/categories/kicad/">kicad
        </a>
      </li>
    
      <li>
        <a href="/categories/mqtt/">mqtt
        </a>
      </li>
    
      <li>
        <a href="/categories/nanoderf/">nanoderf
        </a>
      </li>
    
      <li>
        <a href="/categories/nodered/">nodered
        </a>
      </li>
    
      <li>
        <a href="/categories/oem-labs/">oem labs
        </a>
      </li>
    
      <li>
        <a href="/categories/okg/">okg
        </a>
      </li>
    
      <li>
        <a href="/categories/oscilloscope/">oscilloscope
        </a>
      </li>
    
      <li>
        <a href="/categories/rfm12/">rfm12
        </a>
      </li>
    
      <li>
        <a href="/categories/rfm69/">rfm69
        </a>
      </li>
    
      <li>
        <a href="/categories/rs485/">rs485
        </a>
      </li>
    
      <li>
        <a href="/categories/sap-2012/">sap 2012
        </a>
      </li>
    
      <li>
        <a href="/categories/shw/">shw
        </a>
      </li>
    
      <li>
        <a href="/categories/srf/">srf
        </a>
      </li>
    
      <li>
        <a href="/categories/tasker/">tasker
        </a>
      </li>
    
      <li>
        <a href="/categories/android/">android
        </a>
      </li>
    
      <li>
        <a href="/categories/app/">app
        </a>
      </li>
    
      <li>
        <a href="/categories/application/">application
        </a>
      </li>
    
      <li>
        <a href="/categories/arduino/">arduino
        </a>
      </li>
    
      <li>
        <a href="/categories/award/">award
        </a>
      </li>
    
      <li>
        <a href="/categories/backup/">backup
        </a>
      </li>
    
      <li>
        <a href="/categories/batteries/">batteries
        </a>
      </li>
    
      <li>
        <a href="/categories/benchmarking/">benchmarking
        </a>
      </li>
    
      <li>
        <a href="/categories/build-sesh/">build sesh
        </a>
      </li>
    
      <li>
        <a href="/categories/business/">business
        </a>
      </li>
    
      <li>
        <a href="/categories/ciseco/">ciseco
        </a>
      </li>
    
      <li>
        <a href="/categories/community-energy/">community energy
        </a>
      </li>
    
      <li>
        <a href="/categories/community-smart-grid/">community smart grid
        </a>
      </li>
    
      <li>
        <a href="/categories/continuous-testing/">continuous testing
        </a>
      </li>
    
      <li>
        <a href="/categories/control/">control
        </a>
      </li>
    
      <li>
        <a href="/categories/current-sensor/">current sensor
        </a>
      </li>
    
      <li>
        <a href="/categories/current-transformer/">current transformer
        </a>
      </li>
    
      <li>
        <a href="/categories/dashboard/">dashboard
        </a>
      </li>
    
      <li>
        <a href="/categories/development/">development
        </a>
      </li>
    
      <li>
        <a href="/categories/display/">display
        </a>
      </li>
    
      <li>
        <a href="/categories/diy-drones/">diy drones
        </a>
      </li>
    
      <li>
        <a href="/categories/docker/">docker
        </a>
      </li>
    
      <li>
        <a href="/categories/documentation/">documentation
        </a>
      </li>
    
      <li>
        <a href="/categories/ecohomelab/">ecohomelab
        </a>
      </li>
    
      <li>
        <a href="/categories/efergy/">efergy
        </a>
      </li>
    
      <li>
        <a href="/categories/electronics/">electronics
        </a>
      </li>
    
      <li>
        <a href="/categories/elektrocamp/">elektrocamp
        </a>
      </li>
    
      <li>
        <a href="/categories/email-notifications/">email notifications
        </a>
      </li>
    
      <li>
        <a href="/categories/embodied-energy/">embodied energy
        </a>
      </li>
    
      <li>
        <a href="/categories/emonbase/">emonbase
        </a>
      </li>
    
      <li>
        <a href="/categories/emoncms/">emoncms
        </a>
      </li>
    
      <li>
        <a href="/categories/emonctrl/">emonctrl
        </a>
      </li>
    
      <li>
        <a href="/categories/emondc/">emondc
        </a>
      </li>
    
      <li>
        <a href="/categories/emonglcd/">emonglcd
        </a>
      </li>
    
      <li>
        <a href="/categories/emonsd/">emonsd
        </a>
      </li>
    
      <li>
        <a href="/categories/emonth/">emonth
        </a>
      </li>
    
      <li>
        <a href="/categories/emontx/">emontx
        </a>
      </li>
    
      <li>
        <a href="/categories/emontx-v2/">emontx v2
        </a>
      </li>
    
      <li>
        <a href="/categories/emontxsmt/">emontxsmt
        </a>
      </li>
    
      <li>
        <a href="/categories/emontxshield/">emontxshield
        </a>
      </li>
    
      <li>
        <a href="/categories/emoncms/">emoncms
        </a>
      </li>
    
      <li>
        <a href="/categories/emonesp/">emonesp
        </a>
      </li>
    
      <li>
        <a href="/categories/emonpi/">emonpi
        </a>
      </li>
    
      <li>
        <a href="/categories/emontx/">emontx
        </a>
      </li>
    
      <li>
        <a href="/categories/end-to-end/">end to end
        </a>
      </li>
    
      <li>
        <a href="/categories/energy-monitor/">energy monitor
        </a>
      </li>
    
      <li>
        <a href="/categories/energy-monitoring/">energy monitoring
        </a>
      </li>
    
      <li>
        <a href="/categories/esp8266/">esp8266
        </a>
      </li>
    
      <li>
        <a href="/categories/ev/">ev
        </a>
      </li>
    
      <li>
        <a href="/categories/feed-storage/">feed storage
        </a>
      </li>
    
      <li>
        <a href="/categories/firmware/">firmware
        </a>
      </li>
    
      <li>
        <a href="/categories/forum/">forum
        </a>
      </li>
    
      <li>
        <a href="/categories/github/">github
        </a>
      </li>
    
      <li>
        <a href="/categories/graphing/">graphing
        </a>
      </li>
    
      <li>
        <a href="/categories/hackathon/">hackathon
        </a>
      </li>
    
      <li>
        <a href="/categories/hall-effect/">hall effect
        </a>
      </li>
    
      <li>
        <a href="/categories/hardware/">hardware
        </a>
      </li>
    
      <li>
        <a href="/categories/heating/">heating
        </a>
      </li>
    
      <li>
        <a href="/categories/heatpumpmonitor/">heatpumpmonitor
        </a>
      </li>
    
      <li>
        <a href="/categories/home-assistant/">home assistant
        </a>
      </li>
    
      <li>
        <a href="/categories/home-camp/">home camp
        </a>
      </li>
    
      <li>
        <a href="/categories/humidity/">humidity
        </a>
      </li>
    
      <li>
        <a href="/categories/integrations/">integrations
        </a>
      </li>
    
      <li>
        <a href="/categories/interface/">interface
        </a>
      </li>
    
      <li>
        <a href="/categories/interview/">interview
        </a>
      </li>
    
      <li>
        <a href="/categories/iotawatt/">iotawatt
        </a>
      </li>
    
      <li>
        <a href="/categories/java/">java
        </a>
      </li>
    
      <li>
        <a href="/categories/job/">job
        </a>
      </li>
    
      <li>
        <a href="/categories/kickstarter/">kickstarter
        </a>
      </li>
    
      <li>
        <a href="/categories/lightwaverf/">lightwaverf
        </a>
      </li>
    
      <li>
        <a href="/categories/linux/">linux
        </a>
      </li>
    
      <li>
        <a href="/categories/logo/">logo
        </a>
      </li>
    
      <li>
        <a href="/categories/manufacturing/">manufacturing
        </a>
      </li>
    
      <li>
        <a href="/categories/measurement/">measurement
        </a>
      </li>
    
      <li>
        <a href="/categories/media/">media
        </a>
      </li>
    
      <li>
        <a href="/categories/mobile/">mobile
        </a>
      </li>
    
      <li>
        <a href="/categories/mobile-app/">mobile app
        </a>
      </li>
    
      <li>
        <a href="/categories/modbus/">modbus
        </a>
      </li>
    
      <li>
        <a href="/categories/nanode/">nanode
        </a>
      </li>
    
      <li>
        <a href="/categories/ook/">ook
        </a>
      </li>
    
      <li>
        <a href="/categories/open-source/">open source
        </a>
      </li>
    
      <li>
        <a href="/categories/openhab/">openhab
        </a>
      </li>
    
      <li>
        <a href="/categories/openenergymonitor/">openenergymonitor
        </a>
      </li>
    
      <li>
        <a href="/categories/openevse/">openevse
        </a>
      </li>
    
      <li>
        <a href="/categories/optical-pulse/">optical pulse
        </a>
      </li>
    
      <li>
        <a href="/categories/pcb/">pcb
        </a>
      </li>
    
      <li>
        <a href="/categories/pebble/">pebble
        </a>
      </li>
    
      <li>
        <a href="/categories/placement/">placement
        </a>
      </li>
    
      <li>
        <a href="/categories/platformio/">platformio
        </a>
      </li>
    
      <li>
        <a href="/categories/pluse/">pluse
        </a>
      </li>
    
      <li>
        <a href="/categories/presentation/">presentation
        </a>
      </li>
    
      <li>
        <a href="/categories/raspberry-pi/">raspberry pi
        </a>
      </li>
    
      <li>
        <a href="/categories/raspberry-pi/">raspberry pi
        </a>
      </li>
    
      <li>
        <a href="/categories/renewable/">renewable
        </a>
      </li>
    
      <li>
        <a href="/categories/serial/">serial
        </a>
      </li>
    
      <li>
        <a href="/categories/shop/">shop
        </a>
      </li>
    
      <li>
        <a href="/categories/showcase/">showcase
        </a>
      </li>
    
      <li>
        <a href="/categories/smartwatch/">smartwatch
        </a>
      </li>
    
      <li>
        <a href="/categories/social-energy-monitoring/">social energy monitoring
        </a>
      </li>
    
      <li>
        <a href="/categories/solarpv/">solarpv
        </a>
      </li>
    
      <li>
        <a href="/categories/sparkfun/">sparkfun
        </a>
      </li>
    
      <li>
        <a href="/categories/sustainability/">sustainability
        </a>
      </li>
    
      <li>
        <a href="/categories/temperature/">temperature
        </a>
      </li>
    
      <li>
        <a href="/categories/three-phase/">three phase
        </a>
      </li>
    
      <li>
        <a href="/categories/travisci/">travisci
        </a>
      </li>
    
      <li>
        <a href="/categories/tutorials/">tutorials
        </a>
      </li>
    
      <li>
        <a href="/categories/upgrade/">upgrade
        </a>
      </li>
    
      <li>
        <a href="/categories/user-guide/">user guide
        </a>
      </li>
    
      <li>
        <a href="/categories/utility-meters/">utility meters
        </a>
      </li>
    
      <li>
        <a href="/categories/voltage-sensing/">voltage sensing
        </a>
      </li>
    
      <li>
        <a href="/categories/vrms/">vrms
        </a>
      </li>
    
      <li>
        <a href="/categories/website/">website
        </a>
      </li>
    
      <li>
        <a href="/categories/wifipixel/">wifipixel
        </a>
      </li>
    
      <li>
        <a href="/categories/wind/">wind
        </a>
      </li>
    
      <li>
        <a href="/categories/wind-turbine/">wind turbine
        </a>
      </li>
    
      <li>
        <a href="/categories/wireless/">wireless
        </a>
      </li>
    
      <li>
        <a href="/categories/workshop/">workshop
        </a>
      </li>
    
      <li>
        <a href="/categories/zerocarbonbritain/">zerocarbonbritain
        </a>
      </li>
    
  </ul>
</section>
  
</div>
    </aside>
    
  </div>
</div>

<footer>
  <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">

  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor/guide'><i class="icon-github"></i></a>
  <a rel="me" href='https://blog.openenergymonitor.org/feed.xml'><i class="icon-rss"></i></a>

  <div class="credit" style="text-align:center;">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and <a href='https://github.com/coogie/oscailte'>Oscalite</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
<!--
<div class="searchtool">


<form action="https://encrypted.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.openenergymonitor.org" />
    <input class="search" id="search" type="text" name="q" results="0" placeholder="Search..." />
  </fieldset>
</form>


</div> -->
</div>
    </div>
  </div>
</div>
</footer>

<!--[if lt IE 7]>
  <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

</body>
</html>
