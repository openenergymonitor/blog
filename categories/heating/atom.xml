<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: heating | Blog | OpenEnergyMonitor]]></title>
  <link href="https://blog.openenergymonitor.org/categories/heating/atom.xml" rel="self"/>
  <link href="https://blog.openenergymonitor.org/"/>
  <updated>2020-03-12T17:14:18+00:00</updated>
  <id>https://blog.openenergymonitor.org/</id>
  <author>
    <name><![CDATA[Glyn Hudson]]></name>
    <email><![CDATA[support@openenergymonitor.zendesk.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Heatpumps in the ZeroCarbonBritain model by the Centre for Alternative Technology.]]></title>
    <link href="https://blog.openenergymonitor.org/2015/12/heatpumps-in-zerocarbonbritain-model-by/"/>
    <updated>2015-12-24T13:31:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2015/12/heatpumps-in-zerocarbonbritain-model-by</id>
    <content type="html"><![CDATA[<p>Following on from <a href="http://guide.openenergymonitor.org/2015/12/heat-pump-monitoring">last blog post on heat pump monitoring</a> I will try in this post to give a bit of context on heat pumps. Heat pumps are interesting because they provide a way to make efficient use of renewable electricity for heating. They are used in many zero carbon energy scenario’s including the <a href="http://zerocarbonbritain.org/">ZeroCarbonBritain</a> scenario from the Centre for Alternative Technology which is one of the most comprehensive UK based 100% renewable energy scenarios created.<br /><br />This sankey diagram from the ZeroCarbonBritain report gives an overview of the energy flows in their scenario, with heat pumps providing the bulk of the heating and hot water demand:</p>

<!--more-->

<p><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-5F5-MOj1SmQ/VnsPYpcAC5I/AAAAAAAAUIQ/yJBgfMYF_dQ/s1600/ZCBoverview.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="379" src="http://4.bp.blogspot.com/-5F5-MOj1SmQ/VnsPYpcAC5I/AAAAAAAAUIQ/yJBgfMYF_dQ/s640/ZCBoverview.png" width="640" /></a>&lt;/div&gt;&lt;div style="clear: left; float: left; line-height: 100%; margin-bottom: 1em; margin-right: 1em;"&gt;<br />Heat pumps provide 66% of final space and water heating demand, providing 155 TWh of heat from 50 TWh of electricity – an average coefficient of performance of 3.1. &lt;/div&gt;&lt;div style="clear: left; float: left; line-height: 100%; margin-bottom: 1em; margin-right: 1em;"&gt;ZeroCarbonBritain also include 30 TWh of direct electric heating. The total input electricity for heating is 80 TWh and total heat delivered 185 TWh which together is an average COP of 2.3. <br /><br /></p>

<p>This 80 TWh of electricity demand is around 20% of the final direct electricity demand or 11% of the total renewable electricity generated as 47% of the electricity generated is used during times of excess production for export and synthetic fuel production, plus backup power to gas. <br /><br />By using heat pumps for heating ZCB reduces the amount of renewable energy that would otherwise be needed to provide our energy needs. <br /><br />The total domestic space heating demand projected is 114.4 Twh, divided by the projected 2030 number of households of 30.1 million this equates to 3800 kWh/year per household. This is the space heating demand after fairly ambitious space heating energy savings (62% reduction), made by improving building fabric with insulation, draught proofing and better heating control.&lt;/div&gt;&lt;div style="line-height: 100%; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;<br /><br /><a href="http://1.bp.blogspot.com/-A7JGU-altNA/VnsPakChFBI/AAAAAAAAUIY/lUfq4VFfkXc/s1600/buildingefficiency.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="408" src="http://1.bp.blogspot.com/-A7JGU-altNA/VnsPakChFBI/AAAAAAAAUIY/lUfq4VFfkXc/s640/buildingefficiency.png" width="640" /></a> <br />The total domestic water heating demand is projected to be 76 TWh, or 2525 kWh/year per household. ZeroCarbonBritain has 33% of this coming from solar hot water. The hot water demand provided for by heat pumps and direct electric heating is therefore 1694 kWh.<br /><br />If the use of direct electric heating and heatpumps are evenly shared between all buildings achieving an average COP of 2.3 as above then our total delivered heat requirement of 3800 kWh + 1694 kWh = 5494 kWh becomes an input electricity requirement of 5495 / 2.3 = 2389 kWh/year per household or 6.5 kWh per day per household.<br /><br />The average household in 2030 is assumed to have the same average occupancy as today of 2.34. <br /><br />Our per person target would therefore become 2.8 kWh/d/pp of input electricity for space and water heating.<br /><br />&lt;table cellpadding="4" cellspacing="0" style="width: 100%;"&gt; &lt;tbody&gt;&lt;tr valign="top"&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="20%"&gt;<br /><br />&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="20%"&gt;Space heating only&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="20%"&gt;Water heating&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="20%"&gt;Space heating and water heating&lt;/td&gt;  &lt;td style="border: 1px solid #000000; padding: 0.1cm;" width="20%"&gt;Lighting, cooking and appliances&lt;/td&gt; &lt;/tr&gt;&lt;tr valign="top"&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;Heat demand&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;3800 kWh&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;1694 kWh&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;5494 kWh&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="20%"&gt;<br /><br />&lt;/td&gt; &lt;/tr&gt;&lt;tr valign="top"&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;Input electric&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;1542 kWh<br />@ 2.5 COP&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;847 kWh<br />@ 2.0 COP&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;2389 kWh<br />@ 2.3 COP&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="20%"&gt;1636 kWh&lt;/td&gt; &lt;/tr&gt;&lt;tr valign="top"&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;Daily input electric&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;4.2 kWh/d&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;2.3 kWh/d&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;6.5 kWh/d&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="20%"&gt;4.5 kWh/d&lt;/td&gt; &lt;/tr&gt;&lt;tr valign="top"&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;Per person&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;1.8 kWh/d/pp&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;1.0 kWh/d/pp&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0cm;" width="20%"&gt;2.8 kWh/d/pp&lt;/td&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; border-top: none; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm; padding-top: 0cm;" width="20%"&gt;1.9 kWh/d/pp&lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;<br /><span style="font-size: xx-small;"><i>- 346 kWh cooking after 40% reduction, 1290 kWh lighting and appliances after 61% reduction</i></span><br />&lt;div style="line-height: 100%; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;These figures provide a useful guide to the level of electricity consumption per household and per person that a scenario like ZeroCarbonBritain is aiming for and highlights the role of building fabric efficiency in reducing the heating requirements to start with. <br /><br />The average COP achieved taking into account a mix of heat pump heating at a COP of 3.1 and direct electric is 2.3. If it where achievable to increase the combined COP to 3.0 by reducing the amount of direct electric heating this could either be used to reduce the input electric demand by 23% reducing the total amount of renewable energy that would need to be installed or it could alternatively be used perhaps to reduce the amount of building fabric improvement required to 45% rather than a 60% reduction. <br /><br />The exact target will always be something that is in flux and will be a balance point between all the demands for renewable electricity and the degree to which we deploy renewable energy but the above figures give an idea for what we might want to try aiming for when designing homes that are ready for a zero carbon renewable energy supply. <br /><br />Interestingly the total electricity demand including lighting, appliances, cooking, space heating and water heating is 11 kWh/d per household in the ZeroCarbonBritain scenario which is only 3.3% above the 2007 electricity only baseline. The additional demand from the electrification of heating is negated by the increase in efficiency in lighting, cooking and appliances.<br />&lt;div style="line-height: 100%; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;&lt;table cellpadding="4" cellspacing="0" style="width: 100%;"&gt; &lt;colgroup&gt;&lt;col width="256*"&gt;&lt;/col&gt; &lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;  &lt;td bgcolor="#e6e6e6" style="border: 1px solid #000000; padding: 0.1cm;" valign="top" width="100%"&gt;&lt;div style="margin-bottom: 0cm;"&gt;<b>Passivhaus</b>&lt;/div&gt;&lt;div style="font-weight: normal; margin-bottom: 0cm;"&gt;The 60% energy    saving target for space heating taken into account above is not    actually state of the art. 3800 kWh/year in an typical uk home    with a floor area of 85m2 is 45 kWh/m2/year. Passivhaus new build    achieves a space heating energy demand of 15 kWh/m2/year and    retrofit 25 kWh/m2/year.&lt;/div&gt;&lt;div style="font-weight: normal; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;&lt;div style="font-weight: normal;"&gt;A passivhaus retrofit with floor    area of 85m2 would require 2125 kWh/year of heat, delivered at a    COP of 3.0 would require 708 kWh of input electric, or 850 kWh if a COP of 2.5 is achieved, which may be more likely as a larger portion of the heat supplied will be at a higher temperature for hot water heating rather than space heating.  &lt;/div&gt;&lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div style="line-height: 100%; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;&lt;div style="font-weight: normal; line-height: 100%; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;&lt;table cellpadding="4" cellspacing="0" style="width: 100%;"&gt; &lt;colgroup&gt;&lt;col width="128*"&gt;&lt;/col&gt; &lt;col width="128*"&gt;&lt;/col&gt; &lt;/colgroup&gt;&lt;tbody&gt;&lt;tr valign="top"&gt;  &lt;td style="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; border-top: 1px solid #000000; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm; padding-top: 0.1cm;" width="50%"&gt;<b>Average home today</b><br /><br />Lighting, Appliances and cooking<br />electric input:<br />3885 kWh, <b>10.6 kWh/d</b><br /><br />Space heating gas input:<br />12500 kWh, <b>34 kWh/d</b><br /><br />Water heating gas input:<br />2118 kWh, <b>5.8 kWh/d</b><br /><br /><br />Total: 18,503 kWh provided by a mix of gas and 2007 grid    average electric = ~ 5 tonnes of CO2//year&lt;/td&gt;  &lt;td style="border: 1px solid #000000; padding: 0.1cm;" width="50%"&gt;<b>Average ZeroCarbonBritain home</b><br /><br />Lighting, Appliances and cooking<br />electric input:<br />1636 kWh, <b>4.5 kWh/d</b><br /><br />Space heating electric input:<br />1542 kWh,<b> 4.2 kWh/d</b><br /><br />Water heating electric input:<br />847 kWh, <b>2.3 kWh/d</b><br /><br /><br />Total: 4025 kWh provided by renewable electric<br />at zero carbon&lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div style="font-weight: normal; line-height: 100%; margin-bottom: 0cm;"&gt;<br />&lt;/div&gt;&lt;div style="font-weight: normal; line-height: 100%; margin-bottom: 0cm;"&gt;&lt;ul&gt;&lt;li&gt;<i><span style="font-size: x-small;">ZeroCarbonBritain 100% renewable energy scenario for the UK: <a href="http://zerocarbonbritain.org/">http://zerocarbonbritain.org/</a></span></i>&lt;/li&gt;&lt;li&gt;<i><span style="font-size: x-small;">ZeroCarbonBritain power down methodology <a href="http://zerocarbonbritain.org/component/k2/item/88?Itemid=290">http://zerocarbonbritain.org/component/k2/item/88?Itemid=290</a></span></i>&lt;/li&gt;&lt;li&gt;<i><span style="font-size: x-small;">Sustainable Energy without the hot air section on heat pump’s by David MacKay: <a href="http://withouthotair.com/c21/page_146.shtml">http://withouthotair.com/c21/page_146.shtml </a></span></i>&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pebble Smart Watch Emoncms Heating Control Demo]]></title>
    <link href="https://blog.openenergymonitor.org/2014/08/pebble-smart-watch-emoncms-heating/"/>
    <updated>2014-08-01T15:50:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2014/08/pebble-smart-watch-emoncms-heating</id>
    <content type="html"><![CDATA[<p>This post follows on my post a while back on <a href="http://openenergymonitor.blogspot.co.uk/2013/12/emoncms-early-heating-control-demo.html">Emoncms heating control</a>, and links in with my previous post on using Tasker to display Emoncms notifications. For details of the hardware and overview of the heating control setup, see the Emoncms heating control post linked above.<br /><br />The Pebble is a Bluetooth connected smart watch which works with Apple and android smartphones. Using an e-ink display the Pebble watches achieves a week of battery life. Very impressive from a hardware point of view. I’ve been using a Pebble with my android phone for the past couple of weeks and found the Pebble to be useful for keeping up with <a href="http://openenergymonitor.blogspot.com/2014/08/android-tasker-pebble-smartwatch.html">notifications</a> while out out and about and especially for <a href="https://play.google.com/store/apps/details?id=ca.rebootsramblings.musicboss&amp;hl=en_GB">controlling music</a>, <a href="https://play.google.com/store/apps/details?id=com.batescorp.pebble.nav&amp;hl=en_GB">navigation directions</a> and <a href="https://play.google.com/store/apps/details?id=com.strava&amp;hl=en_GB">activity tracking</a> while out biking, running, driving and even swimming!<br /><br />The thought occurred to me that the Pebble could potentially be a super convenient way to quickly control my heating. I’ve got working a simple demo to turn my heating on and off, the could easily be extended to allow setting a set point.<br /><br />When the Pebble was first released my friend Ryan Brooks put together a <a href="http://openenergymonitor.blogspot.com/2014/02/pebble-smart-watch-emoncms-display.html">demo to display feed data from Emoncms on the pebble</a>. The code for this demo is up on GitHub, however since then things have moved on, Pebble have released SDK 2.0 and launched the pebble app store allowing many applications to be easily loaded onto the Pebble. One of the more powerful applications is <a href="https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB">Pebble Tasker</a>, when linked with the <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">main Tasker App</a> on an android phone the possibles are endless. See my previous <a href="http://openenergymonitor.blogspot.com/2014/08/android-tasker-pebble-smartwatch.html">blog post on using Tasker to display Emoncms notification on an android phone</a>. Taking inspiration from <a href="http://nathan.chantrell.net/home-automation/">Nathan Chantrell’s home automation setup</a> using Pebble and Tasker I decided to have a go at directly controlling my heating from my Pebble, here is the result:<br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-_SSMd3zwwb4/U9p1Vm5zYDI/AAAAAAAA4ns/QS82TULGXx8/s1600/P1050327.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-_SSMd3zwwb4/U9p1Vm5zYDI/AAAAAAAA4ns/QS82TULGXx8/s1600/P1050327.JPG" height="240" width="320" /></a>&lt;/div&gt;<br /><br />&lt;iframe allowfullscreen="" frameborder="0" height="315" src="//www.youtube.com/embed/yRyeDhEQVkg" width="560"&gt;&lt;/iframe&gt; <br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;<br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-sJ0ArawyZgQ/U9p1WUgL-7I/AAAAAAAA4nw/SUXXwndvDN4/s1600/P1050328.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-sJ0ArawyZgQ/U9p1WUgL-7I/AAAAAAAA4nw/SUXXwndvDN4/s1600/P1050328.JPG" height="240" width="320" /></a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;Here are the steps to replicate this system:&lt;/div&gt;&lt;h3 style="clear: both; text-align: left;"&gt;1. Install Emoncms on a Raspberry Pi and enable RF12 Packetgen Module &lt;/h3&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;I used the new pre-built SD card image for the low write version of emoncms, downloadable from the link below. This is soon to become our default Raspberry Pi pre-built image once testing is complete&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<a href="https://github.com/emoncms/emoncms/tree/bufferedwrite">https://github.com/emoncms/emoncms/tree/bufferedwrite</a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;Following the setup guide enable local logging and configure emonHub&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/setup.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/setup.md</a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;The heating control setup requires the emoncms Packetgen module. Follow the steps to enable packetgen to work with emonHub. &lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/emonhubmod.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/emonhubmod.md</a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;More info on packetgen module can be found: <a href="https://github.com/emoncms/packetgen">https://github.com/emoncms/packetgen</a>&lt;/div&gt;&lt;h3 style="clear: both; text-align: left;"&gt;2. Setup RFM12B receiver and control relay &lt;/h3&gt;&lt;div&gt;To perform the actual control of the boiler you will need to setup an RFM12B receiver node with a relay or similar. The actual hardware setup will depend on what you want to control, a JeeLink or partially populated emonTx V2 work well as a good base for the control hardware. See my <a href="http://openenergymonitor.blogspot.com/2013/12/emoncms-early-heating-control-demo.html">previous post on heating control</a> for more info regarding the hardware. The packetgen module will provide an example Arduino sketch to upload. &lt;/div&gt;&lt;div&gt;<br />&lt;/div&gt;&lt;h3&gt;3. Install and Configure Tasker on your android Phone &lt;/h3&gt;&lt;div&gt;<a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm</a><br /><br />&lt;div&gt;The emoncms API to set a packetgen variable is as follows:<br /><br /><i>http://YOUR_EMONCMS_SERVER_IP_OR_HOSTNAME/emoncms/packetgen/update.json?id=4&amp;value=1&amp;apikey=”YOUR_RW_APIKEY”</i>&lt;/div&gt;&lt;div&gt;<br />ID is the id of the packetgen variable (they start at 0) and value is the value to be set, the example above will turn the heating on setting variable 4 which in my setup is a boolean control variable to ‘1’. You can test if this is working by calling the API in your browser.<br /><br />&lt;/div&gt;I’ve created a Tasker template task which calls the above API which can be downloaded from Github and imported into Tasker, follow instructions on Github Readme. Variables should be self-explanatory.<br /><br /><a href="https://github.com/emoncms/androidTasker">https://github.com/emoncms/androidTasker</a><br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-cUl9ckQsfuY/U9uzvgik16I/AAAAAAAA4s0/L8JNp-rUeE8/s1600/2014-08-01+15.32.06.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-cUl9ckQsfuY/U9uzvgik16I/AAAAAAAA4s0/L8JNp-rUeE8/s1600/2014-08-01+15.32.06.png" height="640" width="400" /></a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;If a successful response is received from the Emoncms server a ‘success’ notification is displayed, else a fail notification is activated. &lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-PqdqiEaQ0IU/U9u0XAshGiI/AAAAAAAA4tA/U4Z2b-S7LmU/s1600/2014-08-01+15.32.51.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-PqdqiEaQ0IU/U9u0XAshGiI/AAAAAAAA4tA/U4Z2b-S7LmU/s1600/2014-08-01+15.32.51.png" height="400" width="225" /></a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<br />&lt;/div&gt;<br />Home screen Tasker task shortcut widgets can be created on your android home screen to allow Tasker tasks to be easily activated, or profiles can be setup to turn the heating on as you arrive home / leave work or certain times per day. The possibles are endless! Just make sure your system has some hardware fail-safe so you don’t get home to a house like a sauna or worse!<br /><br />&lt;/div&gt;&lt;div&gt;<br />If you are setting up Tasker yourself from scratch setup GET requst as follows:&lt;/div&gt;&lt;div&gt;<br /><i>New Task &gt; + new action &gt; net &gt; HTTP GET &gt; enter HTTP API above into host and (optionally) write output to log file </i>&lt;/div&gt;&lt;h3&gt;<br />4. Install &amp; configure Pebble Tasker on the Pebble Watch&lt;/h3&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<a href="https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB">https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB</a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;To map Tasker tasks to allow easy control from a Pebble &lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-d7UrLZR3-qU/U9umjLXlyEI/AAAAAAAA4sY/aLp4ph6XcXw/s1600/2014-07-31+17.10.26.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-d7UrLZR3-qU/U9umjLXlyEI/AAAAAAAA4sY/aLp4ph6XcXw/s1600/2014-07-31+17.10.26.png" height="400" width="225" /></a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<br />&lt;/div&gt;&lt;h3 style="clear: both; text-align: left;"&gt;Other Pebble Tweaks I’ve found useful&lt;/h3&gt;&lt;div style="clear: both; text-align: left;"&gt;While not directly relevant to heating control here are some further details of my Pebble smartwatch setup: &lt;/div&gt;&lt;div style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div style="clear: both; text-align: left;"&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;Using <a href="http://pebblebits.com/">PebbleBits firmware</a> on the pebble to quickly launch pebble apps from the watch face&lt;/li&gt;&lt;li&gt;Using <a href="https://github.com/emoncms/androidTasker/blob/master/Strava_Start___Stop.tsk.xml">Tasker to Stop / Start Strava </a>&lt;/li&gt;&lt;li&gt;<a href="http://www.mypebblefaces.com/apps/1486/1299/">Modern Watchface</a> is my favourite watch face (shown in demo above)&lt;/li&gt;&lt;li&gt;<a href="https://play.google.com/store/apps/details?id=ca.rebootsramblings.musicboss&amp;hl=en_GB">Music Boss </a>is great for controlling music and starting podcasts while driving or biking&lt;/li&gt;&lt;li&gt;<a href="https://play.google.com/store/apps/details?id=com.batescorp.pebble.nav&amp;hl=en_GB">NavMe</a> is great for directions on the Pebble while on the bike  &lt;/li&gt;&lt;li&gt;Tasker can be used to send commonly sent SMS’s and call favourite contacts direct from the Pebble &lt;/li&gt;&lt;/ul&gt;<br />&lt;div style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;<br /><br /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Emoncms (early) Heating Control Demo]]></title>
    <link href="https://blog.openenergymonitor.org/2013/12/emoncms-early-heating-control-demo/"/>
    <updated>2013-12-15T21:20:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2013/12/emoncms-early-heating-control-demo</id>
    <content type="html"><![CDATA[<p>I’ve just hooked up a relay to control my central heating boiler and am successfully controlling it via the new emoncms packet generator module…it feels like the future has arrived in my house :-)<br /><br />The next step will be to make a nice user facing interface which allows setting heating control time schedules and pulling in temperature data from emonTH and even making it smart by using energy data to try and detect if someone is home or not. Lots of exciting possibilities now the enabling hardware is in place.<br /><br />&lt;table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style="text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-SjVPMnBRjYY/Uq4aU1vsHWI/AAAAAAAArwc/9p8I5DZXh9g/s1600/20131215_204511_Orwig+Terrace.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://4.bp.blogspot.com/-SjVPMnBRjYY/Uq4aU1vsHWI/AAAAAAAArwc/9p8I5DZXh9g/s400/20131215_204511_Orwig+Terrace.jpg" width="400" /></a>&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="tr-caption" style="text-align: center;"&gt;Gas Combi Boiler Relay Control Unit top left&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;Please excuse the old boiler, yes I know it should be a no brainer to replace it with a modern efficient condensing unit however things are never simple in rented accommodation. In practice I hardly use the boiler since bottled LPG is very expensive (no mains gas available here), luckily I have a wood stove and a good supply of wood!<br /><br />Here’s a demo of the heating boiler being turned on remotely:<br /><br />&lt;iframe allowfullscreen="" frameborder="0" height="360" src="//www.youtube.com/embed/1d797idBJ2M" width="640"&gt;&lt;/iframe&gt; <br />&lt;h3&gt;Hardware:&lt;/h3&gt;<b>Webserver: </b><br /><a href="http://shop.openenergymonitor.com/raspberry-pi/">Raspberry Pi with RFM12Pi expansion module</a> running emoncms (on external HDD file system): <a href="http://openenergymonitor.blogspot.com/2013/12/setup-emoncms-on-raspberrypi-with-hard.html">see blog post</a>. The Raspberry Pi and emoncms are also used to log my home power consumption from my <a href="http://openenergymonitor.org/emon/modules/emonTxV3">emonTx V3</a>, and room temperatures and humidity from my <a href="http://openenergymonitor.org/emon/modules/emonTH">emonTH’s.</a> It also mirrors the data to a remote emoncms server for backup.<br /><br />&lt;table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style="text-align: center;"&gt;<a href="http://2.bp.blogspot.com/-yE06dnTas_U/Uql-Wl0JuAI/AAAAAAAArqg/aKs3d72Xqh0/s1600/pihdsetup.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://2.bp.blogspot.com/-yE06dnTas_U/Uql-Wl0JuAI/AAAAAAAArqg/aKs3d72Xqh0/s400/pihdsetup.jpg" width="400" /></a>&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="tr-caption" style="text-align: center;"&gt;Raspberry Pi with RFM12Pi module with emoncms running locally on HDD file system&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;<br /><br /><b>Control Node:</b><br /><br /><b>If switching mains voltage is involved only undertake tasks you are comfortable with, making sure everything is isolated before starting work and don’t take any chances. </b><br /><b><br /></b>Heating systems vary widely, as does the type of control available. Some heating boilers can be controlled via an RF protocol, this could be preferable since tapping into the boiler direct and switching high voltage would not be required.<br /><br />My old Worcester Bosch 240 with Honeywell controller requires connecting two terminals together to switch the heating on (see image below). I managed to wire in an additional control wire while keeping the original timer unit in place.<br /><br />I used an emonTx V2 with JeeLabs relay module, this is just what I had to hand, any RFM12B node with an appropriate relay module could be used. We’re looking into making a prototype PCB with an RFM12B, relay unit, on-board power supply and in-line energy monitoring (why not?!). The important consideration here is to make sure everything is properly enclosed and wired up to a high standard if you’re controlling mains voltage. DON’T TAKE CHANCES WITH MAINS VOLTAGE.<br /><br />It’s important that the relay module used can handle the current being switched in my case this was only about 500mA @ 240V AC but if you’re controlling an electric heating direct this is an important consideration.<br /><br />&lt;table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style="text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-OZ4jgaJAK4E/Uq31bNdh45I/AAAAAAAArvs/9YoSKa3uQK8/s1600/IMG_20131214_185622.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://1.bp.blogspot.com/-OZ4jgaJAK4E/Uq31bNdh45I/AAAAAAAArvs/9YoSKa3uQK8/s400/IMG_20131214_185622.jpg" width="400" /></a>&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="tr-caption" style="text-align: center;"&gt;Old Honeywell timer controller unit with front face removed - connect terminal 5 to 3 to turn heating on - black wire goes to relay (caution 240V AC)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;<br />&lt;table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style="text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-0Gm-mp2wiyU/Uq3zQUVBu-I/AAAAAAAArvg/VkOa8uQvR7c/s1600/20131214_193529.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://4.bp.blogspot.com/-0Gm-mp2wiyU/Uq3zQUVBu-I/AAAAAAAArvg/VkOa8uQvR7c/s400/20131214_193529.jpg" width="400" /></a>&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="tr-caption" style="text-align: center;"&gt;emonTx V2 with RFM12B and JeeLabs relay module&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;<span id="goog_440867743"></span><br /><br />&lt;h3&gt;Software:&lt;/h3&gt;<b>Emoncms Raspberry Pi Server</b><br />emoncms running on Raspberry Pi with the new packet generator module,<a href="http://openenergymonitor.blogspot.co.uk/2013/11/adding-control-to-emoncms-rfm12b-packet.html"> see blog post</a>. This is included in the emoncms Raspberry Pi external HDD image (it’s still in beta). For the moment as shown in the video the relay is switched on and off from the emoncms backend web page by browsing to the Pi’s local IP address and logging into emoncms and selecting the packet gen module under the extras menu.<br /><br />&lt;table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style="text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-_Ym-R5e4vro/Uq4ba4lTDQI/AAAAAAAArwk/jc3HuW2oXLw/s1600/Selection_036.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="257" src="http://1.bp.blogspot.com/-_Ym-R5e4vro/Uq4ba4lTDQI/AAAAAAAArwk/jc3HuW2oXLw/s640/Selection_036.png" width="640" /></a>&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="tr-caption" style="text-align: center;"&gt;emoncms RFM12B control packet generator module - beta&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;<br />To enable control from outside the house the the http port would have to be opened on my router’s firewall and a dynamic dns setup on the external IP address. As mentioned at the beginning of this post the next stage is to design a user facing interface dashboard for emoncms control modules.<br /><br /><b>Arduino Firmware: </b><br />I’ve pushed the Arduino sketch running on the emonTx to the e<a href="https://github.com/emoncms/packetgen/tree/master/Arduino_RFM12B_receiver_sketch_examples">moncms packetgen module GitHub as an example</a>.<br /><br /><b>Fail safe</b><br />I choose a non latching relay so in case of control unit power failure the relay will default to the open / off position.<br /><br />I’ve tried to make the code on the relay control unit as fail safe as possible (independent of Raspberry Pi and network) and as boiler friendly as possible by including a fail safe time after which the relay will default to off (1hr - I’m a frugal user of heating), and a maximum switching rate of 5 min to stop the boiler repeatedly being switched on and off should something go wrong. A hardware watchdog on the ATmega328 was included to try and ensure the microprocessor never locks up.<br /><br /><br /></p>
]]></content>
  </entry>
  
</feed>
