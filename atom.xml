<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Blog | OpenEnergyMonitor]]></title>
  <link href="https://blog.openenergymonitor.org/atom.xml" rel="self"/>
  <link href="https://blog.openenergymonitor.org/"/>
  <updated>2018-11-09T15:48:22+00:00</updated>
  <id>https://blog.openenergymonitor.org/</id>
  <author>
    <name><![CDATA[Glyn Hudson]]></name>
    <email><![CDATA[support@openenergymonitor.zendesk.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Demand Side Response Development]]></title>
    <link href="https://blog.openenergymonitor.org/2018/11/demand-side-response/"/>
    <updated>2018-11-08T18:48:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2018/11/demand-side-response</id>
    <content type="html"><![CDATA[<p><img src="https://blog.openenergymonitor.org/images/leaf-openevse.jpg" alt="openevse leaf" /></p>

<p>Demand side response (DSR) has been a OpenEnergyMonitor project interest for some time (e.g PV diversion) but has only made its way into a product more recently with our work on the <a href="https://guide.openenergymonitor.org/applications/ev-charging/">OpenEVSE charging station</a>. The OpenEVSE already implements real-time DSR, this post outlines how we are working on improving on this by integrating the forecasting and scheduling approaches being developed as part of our involvement in the <a href="https://community.openenergymonitor.org/t/cydynni-energylocal-community-hydro-smart-grid-blog-post/4762">EnergyLocal project</a>.</p>

<!--more-->

<hr />

<p>DSR: Demand Side Response is the idea of moving demand to</p>

<ul>
  <li>Better match supply, something that becomes more important as we supply more of our electricity from renewable energy.</li>
  <li>Reduce electricity system cost by reducing the maximum dispatchable generation, distribution and transmission grid capacity needed.</li>
</ul>

<p>Household electricity demand such as lighting, computing, TV, cooking, fridge/freezer, washing have relatively low DSR potential, either due to the need for these demands to happen during times of occupancy (peak demand) or because these demands are relatively small.</p>

<p>However as we move towards a zero carbon future, most scenarios suggest that large scale electrification of transport and heat is needed, alongside powering up of renewable energy. Both electric vehicles and electric heating e.g heatpumps &amp; hot water storage have significant DSR potential.</p>

<table><tr><td style="width:35%">

<a href="https://blog.openenergymonitor.org/images/energymodel.png">
  <img src="https://blog.openenergymonitor.org/images/energymodel.png" style="width:276px" />
</a>


</td><td>

This screenshot from our work on modelling zero carbon energy systems based on The Centre for Alternative Technologies ZeroCarbonBritain model <a href="https://learn.openenergymonitor.org/sustainable-energy/zcem/integrated.html#fullhousehold">https://learn.openenergymonitor.org/sustainable-energy/zcem/integrated</a> shows an example of the extent to which renewable energy supply could vary in the future and so the potential for DSR to move demand to better match supply.
<br /><br />
<i>Dark blue: traditional household electricity demand (minus any heating), Red: heatpump demand with DSR, Green: EV demand with DSR, Blue: Electrolysis demand for synthetic fuels soaking up large excess capacity, Total: Wind and solar output.</i>

</td></tr><tr><td>

<a href="https://blog.openenergymonitor.org/images/cydynni.png">
   <img src="https://blog.openenergymonitor.org/images/cydynni.png" style="width:276px" />
</a>
</td><td>

Energy local are pioneering community energy aggregation tariffs with both time of use pricing and pricing based on availability of a local renewable energy generator. A household with loads suitable for DSR can lower their electricity cost and use a greater amount of local power by shifting their demand to better times.
<br /><br />
EnergyLocal provide a day ahead forecast that can be used to schedule appliances, EV’s, hot water storage etc.

</td></tr><tr><td>

<a href="https://blog.openenergymonitor.org/images/octopus.png">
   <img src="https://blog.openenergymonitor.org/images/octopus.png" style="width:276px" />
</a>

</td><td>

For households not able to take part in community energy aggregation tariffs such as EnergyLocal, Octopus Energy have recently introduced a time of use tariff, that reflects wholesale electricity prices. <a href="https://octopus.energy/agile">https://octopus.energy/agile</a>
<br /><br />
Agile also provide a day ahead price profile that can be used for scheduling.
<br /><br />
Savings made by using these tariffs can help payback expenditure on smart energy technologies. Especially where battery or heat storage is considered during the build or retrofit stage. E.g using thermal mass to store heat from heatpumps during times of excess supply.

</td></tr><tr><td>

<a href="https://blog.openenergymonitor.org/images/gridcarbon.png">
   <img src="https://blog.openenergymonitor.org/images/gridcarbon.png" style="width:276px" />
</a>

</td><td>

Another approach to forecasting could be to use [grid carbon intensity](http://carbonintensity.org.uk/), weather forecasts e.g darksky API and grid demand forecasts (to avoid peak times).
<br /><br />
Users keen to stay with their existing electricity suppliers e.g Ecotricity for Electric Highway EV charging benefits could still make use of scheduling to ensure demand happens at the best time from a carbon and limiting grid strain perspective.

</td></tr></table>

<h3 id="control-approach">Control approach</h3>

<table><tr><td>

<p>1. <b>Realtime</b><br />
The emonEVSE is our first product that implements automated DSR, designed to charge a connected electric vehicle according to the available output from a solar PV array, it is an example of automated real-time DSR. A similar application and control strategy is PV diversion to hot water.</p>

<p>2. <b>Combined real-time &amp; later scheduled period</b><br />
A real-time only control strategy is limited in the case that solar output in a given day does not charge the car up sufficiently for use later in the afternoon/evening or next day, or the hot water tank is not heated sufficiently for an evening/morning shower. In both cases a further period of charging will be needed. This could be achieved with a basic second charging period e.g boost charge before use or an overnight charge.</p>

<p>To make both of these applications work well the control system needs to know when the user wishes to use the car or hot water and the state of charge or temperature target that needs to be reached.</p>

<p>3. <b>Forecast based scheduling</b><br />
A limitation with the last approach where solar was not enough to complete the charge or heat the tank directly is that the boost charge may happen at a time that is more expensive, or higher carbon. It may be better to charge at a higher rate through the middle of the day, importing power from the grid at that time, than importing during the evening peak. Integrating a solar forecast for the day ahead could predict if the charge will complete directly from the solar and if not proportionally increase the charge rate for the day.</p>
  
<p>Another limitation of real-time DSR for hot water heating is that on a sunny day, the cylinder can heat up too quickly and so will then sit at a high temperature loosing heat for longer than it needs too. It may also result in larger ramp effects and strain on the grid if storage is filled during the morning leaving everyone’s solar systems to export through the afternoon.</p>
<p>Leaving an EV at a high state of charge for a long time is also meant to cause a higher rate of battery degradation and so control strategies that bring the charging period as close to the time of use as possible may be particularly important.</p>
<p>Using a forecast and information on charge required could allow the control system to absorb power throughout the period of excess supply to better follow the supply curve, reducing ramp strain on the grid and reducing heat store loss and battery degradation.</p>

</td><td style="width:35%">

<a href="https://blog.openenergymonitor.org/images/solardivert.png">
   <img src="https://blog.openenergymonitor.org/images/solardivert.png" style="width:276px" />
</a>

<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

<a href="https://blog.openenergymonitor.org/images/scheduler.png">
   <img src="https://blog.openenergymonitor.org/images/scheduler.png" style="width:276px" />
</a>

</td></tr></table>

<p>Follow the development of this project and learn about our next steps on the forums.</p>

<ul>
  <li><a href="https://blog.openenergymonitor.org/2018/11/demand-side-response/">Forum post: CydYnni, EnergyLocal Community hydro smart grid
  <li><a href="https://github.com/emoncms/demandshaper">Github: Emoncms demand shaper module

</a></li></a></li></ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Emoncms Blue Theme]]></title>
    <link href="https://blog.openenergymonitor.org/2018/01/emoncms-theme/"/>
    <updated>2018-01-30T09:01:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2018/01/emoncms-theme</id>
    <content type="html"><![CDATA[<p>For a fresh clean start to 2018 the default Emoncms theme has now been set to “blue” :-)</p>

<p>The blue theme was chosen to give a consistent user experience between the other OpenEnergyMonitor websites e.g. Forum, Guide, Learn, Homepage etc.</p>

<p>We like the clean look of the blue theme, we hope you do also :-)</p>

<p>If you don’t it’s easy to revert to back to the old black theme by setting <code class="highlighter-rouge">$theme = standard</code> in <code class="highlighter-rouge">settings.php</code>. There is also a user contributed yellow theme called <code class="highlighter-rouge">sun</code> which is available.</p>

<p>emonPi Emoncms will update automatically during emonPi update to use the new theme as long as settings.php has not been user modified.</p>

<p>Feed view in Standard, Blue and Sun theme:</p>

<p><img src="https://blog.openenergymonitor.org/images/feed-emoncms-theme.png" alt="" /></p>

<!--more-->

<p>Login box in Blue, Standard and Sun theme:</p>

<p><img src="https://blog.openenergymonitor.org/images/login-emoncms-theme.png" alt="" /></p>

<p>MyElectric dashboard app in box in Standard, Blue, and Sun theme:</p>

<p><img src="https://blog.openenergymonitor.org/images/he-emoncms-theme.png" alt="" /></p>

<p>For questions and discussion see <a href="https://community.openenergymonitor.org/t/blue-theme-set-as-default-in-v9-8-28/6388">Emoncms Blue Theme Forum Topic</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[emonPi Remote Access with Dataplicity]]></title>
    <link href="https://blog.openenergymonitor.org/2018/01/emonpi-remote-access/"/>
    <updated>2018-01-26T12:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2018/01/emonpi-remote-access</id>
    <content type="html"><![CDATA[<p>Network devices such as an emonPi connected to a local network are secured behind a firewall, often integrated into a router.</p>

<p>The conventional way for obtaining access remotely is to open a port in the firewall and ‘port-forward’ requests to this port to the local emonPi. This method works but is cumbersome and insecure. It’s cumbersome because most users connect to the internet via their ISP using a non-static IP. Therefore the WAN IP address often changes, a dynamic DNS service such as <a href="https://www.duckdns.org/">Duck DNS</a>, or <a href="https://www.noip.com">noIP</a> can be used to link a dynamic IP to a static domain name, however this is cumbersome to set up and often requires purchasing a domain name, dynamic DNS Subscription and handling the dynamic DNS IP address updates.</p>

<p>The port forwarding method of remote access is also insecure since by default the emonPi uses an insecure http connections, this is not a problem on a secure local network but not recommend for use over the internet.</p>

<h2 id="dataplicity">Dataplicity</h2>

<p><a href="https://www.dataplicity.com">Dataplicity</a> offers a easy to setup web-service service to enable secure remote access (SSH/HTTPS) to RaspberryPi devices. The free tier allows free access to a single RaspberryPi device.</p>

<p><img src="https://blog.openenergymonitor.org/images/1-dataplicity.png" alt="1-dataplicity" /></p>

<p><img src="https://blog.openenergymonitor.org/images/5-dataplicity.png" alt="5-dataplicity" /></p>

<p><img src="https://blog.openenergymonitor.org/images/6-dataplicity.png" alt="6-dataplicity" /></p>

<p>Follow the steps on the <a href="https://guide.openenergymonitor.org/setup/remote-access/">Remote Access page of our User Guide</a> to setup Dataplicity on an emonPi.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Introducing IoTaWatt]]></title>
    <link href="https://blog.openenergymonitor.org/2017/10/iotawatt/"/>
    <updated>2017-10-25T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/10/iotawatt</id>
    <content type="html"><![CDATA[<p>IotaWatt<sup>tm</sup> is an open-hardware 14 channel WiFi connected electric power monitor. It’s based on the ESP8266 IoT platform using MCP3208 12 bit ADCs to sample AC voltage and current.</p>

<p>IoTaWatt can log data locally to on-board SD card and post directly to <a href="https://emoncms.org">Emoncms.org</a> via WiFi.</p>

<p><strong>There are no plans to discontinue the emonTx. Both the IoTaWatt and emonTx have advantages in key areas which complement each other.</strong></p>

<p>IoTaWatt is fully open-source and has been developed by Bob Lemaire <a href="https://community.openenergymonitor.org/u/overeasy/">@overeasy</a> in partnership with OpenEnergyMonitor.</p>

<p><img src="https://blog.openenergymonitor.org/images/iotawatt-1.jpg" alt="IoTaWatt" /></p>

<p><a class="btn pull-right" href="http://shop.openenergymonitor.com/iotawatt-wifi-connected-14-channel-electricity-monitor/">View in Shop → </a><a class="btn pull-left" href="https://guide.openenergymonitor.org/setup/iotawatt/">Setup IoTaWatt</a><br /></p>

<h2 id="hardware">Hardware</h2>

<p><img src="https://blog.openenergymonitor.org/images/iotawatt-2.jpg" alt="IoTaWatt" /></p>

<p>The IoTaWatt uses the WiFi enabled ESP8266 (ESP-12S) microprocessor. The ESP8266 is mounted using NodeMCU adaptor, the decision was made to use the NodeMCU form-factor to allow flexibility for customisation and future upgrades e.g ESP32.</p>

<p>The onboard SD card allows data to be saved locally with high resolution and network resilience. If the IoTaWatt is posting to an Emoncms server and loses network connectivity data logged to the SD card will be bulk uploaded to Emoncms when a network connection is restored.</p>

<p>An on-board real-time clock (RTC) ensure the time-stamp is always correct. The RTC is set using NTP. Using the IoTaWatt on a WiFi network with a reliable internet connection is highly recommended, however, the IoTaWatt can operate without an internet connection once the RTC has been initially set via NTP.</p>

<h2 id="firmware">Firmware</h2>

<p><img src="https://blog.openenergymonitor.org/images/iota-config.png" alt="IoTaWatt" /></p>

<p>The IoTaWatt is configured via a web interface served directly from the IoTaWatt ESP8266. See <a href="http://iotawatt.com">IoTaWatt.com</a> for a live demo of the interface.</p>

<p>The IoTaWatt supports automatic over the air (OTA) firmware updates.</p>

<!--more-->

<h2 id="security">Security</h2>

<p>IoTaWatt supports end-to-end encrypted connection to Emoncms using new <a href="http://emoncms.org/site/api#input">Emoncms API transport layer encryption</a>. Due to the limited resources of the ESP8266 microcontroller HTTPS connection is not possible. However, Emoncms offers an in-built transport layer encryption solution where the emoncms apikey is used as the pre-shared key for encrypting the data with AES-128-CBC.</p>

<p>Automatic OTA firmware updates ensure the IoTaWatt is always running the latest most secure version e.g a firmware update was released and automatically deployed to fix the <a href="https://www.krackattacks.com/">KRACK WPA vulnerability</a>. Firmware updates are digitally signed.</p>

<hr />

<h2 id="emontx-vs-iotawatt">emonTx Vs. IoTaWatt</h2>

<p>As I mentioned at the beginning of this post, there are no plans to discontinue the emonTx. The IoTaWatt is not designed to replace the emonTx, rather to complement it. Each unit has advantages in key areas:</p>

<h3 id="emontx-advantages">emonTx Advantages</h3>

<ul>
  <li>Low power: battery power / single AC-AC adaptor</li>
  <li>No setup required</li>
  <li>Supports multiple DS18B20 temperature sensors</li>
  <li>Supports Optical Pulse sensor (interrupt input) to interface directly with utility meters</li>
  <li>Approximate 3-phase with firmware update</li>
  <li>Multiple emonTx’s can communicate with a single emonPi / emonBase</li>
  <li>WiFi connection not required</li>
</ul>

<h3 id="iotawatt-advantages">IoTaWatt Advantages</h3>

<ul>
  <li>Large number of CT sensor inputs</li>
  <li>Flexible configuration (many different types of CT’s supported)</li>
  <li>On-board SD card logging</li>
  <li>OTA firmware updates</li>
  <li>Direct posting via WiFi to Emoncms.org</li>
</ul>

<p>The obvious advantage of the IoTaWatt over the emonTx is the number of CT sensor inputs. Another key advantage is the flexibility of the IoTaWatt, each input channel (AC voltage &amp; current) can be individually configured and calibrated. The IoTaWatt supports a number of different sizes of CT sensors with calibration presets for CT sensors e.g <a href="http://shop.openenergymonitor.com/20a-max-clip-on-current-sensor-ct/">20A</a>, <a href="http://shop.openenergymonitor.com/100a-max-clip-on-current-sensor-ct/">100A (standard)</a> and <a href="http://shop.openenergymonitor.com/200a-max-clip-on-current-sensor-ct/">200A</a>.</p>

<p>It is possible to use an IoTaWatt together with an emonPi / emonBase, the IoTaWAtt can post to any Emoncms server including emonPi over a local network.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CydYnni – Energy Local, community hydro smart grid]]></title>
    <link href="https://blog.openenergymonitor.org/2017/08/cydynni-energylocal/"/>
    <updated>2017-08-07T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/08/cydynni-energylocal</id>
    <content type="html"><![CDATA[<p>Over the last year we have been involved in a project in our local area (Snowdonia, North Wales) called CydYnni – EnergyLocal. The project is at the forefront of making it possible for households to source their electricity directly from local, community-owned renewable sources.</p>

<p><strong>The Bethesda pilot project, How it works</strong></p>

<p>The first part of the CydYnni project started with about 80 households (with 20 more joining soon) and a single 100 kW hydro generator. Using smart meters suitable for half hourly billing in participating households and at the hydro generator, the amount of hydro power used by the community is calculated for every half hour. The hydro tariff is 7p / kWh for the power used each half hour by the community providing a significant saving for households. Any additional power required is bought from the supplier Co-operative Energy on a time-of-use tariff.</p>

<p>The project provides cost savings to participating households, increased income for local renewable energy schemes and a more direct sense of having electricity provided from - in the case of the pilot project a hydro turbine just down the road!</p>

<p>There is a nice video here on the project which gives a good overview:</p>

<iframe width="100%" height="315px" src="https://www.youtube.com/embed/3z8GrTBLw8M" frameborder="0" allowfullscreen=""></iframe>

<p>There are a number of organisations working on the project of which we are one small part:</p>

<ul>
  <li>EnergyLocal: The organisation founded by Mary Gillie with the initial idea and in depth understanding of the energy market behind the project.</li>
  <li>CydYnni: A local consortium of community energy projects and organisations including Ynni Ogwen and Partneriaeth Ogwen, Ynni Padarn Peris, Moelyci, Coetir Mynydd, Antur Waunfawr, Ynni Anafon and the National Trust.</li>
  <li>Co-operative Energy: The Energy Supplier through which households participate in the project.</li>
  <li>Epower also known as NFPAS: The non fossil fuel purchasing agency – handling aggregation, power sharing and the nuts and bolts of billing.</li>
  <li>1010: Graphic design</li>
  <li>OpenEnergyMonitor: web app development in part 1 and home hub (base-station) development in part 2.</li>
</ul>

<p>It’s been great being involved in such a pioneering project run in the local community in which we live (the OpenEnergyMonitor office is about 5 miles from Bethesda).</p>

<p>Our role so far has been to develop a web app / energy dashboard so that participants can see when the local hydro generator is running and how likely they are to be on the cheaper hydro tariff. Participants can see their own consumption as well as the aggregated consumption of all participants.</p>

<p>The main energy dashboard app designed by 1010 and implemented by ourselves can be viewed online here:</p>

<p><a href="https://cydynni.org.uk">https://cydynni.org.uk</a></p>

<p><img src="https://blog.openenergymonitor.org/images/cydynni-app.png" alt="cydynni-app.png" /></p>

<p>The source code for the app is open source and available on github here:</p>

<p><a href="http://github.com/trystanlea/cydynni">http://github.com/trystanlea/cydynni</a></p>

<p>We have also developed a dashboard that is more focused on exploring the full data history of the hydro generation and community consumption, this dashboard can be viewed online here:</p>

<p><a href="https://dev.cydynni.org.uk">https://dev.cydynni.org.uk</a></p>

<p><img src="https://blog.openenergymonitor.org/images/cydynni-history.png" alt="cydynni-history.png" /></p>

<p>From the start of January the hydro supplied 57% of the electricity consumption of the participating households. You can really see how the available hydro generation decays usually over about a week after a significant rain event and the extent of the oversupply when it is raining.</p>

<p>It would be interesting to model the addition of solar to see how periods of lower rainfall might be supplanted by solar generation and explore other options for supplying the unmatched demand - e.g. anaerobic digestion.</p>

<p><strong>Part 1: Energy Dashboard / Web App development</strong></p>

<p>This first stage of the project relies on the app or looking at how rainy it is to signal to the households when it’s a good time to use energy. Any demand shifting is done manually by the householder. The data update rate from the smart meters is also relatively slow, with 48 half hourly readings updated daily but usually available in the app with a lag time of anywhere from 15 hours up to 63 hours over the weekend.</p>

<p><strong>Part 2: Hub</strong></p>

<p>The next stage of the project for us is to improve on this with an in home hub (based currently on the OpenEnergyMonitor emonbase), which will interface with a WIFI/radio meter gateway developed by Energy Assets, providing much faster 5-10s meter readings as well as enabling control of smart appliances, plugs and EV charging.</p>

<p>This development has driven some of our most recent improvements to the EmonPi/EmonBase, such as the recently launched WIFI Hotspot setup and ongoing development on the emoncms device module, which alongside auto-configuration of inputs and feeds provides the option to define control devices starting with the Sonoff S20 WIFI Socket, Martin’s WIFI Relay unit and the OpenEVSE charging station.</p>

<p>Over the coming months I will try to blog more on development progress and the technical implementation of the system in addition to insights into the data coming from the project demonstrating local community energy.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Advances Wales Magazine Article]]></title>
    <link href="https://blog.openenergymonitor.org/2017/08/advances-article/"/>
    <updated>2017-08-01T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/08/advances-article</id>
    <content type="html"><![CDATA[<p><a href="https://businesswales.gov.wales/zones/innovation/advances-wales">Advances Wales</a> is a quarterly magazine showcasing the latest news, research and developments in science, technology and engineering here in Wales, UK.</p>

<p>In the latest issue (82) we have been lucky enough to have an article featuring OpenEnergyMonitor. It’s well written and mentions a number of exciting developments that we have been working on e.g. CydYnni local energy project. Stay tuned for a blog post coming soon about this project.</p>

<p><a href="https://businesswales.gov.wales/sites/business-wales/files/documents/Advances82_English_FINAL.pdf">Download the full magazine here</a>.</p>

<p><img src="https://blog.openenergymonitor.org/images/advances-July17.png" alt="advances artice" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Emoncms Android App V2]]></title>
    <link href="https://blog.openenergymonitor.org/2017/06/emoncms-android-app-v2/"/>
    <updated>2017-06-22T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/06/emoncms-android-app-v2</id>
    <content type="html"><![CDATA[<p>Yesterday we have launched a significant update to the Emoncms Android app.</p>

<p><img src="https://blog.openenergymonitor.org/images/androidv2-1.jpg" alt="androidv2-1" /> <a href="https://play.google.com/store/apps/details?id=org.emoncms.myapps"><img alt="Get it on Google Play" src="https://emoncms.org/Modules/site/en-play-badge.png" /></a></p>

<h2 id="new-features">New features</h2>

<h4 id="multiple-emoncms-accounts">1. Multiple emoncms accounts:</h4>

<p>Monitor multiple Emoncms accounts, very useful for installers, power users etc.
It’s also possible for these accounts to be on different Emoncms servers e.g. emoncms.org, emonPi, emonBase, yourawesomeserver.com etc. Additional account are easily added to the app using the built in QR code scanner and scanning the QR code on the ‘Account’ section of Emoncms.</p>

<p><img src="https://blog.openenergymonitor.org/images/androidv2-4.jpg" alt="androidv2-multiple" /></p>

<h4 id="multiple-myelectric-graphs-per-account">2. Multiple MyElectric graphs per account:</h4>

<p>Useful to monitor more than one power feed: e.g. House consumption, Heat Pump consumption, Solar PV production, EV charging etc.</p>

<p><img src="https://blog.openenergymonitor.org/images/app1.png" alt="app1" /><img src="https://blog.openenergymonitor.org/images/app2.png" alt="app2" /></p>

<h4 id="multiple-currency-rates-for-each-myelectric-graph">3. Multiple currency rates for each MyElectric graph:</h4>

<p>e.g day rate / night rate, Economy7, solar PV FIT, hydro etc.</p>

<p><img src="https://blog.openenergymonitor.org/images/app-cost.png" alt="app-cost" /></p>

<h4 id="language-translations">4. Language Translations:</h4>

<p>French, German, Dutch, Italien and Spanish all rank among the top 5 for the Emoncms app in terms of active installs. We have now added the full native language support they deserve. Thanks a lot to the community for helping to proof and beta test. See bottom of this post for how to get involved.</p>

<p><img src="https://blog.openenergymonitor.org/images/app-lang.png" alt="app-lang" /></p>

<h4 id="chromebook-support">5. Chromebook support:</h4>

<p>Many Chromebooks can now run native android apps, the Emoncms app works great on a Chromebook. It’s much quicker to load than the web version and does not require a login each time.</p>

<p><img src="https://blog.openenergymonitor.org/images/androidv2-4.png" alt="androidv2-4" /></p>

<!--more-->

<p><strong>The current latest version at time of writing is V2.0.8</strong></p>

<p><a href="https://github.com/emoncms/AndroidApp/releases">See Emoncms Android app GitHub repo ‘Releases’ for change log.</a></p>

<hr />

<h4 id="community">Community</h4>

<p>The main features of the V2 update were contributed open-source by <a href="https://community.openenergymonitor.org/u/tamsin">Tamsin Slinn</a>. We very much appreciate all her hard work.</p>

<p>Also thanks to:</p>

<ul>
  <li><a href="https://community.openenergymonitor.org/u/jumpmaster">@JumpMaster</a>  (Original app author: various fixes and guidence)</li>
  <li><a href="https://community.openenergymonitor.org/u/bidouilleur">@bidouilleur</a> French translation proofreading &amp; corrections)</li>
  <li><a href="https://community.openenergymonitor.org/u/revil.o">@revil.o</a> (German translation proofreading &amp; corrections)</li>
  <li><a href="https://community.openenergymonitor.org/u/joyrider3774">@joyrider3774</a> (Dutch translation bug fixing)</li>
  <li><a href="https://community.openenergymonitor.org/u/pb66">@pb66</a> (testing and feedback)</li>
</ul>

<p><a href="https://community.openenergymonitor.org/t/emoncms-android-app-v2-0-8-open-beta-testing/3373/65">See Android app V2 development forum thread</a></p>

<p>As always the Android app is <a href="https://github.com/emoncms/AndroidApp">fully open-source on GithHub</a>, contributions are most welcome :-)</p>

<p>The best place to get involved is our community forum and open issues / pull requests direclty on the GitHub repo.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[emonPi Network Setup Wizard]]></title>
    <link href="https://blog.openenergymonitor.org/2017/06/emonpi-network-setup-wizard/"/>
    <updated>2017-06-21T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/06/emonpi-network-setup-wizard</id>
    <content type="html"><![CDATA[<p>Ever since we launched the emonPi we have always wanted to make the first time setup process as easy as possible for new users.</p>

<p><img src="https://blog.openenergymonitor.org/images/emonpi_wifi.png" alt="emonpi wifi" /></p>

<p>We have just made significant progress in streamlining the setup process by enabling the emonPi / emonBase to broadcast a WiFi access-point (AP) on first boot then scan for local WiFi networks and allow the user to connect. The emonPi will then turn off it’s AP and connect to the local network. There is also an option to connect via Ethernet or stand-alone WiFi AP mode when no local network is available.</p>

<p><img src="https://blog.openenergymonitor.org/images/emonpi-network-wizard1.png" alt="emonpi-network-wizard1" /></p>

<p>This has now been made possible using the Raspberry Pi 3 which supports WiFi access-point AP mode, <a href="https://github.com/openenergymonitor/emonpi/tree/master/wifiAP">some bash scrips</a> and a new <a href="https://github.com/openenergymonitor/emonpi/tree/master/emoncms-setup">emoncms-setup module</a>.</p>

<p><em>The new Network Setup Wizard will be included on all new purchased in July 2017 onwards. Existing emonPi’s with a Raspberry Pi 3 can be updated by running Admin &gt; emonPi update in Emoncms. The emonPi will only broadcast a WiFi AP if Ethernet is not connected and no WiFi setup is currently present.</em></p>

<p>Trystan is also working on making the input-processing setup for new devices easier by adding device template support to the Emoncms Device module. More on this the come…<a href="https://community.openenergymonitor.org/t/development-devices-inputs-and-feeds-in-emoncms/4281">see development forum thread</a>.</p>

<p>Read on more screenshots of the emonPi network setup wizard….</p>

<!--more-->

<p><img src="https://blog.openenergymonitor.org/images/emonpi-network-wizard2.png" alt="emonpi-network-wizard2" /></p>

<p><img src="https://blog.openenergymonitor.org/images/emonpi-network-wizard3.png" alt="emonpi-network-wizard3" /></p>

<p><img src="https://blog.openenergymonitor.org/images/emonpi-network-wizard4.png" alt="emonpi-network-wizard4" /></p>

<p>The <a href="https://guide.openenergymonitor.org/setup/connect/#1a-connect-to-wifi">emonPi Setup Guide</a> has been updated for use with the new Netork Setup Wizard.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Raspberry Pi blog]]></title>
    <link href="https://blog.openenergymonitor.org/2017/05/raspberrypi-blog/"/>
    <updated>2017-05-18T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/05/raspberrypi-blog</id>
    <content type="html"><![CDATA[<p>I don’t usually write a blog post about a blog post! However this particular blog post does merit a mention.</p>

<p>The lovely folks at the Raspberry Pi foundation have published a blog post about OpenEnergyMonitor:</p>

<h4 id="raspberry-pi-blog-open-source-energy-monitoring-using-raspberry-pihttpswwwraspberrypiorgblogopen-source-energy-monitoring-raspberry-pi"><a href="https://www.raspberrypi.org/blog/open-source-energy-monitoring-raspberry-pi/">Raspberry Pi Blog: Open-source Energy Monitoring Using Raspberry Pi</a></h4>

<p>The Raspberry Pi as been an integral part of the development of the OpenEnergyMonitor system. We make extensive use of the Raspberry Pi in our emonPi and emonBase units. The Raspberry Pi Foundation has always been a big insperation to use, therefore we are honoured to get a little mention on their blog.</p>

<p><img src="https://blog.openenergymonitor.org/images/raspi-blog.png" alt="raspi-blog" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[emonPi as a Home Automation Hub]]></title>
    <link href="https://blog.openenergymonitor.org/2017/05/emonpi-mqtt-googlehome/"/>
    <updated>2017-05-05T00:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/05/emonpi-mqtt-googlehome</id>
    <content type="html"><![CDATA[<p>I believe automation can play an useful role in helping to reduce energy consumption. For example being able to control my home central heating system remotely enables me to only turn on the heating when it’s required and not have it running on a set schedule when the house is empty.</p>

<p>As <a href="2016/08/ecohomelab-control/"> previously mentioned in a blog post</a>, the emonPi (<a href="github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-card-Download-&amp;-Change-Log">running emonSD pre-built SD card</a>) can function as a powerful home automation hub. Utilising the emonPi as a home automation hub is a good fit for a number of reasons:</p>

<ul>
  <li>It’s already running 24/7 for energy monitoring</li>
  <li>It’s optimised for robust long term operation: the root Raspberry Pi file-system is read-only to increase SD card lifespan</li>
  <li>It’s already connected to your local network</li>
  <li>It’s running Debian Raspbian Jessie therefore installing extra packages is easy and lots of support is available</li>
  <li>Raspberry Pi 3 has plenty of space capacity</li>
  <li>Extra radios / accessories can be connected via USB</li>
  <li>It’s already running an MQTT server</li>
  <li>emonSD pre-built SD card comes pre loaded with the following <a href="guide.openenergymonitor.org/integrations">integrations</a> nodeRED, OpenHAB and LightWaveRF</li>
</ul>

<blockquote>
  <p>In this post I want to share with you how I use the emonPi in my own home.</p>
</blockquote>

<p>Here is a video demo using Google Home to control my central heating and devices via MQTT:</p>

<div class="videoWrapper">
<iframe width="280" height="157" src="https://www.youtube.com/embed/r_v4GXVp0OI" frameborder="0" allowfullscreen=""></iframe>
</div>

<p>Read on to learn how this is achieved using an emonPi and open-source software…</p>

<!--more-->

<p>There are many many options when it comes to home automation and control. Where possible I prefer open-source solutions which do not depend on any third-party services. All the software services for my home system as I describe in this post runs locally on my emonPi and apart from Google Home voice integration does not require an internet connection to function. A self-hosted open-source solution has the added benefit of increased privacy and security which you are in fully in control of.</p>

<h2 id="mqtt">MQTT</h2>

<p>MQTT lightweight communication protocol is used as the ‘glue’ communication layer between all the following services. See <a href="https://guide.openenergymonitor.org/technical/mqtt/">technical/MQTT section of the User Guide</a> for more info about how MQTT works on the emonPi.</p>

<h2 id="energy-monitoring">Energy Monitoring</h2>

<p>Emoncms…obviously!</p>

<p>Recently I have been loving using the V2 Emoncms Android app (currently in beta) which supports multiple pages (see <a href="https://community.openenergymonitor.org/t/emoncms-android-app-v2-0-1-open-beta-testing/3373">forum thread</a>).</p>

<p>Video demo Emoncms Android app V2 beta:</p>

<div class="videoWrapper">
<iframe width="280" height="157" src="https://www.youtube.com/embed/LaTi-l9tVQM" frameborder="0" allowfullscreen=""></iframe>
</div>

<p>I have also recently enjoyed using the redesigned Emoncms Apps module which have just bee released on <a href="https://emoncms.org">Emoncms.org</a>. It’s now possible to have more than one MyElectric or MySolarPV ‘app’ per Emoncms account and Economy 7 split time of use tariffs are now spported (see <a href="https://community.openenergymonitor.org/t/new-version-of-the-emoncms-apps-module/3900/3">forum thread</a>):</p>

<p><img src="https://blog.openenergymonitor.org/images/myelectric-e7.png" alt="myelectric-e7.png" /></p>

<h2 id="control">Control</h2>

<h3 id="central-heating">Central Heating</h3>

<p>To control my gas central heating boiler I use an <a href="https://guide.openenergymonitor.org/integrations/mqtt-relay/">MQTT WiFi relay</a> which also has a built in thermostat and scheduler, although I don’t use these features, I just control directly via MQTT. The WiFi Relay has been very reliable, it’s been used daily for the past two years in my home and never once required a reboot.</p>

<p><img src="https://blog.openenergymonitor.org/images/mqtt-relay-overview.png" alt="mqtt-relay-overview.png" /></p>

<h3 id="plug-sockets-lights">Plug sockets (lights)</h3>

<p>I use LightWave RF plugs to which I have lights and other entertainment devices connected e.g. stereo and chromecast. Being able to switch a whole plug bank on/off has the advantage of being able to turn devices fully off when not in use to minimise any <a href="https://en.wikipedia.org/wiki/Standby_power">vampire drain</a>.</p>

<p>The emonPi can control LightWave RF devices directly via MQTT if an RF OOk modules is fitted. See <a href="https://guide.openenergymonitor.org/integrations/lightwaverf">LightWave RF emonPi User Guide</a>.</p>

<p><img src="https://blog.openenergymonitor.org/images/lightwave-rf-diagram.png" alt="lightwave-rf-diagram.png" /></p>

<p>LightWave RF devices are not perfect, the OOK RF protocol is simplistic, unsecure, occasionally unreliable and state feedback is not available. I am considering swithcing to <a href="https://www.itead.cc/smart-socket.html">ESp8266 based Sonoff plug</a> with third party <a href="https://github.com/arendst/Sonoff-Tasmota">MQTT firmware</a> or <a href="https://github.com/openenergymonitor/emonesp">EmonESP</a> firmware.</p>

<h2 id="interface">Interface</h2>

<p>For the past few years I have been using OpenHAB as the control interface. <a href="https://guide.openenergymonitor.org/integrations/openhab">OpenHAB is pre-loaded onto the emonPi emonSD pre-built image</a>. I am yet to upgrade to OpenHAB V2.0, it looks very nice. However, V1.8 has been very reliable and fits my needs. I use the OpenHAB Android app to access the interface quickly from my phone:</p>

<p><img src="https://blog.openenergymonitor.org/images/open-hab-home.png" alt="open-hab-home.png" /><img src="https://blog.openenergymonitor.org/images/open-hab-all.png" alt="open-hab-all.png" /></p>

<p>OpenHAB also <a href="https://apps.getpebble.com/en_US/application/5542604d45bf334314000098?section=watchapps">integrates with my Pebble smartwatch</a> which makes it super easy to turn on/off the heating while out and about:</p>

<p><img src="https://blog.openenergymonitor.org/images/openhab-pebble.jpg" alt="openhab-pebble" /></p>

<p>A while back (early 2016) I dabbled with <a href="http://home-assistant.io/">HomeAssistant</a>, (<a href="https://blog.openenergymonitor.org/2016/04/Home-Assistant/">see blog post</a>). I was quite impressed, I have been following the project and it looks like it’s matured to be an excellent home automation platform. Quit possibly a rival to OpenHAB.</p>

<p>Another option for an interface is <a href="https://github.com/node-red/node-red-dashboard">NodeRED Dashboard</a> which is now officially part of the NodeRED project.</p>

<p><em>The beauty of MQTT is that it’s platform agnostic, it’s possible to have many different interfaces controlling the same control nodes.</em></p>

<h3 id="voice-interface">Voice interface</h3>

<p>I’ve recently acquired a Google Home voice activated speaker, with a little help from <a href="https://github.com/bwssytems/ha-bridge">ha-bridge</a> to emulate a Philips Hue bridge it’s quite easy to get Google Home to control local devices via MQTT. The same setup will also work with Amazon Echo. See <a href="https://github.com/openenergymonitor/emonpi-ha-bridge">ha-bridge setup guide for emonPi</a></p>

<p>See video demo at the top of this post.</p>

<p>Device config using ha-bridge webpage GUI:</p>

<p><img src="https://blog.openenergymonitor.org/images/ha-bridge-device-config.png" alt="ha-bridge-device-config.png" /></p>

<p>Google Home app setup:</p>

<p><img src="https://blog.openenergymonitor.org/images/google-home-app.png" alt="google-home-app.png" /></p>

<h2 id="integration--automation">Integration &amp; Automation</h2>

<p>I use <a href="https://guide.openenergymonitor.org/integrations/nodered">NodeRED which is pre-loaded on emonPi / emonSD</a> to integrate with other services such a getting the latest outdoor temperature from <a href="https://www.wunderground.com/">Weather Underground</a>, send push notifications (heating on / off temperature alert) to my phone using <a href="https://pushover.net/">Pushover</a>. Both these services have pre-made nodeRED flows making integration very easy. NodeRED is pre-installed and configured on emonPi / emonSD. The <a href="https://github.com/openenergymonitor/oem_node-red/blob/master/flows_emonpi.json">example flow included on emonPi</a> demonstrates reading emonTH data from MQTT and external temperature data from Weather Underground.</p>

<p>I also have a nodeRED flow that handles turning off the heating when the temperature in the livingroom (as measured by emonTH) reaches a set point. I could have used the thermostat controller on the WiFi relay to do this, however it would be difficult in my house to run the wired temperature sensor from the Wifi relay to the living room, therefore I use a wireless emonTH temperature instead.</p>

<h1 id="security-and-remote-access">Security and remote access</h1>

<p>Remote control (from outside the local network) can be achieved using a dynamic DNS service such as <a href="https://www.duckdns.org/">DuckDNS</a> or secure VPN to give access to services from the outside. E.g I open port 8080 to give access to OpenHAB running on my emonPi from the internet. OpenHAB has authentication turned on and HTTPS can be used to create a secure connection.</p>

<p>Alternatively, and possibly a better solution could be to use <a href="http://www.myopenhab.org/">MyOpenhab.org</a> service to allow remote control without having to open up a port externally.</p>

<p>Home Assistant has got an example of <a href="https://home-assistant.io/docs/ecosystem/tor/">using Tor Onion Services to access Home Assistant</a> running locally.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MyHomeEnergyPlanner - open source home energy assessment]]></title>
    <link href="https://blog.openenergymonitor.org/2017/02/myhomeenergyplanner/"/>
    <updated>2017-02-21T13:43:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/02/myhomeenergyplanner</id>
    <content type="html"><![CDATA[<p>I would like to highlight a piece of work by <a href="https://community.openenergymonitor.org/users/cagabi">Carlos Alonso Gabizón</a> which I think is an important piece of the home energy monitoring and assessment toolkit and a really useful tool, which we would be keen to see more people use.</p>

<p>Carlos has been working for <a href="http://carbon.coop/">CarbonCoop</a> over the last year and a half on <a href="(http://myhome.emoncms.org)">MyHomeEnergyPlanner</a> – an open source household energy assessment tool based on SAP 2012 – a monthly domestic energy model.</p>

<p><img src="https://blog.openenergymonitor.org/images/myhomeenergyplanner2.png" alt="MyHomeEnergyPlanner" /></p>

<p>MyHomeEnergyPlanner started as a collaboration between OpenEnergyMonitor and CarbonCoop but this latest version and active work on it over the last year and a half is all down to Carlos and CarbonCoop.</p>

<p>MyHomeEnergyPlanner can be used to calculate the space and water heating requirements for a home from a detailed breakdown of the building fabric: floor, walls, roof, windows etc. It uses U-values and areas to calculate building fabric heat loss rates, combined with calculated heat loss from infiltration and ventilation and heat gains from solar radiation, lighting, household appliances, cooking and occupants.</p>

<p>It can be used to model a building in its current form and then create scenarios to explore the effect of undertaking measures such as adding insulation, improving air-tightness and changing heating systems.</p>

<p>MyHomeEnergyPlanner is free to use and open source and is now installed on emoncms.org (Login with your <a href="https://emoncms.org">Emoncms.org</a> account)</p>

<p><strong><a href="http://myhome.emoncms.org">http://myhome.emoncms.org</a></strong></p>

<!--more-->

<p>I have written an <a href="https://learn.openenergymonitor.org/sustainable-energy/building-energy-model/MyHomeEnergyPlanner">initial getting started guide</a> here that goes over the main parts of creating an initial household assessment:</p>

<p>When I was last working on building energy modelling I also wrote a <a href="https://learn.openenergymonitor.org/sustainable-energy/building-energy-model/readme">brief guide on how a simple household energy model</a> works which can also be found here:</p>

<h3 id="myhomeenergyplanner-github">MyHomeEnergyPlanner Github</h3>

<p><strong><a href="http://github.com/emoncms/MyHomeEnergyPlanner">http://github.com/emoncms/MyHomeEnergyPlanner</a></strong></p>

<hr />

<p>For further context: MyHomeEnergyPlanner is used by CarbonCoop as part of their work on household retrofit, improving insulation and air-tightness of existing households in Manchester to achieve carbon emission reductions of 80% compared to the 1990 baseline. More information can be found about their work here:</p>

<ul>
  <li><a href="http://carbon.coop/content/whole-house-retrofit-community-green-deal">Whole House Retrofit - A Community Green Deal</a></li>
  <li><a href="http://carbon.coop/assessments/URBED_ASSESSMENT_REPORT.pdf">Whole House Retrofit Assessment Method</a></li>
  <li><a href="https://twitter.com/CarbonCoop/status/802176377785028608/photo/1">Recent post-retrofit monitored results for Carbon Coop’s recent retrofit project (twitter)</a></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Launching Learn: Sustainable Energy]]></title>
    <link href="https://blog.openenergymonitor.org/2017/02/learn-sustainable-energy/"/>
    <updated>2017-02-14T10:18:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/02/learn-sustainable-energy</id>
    <content type="html"><![CDATA[<p>Over the years we have done a fair bit of work that explores sustainable energy documented to a varying degree on the site. The <a href="https://learn.openenergymonitor.org/sustainable-energy/energy/introduction">Sustainable Energy section of Learn</a> brings all of this together in one place that’s easier to find and navigate as well as extending it with further improvements to the energy modelling tools, discussion and analysis.</p>

<p><img src="https://blog.openenergymonitor.org/images/learn-laptop.png" alt="New Front Page" /></p>

<p>It starts with a brief introduction and energy 101, which outlines the energy consumption of the average UK household and a quick run through the main demand and supply side solutions used by the <a href="http://zerocarbonbritain.org/">ZeroCarbonBritain</a> scenario:</p>

<ul>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/introduction">Sustainable Energy Introduction</a></li>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/energy-101">Energy 101</a></li>
</ul>

<p>There is then a brief write up of an energy study into 17 households in Snowdonia, North Wales that Glyn and I helped run in 2010 that illustrates how different energy consumption can be across a number of household. It uses the energy stack graphics style used by the sadly late David MacKay FRS who wrote <a href="http://www.inference.eng.cam.ac.uk/withouthotair/">Sustainable energy without the hot air</a>, to visualise the different uses of energy from traditional electricity demand to heating and transport:</p>

<ul>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/snowdonia-energy-study">Snowdonia Energy Study</a></li>
</ul>

<!--more-->

<p>Page 5: Building on the ZeroCarbonBritain Energy Model goes into more detail on the ZeroCarbonBritain 10 year hourly energy model developed by the Centre for Alternative Technology. Including links to their open spreadsheet model and methodology papers and then work that I did with Philip James a researcher on the ZeroCarbonBritain project on creating an open source web based version of the model:</p>

<ul>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/zerocarbonbritain">Zero Carbon Britain</a></li>
</ul>

<p>The latest version of the 10 year hourly energy modelling tool can be found here:</p>

<ul>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/zcem/integrated.html#fullhousehold">Zero Carbon Britain Modelling Tool</a></li>
</ul>

<p>It can be used to explore supply &amp; demand matching for a large number of different supply and demand side technologies. Everything from wind, solar, heatpumps, biomass heat, electric vehicles, hydrogen, battery storage to long term biomass energy backup.</p>

<p>Pages 6,7 &amp; 8 and the appendixes go into further detail looking briefly at costs, renewable heat and community (large village/small town) scale scenarios, discussing the results of running different options through the model.</p>

<ul>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/scenarios">Energy Scenarios</a></li>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/renewableheat">Renewable Heat</a></li>
  <li><a href="https://learn.openenergymonitor.org/sustainable-energy/energy/costs">Sustainable Cnergy Costs</a></li>
</ul>

<p><strong>Screenshot: Snowdonia household energy study:</strong></p>

<p><img src="https://blog.openenergymonitor.org/images/learn-sustainable-energy.png" alt="New Front Page" /></p>

<p><strong>Screenshot: 10 year hourly energy model</strong></p>

<p><img src="https://blog.openenergymonitor.org/images/learn-sustainable-energy-zcem.png" alt="New Front Page" /></p>

<p>If you have any question’s about this work please feel free to email me on trystan dot lea at openenergymonitor.org.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[New home page and Learn website!]]></title>
    <link href="https://blog.openenergymonitor.org/2017/01/new-home-page-and-learn/"/>
    <updated>2017-01-31T10:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/01/new-home-page-and-learn</id>
    <content type="html"><![CDATA[<p>As you may well have noticed we have recently launched a new <a href="https://openenergymonitor.org">front page</a> for OpenEnergyMonitor and a common navigation bar theme across all our sites. We have also launched a new website called <a href="https://learn.openenergymonitor.org">Learn</a> to replace the <a href="https://openenergymonitor.org/emon/buildingblocks">Building Blocks section</a> of the old site. All URL’s directed to building blocks should re-direct automatically to the relevant Learn page.</p>

<p><img src="https://blog.openenergymonitor.org/images/home-page-devices.png" alt="devices" /></p>

<p>A key aim behind the redesign was to bring our interest and driving motivation of working towards sustainable energy and zero carbon more to the fore of the project. Energy Monitoring is a tool to help us understand our use of energy, and our motivation for starting the project was to understand our use of energy at home in relation to the wider context of what needs to be done if we are to get off fossil fuels and build a zero carbon energy system - We hope this update better reflects this interest.</p>

<p>This website redesign completes the shift away from using Drupal 6 cms that was started with the <a href="https://guide.openenergymonitor.org">User Guide website</a> launched April 2016 and a new <a href="https://Community.openenergymonitor.org">Community Form</a> using <a href="http://discourse.org">Discource</a> launched May 2016. The <a href="https://openenergymonitor.org/emon/forum">old forums</a> are still accessible as a read-only archive.</p>

<p>Alongside the new front page we have also launched a new website called Learn which includes what used to be called Building Blocks, resources for learning about AC Power Theory, CT Sensors, Measurement circuit design through to Timeseries data storage design.</p>

<p>Learn also includes a large updated section on Sustainable Energy which brings together and expands on our work on understanding the wider context, including a web-based 10 year hourly 100% renewable energy model based on ZeroCarbonBritain and resources on building energy modelling.</p>

<p>The new sites are all designed to be responsive for viewing on mobile as well as desktop screen sizes:</p>

<!--more-->

<h3 id="new-front-page">New front page:</h3>

<p><strong><a href="https://openenergymonitor.org">https://openenergymonitor.org</a></strong></p>

<p><img src="https://blog.openenergymonitor.org/images/new-oem-site.png" alt="New Front Page" /></p>

<h3 id="learn-website">Learn Website:</h3>

<p><strong><a href="https://learn.openenergymonitor.org">https://learn.openenergymonitor.org</a></strong></p>

<p><img src="https://blog.openenergymonitor.org/images/learn-sustainable-energy.png" alt="Learn: Sustainable Energy" /></p>

<p><img src="https://blog.openenergymonitor.org/images/mobile-learn.png" alt="1" /> <img src="https://blog.openenergymonitor.org/images/ct-sensors-phone.png" alt="2" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OpenEVSE EV Charge Controller]]></title>
    <link href="https://blog.openenergymonitor.org/2017/01/openevse-build/"/>
    <updated>2017-01-04T09:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2017/01/openevse-build</id>
    <content type="html"><![CDATA[<p>OpenEVSE (recently renamed to <a href="https://www.openevse.com/">OpenEV</a>) design and build fully open-source EVSE (Electric Vehicle Supply Equipment) charge controllers for electric vehicles.</p>

<blockquote>
  <p>An EVSE charging station, is a device an electric car (EV) is plugged into to charge. It communicates to the car to agree on a charging rate that is the fastest and safest rate both the car and the power supply can support.</p>
</blockquote>

<p><strong>Update March 17: OpenEnergyMonitor and proud to announce that we are now the UK / Europe reseller for OpenEVSE charging stations, see <a href="http://shop.openenergymonitor.com/ev-charge-controllers/">OpenEnergyMonitor Online Shop</a>.</strong></p>

<hr />

<p><img src="https://blog.openenergymonitor.org/images/leaf-openevse.jpg" alt="openevse leaf" /></p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build9.jpg" alt="openevse build9" /></p>

<p><em>Note: this review is my account of using the OpenEVSE in the UK (240V single-phase AC), see OpenEVSE website for official build guides</em></p>

<h2 id="features">Features</h2>

<p>The features that make the OpenEVSE charge controller interesting to us are:</p>

<ul>
  <li><a href="http://openevse.dozuki.com/Guide/OpenEVSE+WiFi+%28Beta%29/14">WiFi connectivity and remote control (via ESP8266)</a></li>
  <li>Variable rate of charge: e.g. charge current can be varied to match available power</li>
  <li>Integrated energy monitoring via custom hosted Emoncms <a href="http://data.openevse.com/emoncms">data.openevse.com</a></li>
  <li>Fully open-source :-)</li>
</ul>

<p><em>I recently swapped my ageing diesel car for an all-electric Nissan LEAF (it’s fantastic), so it felt like the perfect time to build and test an OpenEVSE charge controller unit!</em></p>

<p>Nissan LEAF charging from solar PV on a frosty morning:</p>

<p><img src="https://blog.openenergymonitor.org/images/nissan-leaf-solar-pv.jpg" alt="nissan-leaf-solar-pv" /></p>

<!--more-->

<div class="videoWrapper">
<iframe width="280" height="157" src="https://www.youtube.com/embed/A9D48V1D1G4" frameborder="0" allowfullscreen=""></iframe>
</div>

<h2 id="safety">Safety</h2>

<p>Even though it is possible to charge an EV via a standard electrical outlet, it is not recommended for a number of reasons:</p>

<ol>
  <li>Charging is very slow since the current is limited by the electrical outlet.</li>
  <li>Drawing a significant current (approx 10/12A) for an extended period (up to 10hrs for a 24KWh Nissan LEAF and 30hrs for a 90KWh Tesla Model S!) puts stress on the domestic wiring resulting in heating of the wire <a href="https://speakev.com/threads/house-fire-using-120v-trickle-charger.1708/">or worse</a> if the wiring is in a poor state.</li>
</ol>

<blockquote>
  <p>Charging via a properly installed EVSE is the fastest and safest way to charge an EV at home.</p>
</blockquote>

<p>OpenEVSE units have been designed to exceed the safety requirements for EV Charging Stations from SAE J1772, NEC and UL. Before supplying power to the car (and continuously while charging) the EVSE unit conducts a number of checks, no power is supplied until all the checks have passed. See <a href="https://openev.freshdesk.com/support/solutions/articles/6000113537-openevse-safety-features">OpenEVSE Safety Features</a></p>

<h2 id="purchase">Purchase</h2>

<p><em>Update: we are in communication with OpenEVSE to put together a UK/Europe specific OpeneEVSE package to resell via the <a href="https://shop.openenergymonitor.com">OpenEnergyMonitor Online Shop</a>.</em></p>

<p>OpenEVSE units can be purchased (kit or fully assembled) from the <a href="https://store.openevse.com">OpenEVSE online store</a>, the units are shipped from California USA. I went for a <a href="https://store.openevse.com/collections/frontpage/products/openevse-50a-charge-station-combo-with-enclosure">P50D Level 2 Deluxe OpenEVSE kit</a> with the <a href="https://store.openevse.com/collections/frontpage/products/openevse-wifi-kit">WiFi connection kit</a> and <a href="https://store.openevse.com/collections/frontpage/products/j1772-cable-40a-ultra-flexible-us-only">J1772 Cable</a>.</p>

<p>The OpenEVSE 50A L2 unit will charge any J1772 compliant car at up to 40A continous from a single phase 208-240V AC supply. However, you can dial back the current by setting the ‘max charge current’ to match your supply.</p>

<p><em>Full disclosure: Chris Howell from OpenEVSE made the unit available free of charge for me to evaluate and improve the Emoncms / OpenEnergyMonitor integration.</em></p>

<h2 id="assembly">Assembly</h2>

<p><strong><em>Warning:</em></strong> <em>Assembly of an EVSE requires wiring Alternating Current (AC) components that will be exposed to voltages from 100 to 250v. If you do not have the experience and knowledge required to safely work with AC voltages please consult with an experienced electrician for assistance and inspection of your work.</em></p>

<p>Assembly of the unit was straight forward following the <a href="http://openevse.dozuki.com/Guide/OpenEVSE+50A+Charging+Station/8">openEVSE build guide</a>. No soldering was required, only basic tools e.g. screwdriver, wire strippers etc. Assembly probably took me a couple of hours. I took my time to do a high-quality job of assembling, this is particularly important given the high currents involved.</p>

<p>The hardware components are all top quality, I was impressed by the attention to detail such as rubber seals around the LCD to waterproof the unit.</p>

<p>The hardware inside the unit is split into two main components which are physically separated: a high voltage and high current relay and a low voltage control electronics which is the microcontroller (ATmega328p) ‘brains’ of the unit. My unit contained an OpenEVSE Plus V4 control unit <a href="https://www.openevse.com/files/OpenEVSE_Plus_v4.pdf">see Datasheet</a>:</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build5.jpg" alt="openevse build5" /></p>

<p>Rear PCB showing ATmega328p on the OpenEVSE Plus V4 controller:</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build7.jpg" alt="openevse build7" /></p>

<p>Build progress: charge controller, ground busbar, relay, LCD and mode button fixed into enclosure</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build2.jpg" alt="openevse build2" /></p>

<p>The finished build: WiFi ESP8266 module is visible on the top left.</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build3.jpg" alt="openevse build3" /></p>

<h3 id="installation">Installation</h3>

<p>Installation should be undertaken by a qualified electrician. The unit should be wired in using suitably rated cable ideally with a dedicated RCD circuit breaker. The max charge current of the unit should be set to match the supply circuit wiring.</p>

<h2 id="operation">Operation</h2>

<p>On first powerup some basic settings are set via the LCD menu using a combination of short/long presses of the front button. The menu system is impressively responsive considering it’s running from an ATmega328! The basic settings include max charge rate (set to match wiring), charging service level and date-time. Settings are saved to EEPROM and date-time is kept up-to-date via a RTC battery backup.</p>

<p>The basic operation is very straightforward: just plug the car in and charging begins! Charging can be stopped/resumed by pressing the button on the front of the unit. Charging state is indicated by the backlight colour of the LCD and basic info such as current charging current and total kWh is displayed on the LCD.</p>

<p>Here is a photo of the unit charging my Nissan LEAF @ 26A. At this charge rate my 6.6Kw charge (24Kwh battery) Nissan LEAF will charge from flat in about 4hrs:</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-front.jpg" alt="openevse-front" /></p>

<p>Here’s a demo of the basic features of the unit:</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/cIvmYP57eOo" frameborder="0" allowfullscreen=""></iframe>
</div>

<h3 id="remote-datalogging">Remote Datalogging</h3>

<p>The Wifi kit (ESP8266) enables data logging from the OpenEVSE unit to a custom Emoncms server <a href="http://data.openevse.com">data.openevse.com</a> via a local Wifi connection. The Wifi kit also allows remote control (see RAPI commands below).</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build-emoncms.png" alt="openevse build4" /></p>

<h3 id="remote-control-via-rapi-commands">Remote Control (via RAPI commands)</h3>

<p>The OpenEVSE unit can be controlled and monitored remotely via serial RAPI (Remote API) commands. These commands can be <a href="http://openevse.dozuki.com/Guide/Serial+Communications+with+OpenEVSE/13">issued directly via serial</a> or the OpenEVSE WiFi kit (ESP8266) can be added to allow RAPI commands to be issued remotely via an HTTP web interface.</p>

<h4 id="variable-charge-rate">Variable Charge Rate</h4>

<p>OpenEVSE charge controller can vary the charge rate, or more specifically the OpenEVSE can ‘request’ a particular charge rate from the car. It is actually the cars charging control electronics that varies the charge rate. OpenEVSE requests a particular charge rate by varying the pilot signal square wave duty cycle <a href="https://openev.freshdesk.com/support/solutions/articles/6000052070-theory-of-operation">see OpenEVSE technical theory of opperation</a>. Charge rate can be varied from 6A (SAE/IEC standard min charge current) up to max charge rate (28A for my Nissan LEAF) in 1A increments. The car responds almost instantly to a charge rate adjustment request from the OpenEVSE controller. Charging can also be paused and resumed remotely if required.</p>

<p><strong>Example:</strong></p>

<p><code class="highlighter-rouge">$SC13</code> will set the current charge current to 13A. The screen shot on the right below illustrates issuing the <code class="highlighter-rouge">$SC 13</code> RAPI command into the OpenEVSE local web page interface (served from ESP8266). The screenshot on the left shows the effect of reduction in charge rate as monitored by emonPi displayed using Emoncms:</p>

<p><img src="https://blog.openenergymonitor.org/images/openevse-build6.png" alt="openevse build6" /></p>

<p>Rapi commands can also be issued directly via a single HTTP request. Eg. the same rapi command to set charging rate to 13A:</p>

<p><a href="http://192.168.0.108/r?rapi=%24SC+13">http://192.168.0.108/r?rapi=%24SC+13</a></p>

<p>To sleep (pause a charge) issue RAPI command <code class="highlighter-rouge">$FS</code></p>

<p><a href="http://192.168.0.108/r?rapi=%24FS">http://192.168.0.108/r?rapi=%24FS</a></p>

<p>To enable (start a charge) issue RAPI command <code class="highlighter-rouge">$FE</code></p>

<p><a href="http://192.168.0.108/r?rapi=%24FE">http://192.168.0.108/r?rapi=%24FE</a></p>

<p><em>Assuming <code class="highlighter-rouge">192.168.0.108</code> is the local IP address of the OpenEVSE ESP.</em></p>

<p>There is also an <a href="https://github.com/tiramiseb/python-openevse">OpenEVSE RAPI command python library</a>.</p>

<p>RAPI commands can be used to control and check the status of all OpenEVSE functions. A full list of RAPI commands can be found in the <a href="https://github.com/OpenEVSE/open_evse/blob/stable/firmware/open_evse/src/rapi_proc.h">OpenEVSE plus source code</a>.</p>

<h4 id="future-developments">Future developments</h4>

<p><del>I would like to add MQTT support to the <a href="https://github.com/chris1howell/OpenEVSE_RAPI_WiFi_ESP8266">OpenEVSE WiFi ESP8266 firmware</a>, this will allow RAPI commands to be issued via MQTT over an authenticated local MQTT server e.g. emonPi / RaspberryPi or remote MQTT server e.g. Hive MQTT / Cloud MQTT. Using MQTT will make it easier and more secure to control the OpenEVSE. MQTT allow easy integration with all home automation and control platforms e.g nodeRED / OpenHAB / Emoncms.</del></p>

<p><strong>UPDATE Oct 17:</strong> WiFi V2 is now stable release with web-UI interface, RAPI over MQTT and solar PV divert feature. See <a href="https://github.com/OpenEVSE/ESP8266_WiFi_v2.x">OpenEVSE WiFi V2 Documentation</a></p>

<h3 id="open-source">Open Source</h3>

<p>The source code and CAD hardware designs for the OpenEVSE unit can be found on github:</p>

<ul>
  <li><a href="https://github.com/OpenEVSE/OpenEVSE_LCD">OpenEVSE I2C LCD + RTC</a></li>
  <li><a href="https://github.com/OpenEVSE/OpenEVSE_PLUS">OpenEVSE Plus Controller Hardware</a></li>
  <li><a href="https://github.com/lincomatic/open_evse/blob/stable/rapi_proc.h">OpenEVSE Plus Controller Firmware</a></li>
  <li><a href="https://github.com/OpenEVSE/Default_Firmware_Loads">OpenEVSE Plus Controller Pre Compiled Firmware</a></li>
  <li><a href="https://github.com/OpenEVSE/ESP8266_WiFi_v2.x">OpenEVSE ESP8266 Wifi V2 firmware</a></li>
  <li><a href="https://github.com/OpenEVSE/Enclosures">OpenEVSE Enclosure</a></li>
</ul>

<h3 id="related-forum-threads">Related Forum Threads</h3>

<p>See <a href="https://community.openenergymonitor.org/c/integrations/openev">OpenEV forum section</a> for related discussion.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Introducing emonTH V2]]></title>
    <link href="https://blog.openenergymonitor.org/2016/09/emonth2/"/>
    <updated>2016-09-29T09:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2016/09/emonth2</id>
    <content type="html"><![CDATA[<p>The emonTH V2 is an open-source, wireless, battery-powered temperature and humidity monitoring node.</p>

<p>The emonTH V2 features a Silicon Labs <strong><a href="https://www.silabs.com/Support%20Documents%2FTechnicalDocs%2FSi7021-A20.pdf">Si7021</a></strong> temperature and humidity sensor instead of the <a href="http://shop.openenergymonitor.com/dht22-temperature-humidity-sensor-am2302/">DHT22 sensor</a>. The Si7021 is more accurate and significantly (2000 times!) lower power then the DHT22. This will result in an increase in the emonTH battery life; from 10 months to several years (at least two years). The Si7021 is also <em>much</em> smaller than the DHT22.</p>

<p><img src="https://blog.openenergymonitor.org/images/emonth2.jpg" alt="emonTH V2" /></p>

<p><em>The Si7021 sensor can be seen in the top right-hand corner of the PCB. The white film on top of the sensor is a dust film and should not be removed. The dust film is factory fitted and will protect the sensor from dust and air contaminants.</em></p>

<p><img src="https://blog.openenergymonitor.org/images/emonth_green.png" alt="emonTH image" /></p>

<p><strong><a href="https://shop.openenergymonitor.com/emonth-temperature-humidity-node/">The emonTH V2 is now shipping via our online shop</a></strong></p>

<p>As with all our hardware units the emonTH V2 is <a href="https://github.com/openenergymonitor/emonth2">fully open-source</a> and manufactured locally in North Wales, UK using non-conflict materials lead-free processes.</p>

<!--more-->

<h3 id="emonth-v2-features">emonTH V2 Features</h3>

<ul>
  <li>Microcontroller: Arduino compatible ATmega328p</li>
  <li>Internal Sensor: Si7021 (internal temperature &amp; Humidity)</li>
  <li>External Sensor (OPTIONAL): DS18B20 external temperature sensor. See hardware wiki for connections</li>
  <li>Power: 2 x AA from onboard holder, LTC3525 3.3V DC-DC boost converter to extend battery life</li>
  <li>RF Radio: RFM69CW 433Mhz</li>
</ul>

<h3 id="si7021-temperature--humidity-sensor">Si7021 Temperature &amp; Humidity Sensor</h3>

<ul>
  <li>Silicon Labs SI7021-A20-GM1R</li>
  <li>Power supply 1.9V - 3.6V</li>
  <li>Operating range humidity 0-80%RH; temperature -40~125 deg C</li>
  <li>Accuracy humidity +-3%RH</li>
  <li>Accuracy Temperature: +-0.4 degC</li>
  <li>Active current: 150uA</li>
  <li>Sleep current 0.06uA</li>
  <li>Measurement time: 2.6ms = 10ms</li>
</ul>

<p>See <a href="https://github.com/openenergymonitor/emonth2/tree/master/sensor">DHT22 VS Si7021 technical comparison table</a></p>

<ul>
  <li><a href="https://github.com/openenergymonitor/emonth2">emonTH V2 GitHub</a> (open-hardware &amp; software)</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Summer Placement]]></title>
    <link href="https://blog.openenergymonitor.org/2016/09/summer-placement/"/>
    <updated>2016-09-01T09:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2016/09/summer-placement</id>
    <content type="html"><![CDATA[<p>Hi! My name is Eben I’ve been working with OpenEnergyMonitor for the past 10 weeks as part of a summer placement organised by <a href="http://www.arloesigwyneddwledig.com/">Arloesi Gwynedd Wledig</a>; a local project aimed at highlighting the local tech sector employment opportunities on <a href="http://parcmenai.co.uk/">Parc Menai</a> the business park where we are located in North Wales, and the difficulties that they face, as well as the great perks of living in such a beautiful area.</p>

<p><img src="https://blog.openenergymonitor.org/images/eben.jpg" alt="image" /></p>

<p>The scheme organised placements for four students in four seperate tech companies in Parc Menai. Here is a video with highlights the whole 10 week scheme:</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/N2v2a3ZJq0E" frameborder="0" allowfullscreen=""></iframe>
</div>

<blockquote>
  <p>Working in a small company in a rural area, that has such a large online community has really opened my eyes to the possibilities that the internet and the digital age can offer, in that people are no longer bound to cities. Increasing infrastructure development in terms of roads and internet speeds has increased this mobility further, and I look forward to the growth that this will no doubt provide in Gwynedd. OpenEnergyMonitor is for me the perfect example of a growing business that has been made possible by opensource development, global connections and communities, and new technology.</p>
</blockquote>

<!--more-->

<h2 id="me-and-gwynedd">Me, and Gwynedd</h2>

<p><a href="https://en.wikipedia.org/wiki/Gwynedd">Gwynedd</a> is area that we live in North Wales. I am currently studying physics at Cardiff University, and originally from <a href="https://cy.wikipedia.org/wiki/Dyffryn_Nantlle">Dyffryn Nantlle</a>. As you can probably tell by my failure to find a decent photo of myself doing anything else, I’m (like Glyn and Trystan)  a keen climber, and that’s been my primary reason for wanting to return to Gwynedd to work, with a long list of climbs in the Llanberis Pass, Ogwen Valley, and Tremadog, and more that I wanted to have a go at. It’s a great way to appreciate Gwynedd, in my opinion, and I even got to go climbing with Glyn.</p>

<p>Check out the video here:</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/CzPMPY-I3_I" frameborder="0" allowfullscreen=""></iframe>
</div>

<p>It’s a little cheesy, but we got to climb with RC drones filming, so that was pretty sweet :-)</p>

<p>The other strong pull, for me, was the Welsh language; <a href="https://en.wikipedia.org/wiki/Welsh_language">Cymraeg</a>. I’ve spent two years now living and studying down in Cardiff, and the switch to the academic and leisure medium of English has been a little challenging, and it’s always amazing to come back to Gwynedd, and hear Welsh on the street and in the shops, as well as at home, and in the OpenEnergyMonitor workplace. A lot of our culture is tied intimately to the language, and it’s been good to feel that again.</p>

<h2 id="what-ive-been-up-to">What I’ve been up to</h2>

<p>During my time at the company, I’ve learnt how to write basic software from scratch (I’ve only ever done experimental analysis using python previously) to Arduino boards and the ESP8266, my eyes have been opened to the possibilities of GitHub, and other resources. I’ve played around with adding a DHT22 sensor to the ESP8266 and <a href="https://github.com/openenergymonitor/EmonESP/pull/7">creating an DHT22 &gt; Emoncms example</a> which I contributed to the emonESP GitHub repository.</p>

<p>I’ve also had the pleasure of working with Gwil on preparation and order fulfilment for the OpenEnergyMonitor shop, which has been fun!</p>

<p>Another interesting experience was the few times I visited the local electronics factory, <a href="http://www.dferrantigroup.com/pcb-population-test/">Denis Ferranti</a>  where the boards are all manufactured. It was really cool to see the manufacturing process, and the quality of the equipment there. It’s great to know that OpenEnergyMonitor are able to manufacuture locally, which contributes to the local economy.</p>

<h2 id="the-scheme">The Scheme</h2>

<p>Through the project that organised this placement opportunity, the four of us students (all at different companies) were asked to come to a conclusion on the situation regarding tech jobs in Gwynedd, and the so-called ‘brain drain’, as the best and brightest graduates leave the area to embrace city life.</p>

<p>The overall conclusion was that perceptions need to change. People overwhelmingly do not view Gwynedd as a place with lots of potential for tech jobs, but research has shown that the truth is the very opposite, with Parc Menai alone set to be the location of around 200 new jobs in the next few years. At a presentation at Pontio, at Bangor university, the four of us students reccomended modernisation of the school syllabus, a closer relationship between companies and schools, more grassroots tech events (a brilliant example of this sort of thing are the events held by <a href="https://www.facebook.com/NorthWalesTechnology/?fref=ts">North Wales Tech</a> (check them out!), and better utilisation of social media by companies looking for skilled graduates.</p>

<p>I’d like to thank Glyn, Trystan, and Gwil for making this summer such an incredibly fun and rewarding one, as well as an extremely eye opening one. I’m sure the company has a huge future, and I for one will be following future products and developments with keen interest.</p>

<p>Today is my last day, and it’s a little sad. I’m writing this blog but should probably stop and help Gwil assemble some more emonTH’s.. :-)</p>

<p>Eben, out.</p>

<p>There also will soon be footage of the Dennis Ferranti factory we visited, I will post it here as soon as it arrives!
Thanks for reading!</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[EcoHome Lab: From Monitoring to Control]]></title>
    <link href="https://blog.openenergymonitor.org/2016/08/ecohomelab-control/"/>
    <updated>2016-08-12T18:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2016/08/ecohomelab-control</id>
    <content type="html"><![CDATA[<p>Last night I attended <a href="https://www.meetup.com/Eco-Home-Lab-Manchester/events/230714252/">EcoHomeLab meetup</a> in Manchester organised by the <a href="http://carbon.coop/">CarbonCoop</a>.</p>

<blockquote>
  <p>EcoHomeLab monthly meetups at <a href="https://madlab.org.uk/">MadLab</a> brings householders and green-technologists together to take control of home energy use and generation.</p>
</blockquote>

<p>It was great fun to catch up with regular faces as well as meet many new interesting people.</p>

<p>I gave a short presentation overview of our efforts as OpenEnergyMonitor to make it as easy as possible for people to get started with energy monitoring and control (home automation) with a sustainability / energy saving focus.</p>

<p>I presented the recent work we have been doing to integrate platforms such as MQTT, Node-RED and openHAB ready-installed and pre-configured on the emonPi, our RaspberryPi based energy monitoring platform. These additional platforms run alongside Emoncms on the emonPi.</p>

<p><strong>See the <a href="http://guide.openenergymonitor.org/integrations/">Integrations section of our user guide for more info</a></strong></p>

<p>Here are copy of my slides from the event:</p>

<iframe src="https://docs.google.com/presentation/d/1qSaxiB2tAgMe3ehQ08E9_r340y9HgHUOYvyUvsHd55I/embed?start=false&amp;loop=false&amp;delayms=10000" frameborder="0" width="529" height="426" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="max-width: 100%;"></iframe>

<ul>
  <li>
    <p><a class="attachment" href="https://community.openenergymonitor.org/uploads/default/original/2X/1/1a55b8c172086f743b1b0abe1d01d7c10963d88c.pdf">Download in PDF format</a> (6.8 MB)</p>
  </li>
  <li><a href="https://docs.google.com/presentation/d/1qSaxiB2tAgMe3ehQ08E9_r340y9HgHUOYvyUvsHd55I/pub?start=false&amp;loop=false&amp;delayms=3000">View in HTML (hosted from Google Slides)</a></li>
  <li><a href="https://docs.google.com/presentation/d/1qSaxiB2tAgMe3ehQ08E9_r340y9HgHUOYvyUvsHd55I/edit?usp=sharing">View in full Google Slides format (with clickable hyperlinks &amp; selectable text)</a></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[HTU21D / Si72021 Temperature and Humidity Sensor]]></title>
    <link href="https://blog.openenergymonitor.org/2016/07/HTU21D-Temperature-Humidity-sensor/"/>
    <updated>2016-07-26T10:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2016/07/HTU21D-Temperature-Humidity-sensor</id>
    <content type="html"><![CDATA[<p>I have been been evaluating the <a href="https://octopart.com/htu21d-measurement+specialties-30374934">HTU21D</a> temperature and humidity sensor made by Measurement Specialties as a possible DHT22 replacement for the emonTH. This is quite a new sensor, released in 2013. The <a href="https://octopart.com/si7021-a10-gm-silicon+labs-31448011">Si72021</a> is also a posiblity with an identical pin-out and specs.</p>

<p><img src="https://blog.openenergymonitor.org/images/htu21d_1.png" alt="image" /></p>

<ul>
  <li><a href="https://octopart.com/htu21d-measurement+specialties-30374934">OctoPart list</a></li>
  <li><a href="http://datasheet.octopart.com/HTU21D-Measurement-Specialites-datasheet-22149496.pdf">Datasheet</a></li>
  <li><a href="http://uk.farnell.com/measurement-specialties/htu21d/humidity-digital-3-rh-dfn-6/dp/2393536?CMP=GRHB-OCTOPART">Farnell item</a></li>
  <li>DFM footprint</li>
  <li>Digital, pre-clibrated</li>
  <li>I2C</li>
</ul>

<p>The metrics speak for themselves:</p>

<table>
  <thead>
    <tr>
      <th>Metric</th>
      <th>HTU21D</th>
      <th>Si72021</th>
      <th>DHT22</th>
      <th>DHT22 vs HTU21D Difference</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Cost in 1k off</td>
      <td>£1.42 (July16)</td>
      <td>£2.15</td>
      <td>£4.57 (July16)</td>
      <td>3.2 times cheaper (£3.15 less!)</td>
    </tr>
    <tr>
      <td>Vcc</td>
      <td>2.1v - 3.6V</td>
      <td>1.9V - 3.6V</td>
      <td>3.3-6V</td>
      <td> </td>
    </tr>
    <tr>
      <td>Humidity accuracy</td>
      <td>±2% RH</td>
      <td>±2% RH</td>
      <td>±2%RH</td>
      <td>n/a</td>
    </tr>
    <tr>
      <td>Humidity Range</td>
      <td>0-100% RH</td>
      <td>0-100% RH</td>
      <td>0-100% RH</td>
      <td>n/a</td>
    </tr>
    <tr>
      <td>Temperature accuracy</td>
      <td>±0.3°C</td>
      <td>±0.4°C</td>
      <td>±0.5°C</td>
      <td>40% more accurate</td>
    </tr>
    <tr>
      <td>Temperature Range</td>
      <td>-40°C +125°C</td>
      <td>-40°C +125°C</td>
      <td>-40°C +80°C</td>
      <td>56% more accurate</td>
    </tr>
    <tr>
      <td>Sleep Current</td>
      <td>0.02uA</td>
      <td>0.06uA</td>
      <td>15uA</td>
      <td>750 times less power</td>
    </tr>
    <tr>
      <td>Measurement Current</td>
      <td>0.045mA</td>
      <td>0.09 mA</td>
      <td>0.5mA</td>
      <td>11 times less power</td>
    </tr>
    <tr>
      <td>Measurement time</td>
      <td>0.01s - 0.0026s</td>
      <td>0.01s - 0.0026s</td>
      <td>2s</td>
      <td>200 times faster</td>
    </tr>
    <tr>
      <td>Energy consumed per sample</td>
      <td>1.5uJ</td>
      <td>2.97uJ</td>
      <td>3300uJ</td>
      <td>2000 times less power</td>
    </tr>
    <tr>
      <td>Time sampling per day*</td>
      <td>14.4s</td>
      <td> </td>
      <td>2800s</td>
      <td> </td>
    </tr>
    <tr>
      <td>Time sleeping per day*</td>
      <td>86386s</td>
      <td> </td>
      <td>83600s</td>
      <td> </td>
    </tr>
    <tr>
      <td>Energy consumed per day*</td>
      <td>2.36mW [1]</td>
      <td> </td>
      <td>2836mW [2]</td>
      <td>1201 times less energy per day!</td>
    </tr>
  </tbody>
</table>

<!--more-->

<div class="highlighter-rouge"><pre class="highlight"><code>energy consumed (joule, J) = potential difference (volt, V) × charge (coulomb, C)  
charge (coulomb, C) = current (ampere, A) × time (second, s) 
energy consumed (joule, J)  = potential difference (volt, V) × current (ampere, A) × time (second, s) 
</code></pre>
</div>

<p>*Assuming 1 sample per min and sleeping in between samples, 1440 min per day = 86400s per day. See HTU21D testing repo a <a href="https://github.com/openenergymonitor/emonTH/blob/master/sensor_test/htu21d">sub-repository of the emonTH</a> for full calculations.</p>

<p><strong>An upgraded emonTH with a HTU21D sensor instead of DHT22 should benefit from substantially increased battery life, increased accuracy and lower cost.</strong></p>

<p>I’ve obtained <a href="https://www.sparkfun.com/products/retired/12064">HTU21D Sparkfun breakout to test</a> and easily got it working with an Arduino using the <a href="https://github.com/adafruit/Adafruit_HTU21DF_Library">Adafruit library</a>.</p>

<p><img src="https://blog.openenergymonitor.org/images/htu21d_2.jpg" alt="image" /></p>

<hr />

<p>There is some confusion with regard to the variants of this sensor <em>I believe</em> from my research that the HTU21D <strong>replaces</strong> the <a href="https://octopart.com/sht21-sensirion-19013846">SHT21</a> made by Sensirion. Both sensors have identical pin-outs.</p>

<hr />

<p>I hope to get a prototype emonTH with HTU21D up and running soon. I would be interested to hear if anyone has experience working with this sensor.</p>

<p>For disucssion see <a href="https://community.openenergymonitor.org/t/htu21d-temperature-and-humidity-sensor-possible-dht22-replacement/1106">HTU21D forum thread.</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Part 3/3: Continuous Deployment (Over-The-Air Update to ESP8266)]]></title>
    <link href="https://blog.openenergymonitor.org/2016/06/esp8266-ota-update/"/>
    <updated>2016-06-29T10:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2016/06/esp8266-ota-update</id>
    <content type="html"><![CDATA[<p><strong>This post is part of a series</strong></p>

<ul>
  <li><a href="https://blog.openenergymonitor.org/2016/06/platformio/">1/3 PlatfomIO overview &amp; compiling + uploading locally and on a Raspberry Pi</a></li>
  <li><a href="https://blog.openenergymonitor.org/2016/06/auto-build-continuous-test-firmware/">2/3: Continuous testing and auto release binary generation using PlatformIO &amp; TravisCI</a>
    <ul>
      <li>Related post: <a href="https://blog.openenergymonitor.org/2016/06/esp8266-emonesp-developments/">EmonESP ESP8266 WiFi developments</a></li>
    </ul>
  </li>
  <li><strong>3/3: Continuous Deployment (OTA to ESP8266)</strong></li>
</ul>

<hr />

<p>Following on from my last couple of posts in this series we now have a working continuous cloud-based build &amp; test (firmware compiling) flow using PlatformIO and TravisCI, to quickly recap:</p>

<ol>
  <li>Code change is committed to the <a href="https://github.com/openenergymonitor/EmonESP">EmonESP repo on GitHub</a></li>
  <li>TravisCI triggers a build (compile) using PlatformIO running in a TravisCI container in the cloud.</li>
  <li>If build/compilation process fails we get an email alert, if pull-request we get a warning before merging if proposed changes break the build.</li>
  <li>If a Git commit is tagged as a release the build process uploads the generated compiled binary (.bin) to the repo GitHub release page.</li>
</ol>

<p>The next step is to get the compiled binary from GitHub-releases (EmonESP in this example) deployed to a WiFi connected production ESP8266. Here’s the user facing EmonESP web-interface for this firmware update process:</p>

<p><img src="https://blog.openenergymonitor.org/images/emonesp-update.png" alt="image" /></p>

<!--more-->

<p>The OTA (over-the-air) firmware deployment process is based on Daniel Eichhorn’s (<a href="https://twitter.com/squix78">@squix78</a>) <a href="http://blog.squix.org/2016/06/esp8266-continuous-delivery-pipeline-push-to-production.html">excellent blog post</a>. In summary the process is as follows:</p>

<p><img src="https://blog.openenergymonitor.org/images/esp-update-process.png" alt="image" />
Diagram from <a href="http://blog.squix.org/2016/06/esp8266-continuous-delivery-pipeline-push-to-production.html">Daniel Eichhorn’s blog</a></p>

<ul>
  <li>The build is tagged with a version number using PlatformIO build-flag, see EmonESP <a href="https://github.com/openenergymonitor/EmonESP/blob/master/platformio.ini">platformio.ini</a>.</li>
  <li>An intermediate PHP script connects to the GitHub API to check the latest release version and returns this as a string.</li>
  <li>ESP sends it’s current running firmware version to the PHP script using tag argument <code class="highlighter-rouge">&amp;tag=1.0.2</code>.</li>
  <li>If the running firmware version does not match the latest release version, the PHP script grabs the latest release .bin from github-releases API and serves it up as a download to the ESP.</li>
  <li>ESP then flashes the compiled .bin OTA update using the <a href="https://github.com/esp8266/Arduino/tree/master/libraries">ESP8266httpUpdate library</a> which is built-in to the espressif Arduino tool-chain</li>
</ul>

<h3 id="intermediate-php-script">Intermediate PHP script</h3>

<p>Ideally the production ESP8266 would be able to contact the GitHub-release API directly negating the need for the intermediate PHP script. However, there are a number of reasons why this is not practical at the moment. To quote Daniel’s blog post:</p>

<blockquote>
  <ul>
    <li>The ESPhttpUpdate currently cannot follow redirects. This is important since github hosts the release artefacts on Amazon AWS. But in the API JSON &gt; object the address points to github, so the http client has to follow a redirect to download the artefact.</li>
    <li>Github uses https for its API and will redirect you to it if you are trying plain HTTP. This means that you would have to know the SSL fingerprints &gt; of the github API server and the AWS hosting instance since this is required by the ESPs secure client interface. After all the ESPs don’t have a chain &gt; of trusted certificates stored somewhere. While the fingerprint of the github API might be stable, the redirection on Amazon AWS might not always use &gt; the same certificate.</li>
  </ul>
</blockquote>

<p><strong>There is currently working example of this process (ESP8266 firmware + intermediate PHP script) in the <code class="highlighter-rouge">ota</code> branch of <a href="https://github.com/openenergymonitor/EmonESP">EmonESP GitHub Repo</a>.</strong></p>

<h3 id="security">Security</h3>

<p><strong>In it’s current implementation the update process described above is not secure.</strong></p>

<p>Obviously secure delivery and verification of the update binary is essential.</p>

<p>Ideally the binary download to the ESP would be done over secure https. This maybe be possible, however https support on the ESP is currently not super stable and limited by the available memory (as mentioned above).</p>

<p>A method to verify the compiled binary could be to sign the compiled binary with a private key which is verified by the ESP before firmware is updated.</p>

<p>I would be interested to hear from anyone with any thoughts / advice as to how secure ESP OTA firmware delivery can be achieved.</p>

<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Emoncms Docker]]></title>
    <link href="https://blog.openenergymonitor.org/2016/06/emoncms-docker/"/>
    <updated>2016-06-25T10:00:00+00:00</updated>
    <id>https://blog.openenergymonitor.org/2016/06/emoncms-docker</id>
    <content type="html"><![CDATA[<p>We have made the first steps towards running Emoncms to run in a <a href="https://www.docker.com/">Docker</a> container.</p>

<p>Dockerfiles and setup notes are in the emoncms-docker repository:</p>

<h3 id="httpsgithubcomemoncmsemoncms-dockerhttpsgithubcomemoncmsemoncms-docker"><a href="https://github.com/emoncms/emoncms-docker">https://github.com/emoncms/emoncms-docker</a></h3>

<p><img src="https://blog.openenergymonitor.org/images/docker-logo.png" alt="image" /></p>

<p>Docker is an exciting tool to help make development, testing and deployment of web-applications easier.</p>

<h2 id="what-is-docker-the-short-version">What is docker? (the short version):</h2>

<blockquote>
  <p>Docker containers wrap a piece of software in a complete filesystem that contains everything needed to run: code, runtime, system tools, system libraries – anything that can be installed on a server. This guarantees that the software will always run the same, regardless of its environment.</p>
</blockquote>

<h3 id="what-is-docker-the-long-version">What is docker? (the long version):</h3>

<blockquote>
  <p>Docker is an open-source platform for developers and sysadmins to build, ship, and run distributed applications. Consisting of Docker Engine, a portable, lightweight runtime and packaging tool, and Docker Hub, a cloud service for sharing applications and automating workflows, Docker enables apps to be quickly assembled from components and eliminates the friction between development, QA, and production environments. As a result, IT can ship faster and run the same app, unchanged, on laptops, data center VMs, and any cloud.</p>
</blockquote>

<h2 id="quick-start">Quick Start</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>$ docker pull openenergymonitor/emoncms
$ git clone https://github.com/emoncms/emoncms-docker
$ cd emoncms-docker
$ docker-compose up
</code></pre>
</div>

<p><strong>That’s it! Emoncms should now be runnning, browse to <a href="http://localhost:8080">http://localhost:8080</a></strong></p>

<!--more-->

<h2 id="emoncms-docker">Emoncms Docker</h2>

<p>Using Docker it’s possible to fire up Emoncms on a bare system (assuming Docker is installed) in a couple of minutes with all the LAMP install &amp; config taken care of.</p>

<p>This is great for development since it’s possible to play about with Emoncms running in a Docker container without fear of messing up your system or production Emoncms install.</p>

<p>In the future, Docker can even be used as a deployment tool for Emoncms. In theory, it should possible to deploy the Emoncms Docker container on any server within minutes.</p>

<p>We have taken a multi-container approach with php-apache running in one container and the MYSQL database running in another. The containers are linked using <a href="https://docs.docker.com/compose/overview/">docker-compose</a>.</p>

<p><strong>See <a href="https://github.com/emoncms/emoncms-docker">emoncms-docker Readme</a> for setup &amp; build instructions.</strong></p>

<p><em>Note: The Emoncms docker setup is currently in development and not recomended for production Emoncms deployment just yet.</em></p>

<h2 id="forum-discussion">Forum discussion</h2>

<p>See <a href="https://community.openenergymonitor.org/t/emoncms-docker/823/4">this forum topic</a> for discussion.</p>

<hr />
]]></content>
  </entry>
  
</feed>
